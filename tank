


<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/  dc: http://purl.org/dc/terms/  foaf: http://xmlns.com/foaf/0.1/  og: http://ogp.me/ns#  rdfs: http://www.w3.org/2000/01/rdf-schema#  schema: http://schema.org/  sioc: http://rdfs.org/sioc/ns#  sioct: http://rdfs.org/sioc/types#  skos: http://www.w3.org/2004/02/skos/core#  xsd: http://www.w3.org/2001/XMLSchema# " rel="optimized">
<head> 
  <script type="text/javascript">
  !function(e,o,t,n,i,r,c){function f(e,t){r?n(e,t):i.push(e,t)}function u(e,t,n,i){return i=o.createElement(e||'SCRIPT'),t&&(i.id=t),n&&(i.onload=n),(t?o.getElementById(t):0)||i}r=/p/.test(o.readyState),c=o.head.appendChild.bind(o.head),e.addEventListener('on'+t in e?t:'load',function(){for(r=1;i[0];)n(i.shift(),i.shift())}),f._=u,f.$=c,e.defer=f,e.deferscript=function(t,n,e,i){f(function(e){(e=u(0,n,i)).src=t,c(e)},e)}}(this,document,'pageshow',setTimeout,[]),function(s,n){var a='IntersectionObserver',d='src',l='data-',h='lazied',y=l+h,e='Attribute',m='get'+e,p='set'+e,b='load',v='forEach',I=Function(),g=s.defer||I,r=g._||I,c=g.$;function E(e,t){return[].slice.call((t||n).querySelectorAll(e))}function t(u){return function(e,t,o,r,c,f){g(function(n,t){function i(n){!1!==(r||I).call(n,n)&&((f||['style','srcset',d])[v](function(e,t){(t=n[m](l+e))&&n[p](e,t)}),E('SOURCE',n)[v](i),b in n&&n[b]()),n.className+=' '+(o||h)}t=a in s?(n=new s[a](function(e){e[v](function(e,t){e.isIntersecting&&(t=e.target)&&(n.unobserve(t),i(t))})},c)).observe.bind(n):i,E(e||u+'['+l+d+']:not(['+y+'])')[v](function(e){e[m](y)||(e[p](y,u),t(e))})},t)}}function i(){g(function(n,i,o){o=E((n='[type=deferjs]')+':not('+(i='[async]')+')').concat(E(n+i)),function e(t){if(n=o.shift()){for(i in n.parentNode.removeChild(n),t=r(),n)if(t[i]!=n[i])try{t[i]=n[i]}catch(e){}t.removeAttribute('type'),t[d]&&!t.hasAttribute('async')?(t.onload=t.onerror=e,c(t)):(c(t),e())}}()})}g.all=i,s.deferstyle=function(t,n,e,i){g(function(e){(e=r('LINK',n,i)).rel='stylesheet',e.href=t,c(e)},e)},s.deferimg=t('IMG'),s.deferiframe=t('IFRAME'),i()}(this,document);
  </script>
  <link rel="preload" href="/themes/custom/coolmath/assets/fonts/icomoon/fonts/icomoon.ttf" as="font" crossorigin="anonymous" />
  <link href="https://cdn.intergi.com" rel="preconnect" />
  <script type="deferjs" src="/modules/custom/cmatgame_ads_analytics/js/advertisement-ads.js"></script>

    <link rel="manifest" href="/manifest.json">


<meta charset="utf-8" />
<style>/* @see https://github.com/aFarkas/lazysizes#broken-image-symbol */.js img.lazyload:not([src]) { visibility: hidden; }/* @see https://github.com/aFarkas/lazysizes#automatically-setting-the-sizes-attribute */.js img.lazyloaded[data-sizes=auto] { display: block; width: 100%; }</style>
<link rel="canonical" href="//www.coolmathgames.com/0-awesome-tanks-2" />
<meta name="keywords" content="coolmaths, coolmath, math, maths, game, games, free, online, fun, coolmaths, coolmath, math, maths, game, games, free, online, fun, awesome, tanks" />
<meta name="description" content="Awesome Tanks 2 at Cool Math Games: Turn on the engine and fire the cannon! Blast your enemies and grab the cash they leave behind. Make your tank ultra-powerful with new weapons and upgrades!" />
<meta property="og:description1" content="Awesome Tanks 2 at Cool Math Games: Turn on the engine and fire the cannon! Blast your enemies and grab the cash they leave behind. Make your tank ultra-powerful with new weapons and upgrades!" />
<meta property="og:image" content="https://www.coolmathgames.com/sites/default/files/awesome-tanks-2.png" />
<meta property="og:image:alt" content="Awesome Tanks 2 Game Screenshot" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Awesome Tanks 2" />
<meta property="og:url" content="//www.coolmathgames.com/0-awesome-tanks-2" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no maximum-scale=1.0, user-scalable=no, minimal-ui" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<style>*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%}article,aside,header,main,nav{display:block}body{margin:0;font-family:Proxima-Soft-Regular,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:1rem;font-weight:400;line-height:1.2;color:#fff;text-align:left;background-color:#16202c}hr{box-sizing:content-box;height:0;overflow:visible}h1,h2,h3,h5{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ul{margin-bottom:1rem}ul{margin-top:0}ul ul{margin-bottom:0}strong{font-weight:bolder}a{color:#29bffd;text-decoration:none;background-color:transparent}img{border-style:none}img{vertical-align:middle}label{display:inline-block;margin-bottom:.5rem}button{border-radius:0}button,input{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,input{overflow:visible}button{text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{padding:0;border-style:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}h1,h2,h3,h5{margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:2.5rem}h2{font-size:2rem}h3{font-size:1.75rem}h5{font-size:1.25rem}hr{margin-top:1rem;border:0;border-top:0 solid rgba(0,0,0,.1)}.img-fluid{max-width:100%;height:auto}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:561px){.container{max-width:560px}}@media (min-width:767px){.container{max-width:768px}}@media (min-width:961px){.container{max-width:960px}}@media (min-width:1200px){.container{max-width:1140px}}.form-text{display:block;margin-top:0}.btn{display:inline-block;font-weight:400;color:#fff;text-align:center;vertical-align:middle;background-color:transparent;border:0 solid transparent;padding:.5rem 1.5rem;line-height:1.2;border-radius:.25rem}.btn-primary{color:#212529;background-color:#29bffd;border-color:#29bffd}.btn-sm{padding:.3rem 1rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.navbar{position:relative;padding:.5rem 1rem}.navbar,.navbar>.container{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between}.navbar-toggler{padding:.25rem .75rem;font-size:1.25rem;line-height:1;background-color:transparent;border:0 solid transparent;border-radius:.25rem}@media (max-width:960.98px){.navbar-expand-lg>.container{padding-right:0;padding-left:0}}@media (min-width:961px){.navbar-expand-lg{flex-flow:row nowrap;justify-content:flex-start}.navbar-expand-lg>.container{flex-wrap:nowrap}}.badge{display:inline-block;padding:.4em .8em;font-size:100%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25rem}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.progress{display:flex;height:2rem;overflow:hidden;font-size:.75rem;background-color:#e9ecef;border-radius:.25rem}.progress-bar{display:flex;flex-direction:column;justify-content:center;color:#000;text-align:center;white-space:nowrap;background-color:#f7c649}.clearfix:after{display:block;clear:both;content:""}.d-none{display:none!important}@media (min-width:961px){.d-lg-none{display:none!important}.d-lg-block{display:block!important}}@media (min-width:1200px){.d-xl-block{display:block!important}}.justify-content-between{justify-content:space-between!important}.float-left{float:left!important}.mt-0{margin-top:0!important}.mb-1{margin-bottom:.25rem!important}.my-2{margin-top:.5rem!important}.mb-2,.my-2{margin-bottom:.5rem!important}.mt-3{margin-top:1rem!important}.mt-4,.my-4{margin-top:1.5rem!important}.mb-4,.my-4{margin-bottom:1.5rem!important}.pr-0{padding-right:0!important}.pl-0{padding-left:0!important}.pb-3{padding-bottom:1rem!important}@media (min-width:961px){.my-lg-0{margin-top:0!important}.my-lg-0{margin-bottom:0!important}.mr-lg-5{margin-right:3rem!important}.pr-lg-0{padding-right:0!important}.pl-lg-0{padding-left:0!important}}.text-center{text-align:center!important}input:-internal-autofill-selected,input:-webkit-autofill{background-color:#16202c!important;border:1px solid #16202c;color:#e9f6fe;-webkit-text-fill-color:#fff}.mobile-menu-items .mi-title{font-size:20px;margin-bottom:5px;margin-top:20px}.mobile-menu-items .mi-title:first-child{margin-top:0}.mobile-menu-items .pane-menu-menu-desktop-header-menu .pane-content>ul.menu{display:table!important}.mobile-menu-items .welcome-box{clear:both}.mobile-menu-items .welcome-box .login-link p{text-align:right}.mobile-menu-items .pane-cmatgame-search-search-game #cmatgame-search-block-form .form-item:before{content:"\E986";font-family:icomoon!important;font-style:normal;font-weight:400;color:#775a08;z-index:999;display:flex;position:absolute;font-size:25px;height:40px;width:50px;background:#fdcd3b;align-items:center;border:4px solid #e9d93c;left:0;top:0;padding-left:8px}.mobile-menu-items .pane-cmatgame-search-search-game #cmatgame-search-block-form .form-item .form-text{border-color:#e9d93c!important;border-left:50px solid #e9d93c!important}body,html{font-family:Proxima-Soft-Regular,Helvetica,Arial,sans-serif;zoom:1}main{width:100%;overflow-x:hidden}h1,h2{color:#fff;text-transform:uppercase;font-family:Proxima-Soft-Bold;font-size:1rem}h1{font-size:1.125rem;line-height:1.375rem}h2{font-size:1.3rem}h3{color:#fff;font-family:Proxima-Soft-Bold;font-size:1rem}h5{font-size:1.1rem;font-family:Proxima-Soft-Regular}.cmatgame-title{margin-top:15px}h1.pane-title{position:relative;background-image:none;color:#fff;font-family:Proxima-Soft-Bold;font-size:20px;line-height:1.5rem;text-transform:uppercase;margin-bottom:20px;margin-top:-4px;padding:0 0 3px;border-bottom:2px solid #f1db00}@media (min-width:961px){h1.pane-title{border:none;background-color:#2c6792;color:#e6f6ff;padding:3px 0 3px 22px;border-radius:10px;height:30px;font-size:1.5rem}}@media (-ms-high-contrast:none){h1.pane-title{padding-top:0}}p{margin-bottom:1rem;line-height:1.2rem}strong{font-family:Proxima-Soft-Bold}hr{border-top:1px solid #67b1e7;margin-top:0!important;margin-bottom:1rem;height:1px;clear:both}.btn{font-family:Proxima-Soft-Bold;text-transform:uppercase;border:0;min-width:190px;line-height:1.2rem;font-size:1rem;padding:.65rem 1.5rem}.btn{text-decoration:none}.btn.btn-primary{padding:.65rem 1.5rem .55rem;margin-bottom:1rem}.btn.btn-primary.btn-sm{min-width:10px;padding:.3rem 1.5rem .25rem}a.btn{color:#000;font-size:.75rem}.btn.btn.playlist-count{white-space:normal!important;word-wrap:break-word;min-width:130px}.game-container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;margin-top:20px}@media (min-width:561px){.game-container{max-width:540px}}@media (min-width:767px){.game-container{max-width:720px}}@media (min-width:961px){.game-container{max-width:960px}}@media (min-width:1200px){.game-container{max-width:1200px}}@media (min-width:961px){.game-container{margin-top:40px}}.container-fluid{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.row{display:flex;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col-12,.col-2,.col-7,.col-lg-3,.col-lg-6,.col-lg-9,.col-md-1,.col-md-12,.col-md-2,.col-md-5,.col-md-7,.col-md-8,.col-md-9,.col-sm-12,.col-sm-6,.col-xl-3,.col-xl-7{position:relative;width:100%;padding-right:15px;padding-left:15px}.col-2{flex:0 0 16.66666667%;max-width:16.66666667%}.col-7{flex:0 0 58.33333333%;max-width:58.33333333%}.col-12{flex:0 0 100%;max-width:100%}@media (min-width:561px){.col-sm-6{flex:0 0 50%;max-width:50%}.col-sm-12{flex:0 0 100%;max-width:100%}}@media (min-width:767px){.col-md-1{flex:0 0 8.33333333%;max-width:8.33333333%}.col-md-2{flex:0 0 16.66666667%;max-width:16.66666667%}.col-md-5{flex:0 0 41.66666667%;max-width:41.66666667%}.col-md-7{flex:0 0 58.33333333%;max-width:58.33333333%}.col-md-8{flex:0 0 66.66666667%;max-width:66.66666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-12{flex:0 0 100%;max-width:100%}}@media (min-width:961px){.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-9{flex:0 0 75%;max-width:75%}}@media (min-width:1200px){.col-xl-3{flex:0 0 25%;max-width:25%}.col-xl-7{flex:0 0 58.33333333%;max-width:58.33333333%}}.block-adstop-otherpage-728x90{margin:0 auto;height:142px;width:728px}@media (min-width:767px){.block-adstop-otherpage-728x90{max-width:728px}}@media (max-width:766.98px){.block-adstop-otherpage-728x90{max-width:300px;height:90px!important}}.pane-cmatgame-advertisement-cm-g-otherpages-160x600-left{position:absolute;width:160px;height:600px}#r-modal{display:none;text-align:center;color:#fff;position:fixed;background:#000;right:0;bottom:0;left:0;top:0;width:100%;z-index:999999}#r-timer-div{text-align:center}#r-continue-link,#r-timer-div{color:#ff0;margin-top:10px;margin-bottom:10px;font-size:22px;text-transform:uppercase;font-family:Proxima-Soft-Bold}#m-adcontainer,#r-adcontainer{display:flex;align-items:center;justify-content:center}#m-content123{position:relative;display:block}p.advertisment{text-align:center;color:#fff;font-size:14px;position:relative;top:5px}@font-face{font-family:icomoon;src:url(/themes/custom/coolmath/assets/fonts/icomoon/fonts/icomoon.eot);src:url(/themes/custom/coolmath/assets/fonts/icomoon/fonts/icomoon.eot#iefix) format("embedded-opentype"),url(/themes/custom/coolmath/assets/fonts/icomoon/fonts/icomoon.ttf) format("truetype"),url(/themes/custom/coolmath/assets/fonts/icomoon/fonts/icomoon.woff) format("woff"),url(/themes/custom/coolmath/assets/fonts/icomoon/fonts/icomoon.svg#icomoon) format("svg");font-weight:400;font-style:normal;font-display:block;font-display:auto}[class^=icon-]{font-family:icomoon!important;speak:never;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-remove_sign:before{content:"\F057"}.icon-play:before{content:"\F04B"}.icon-circle:before{content:"\F111"}.icon-expand-arrows-alt:before{content:"\F31E"}@font-face{font-family:Proxima-Soft-Regular;src:url(https://use.typekit.net/af/a4e72f/00000000000000003b9b3032/27/l?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/a4e72f/00000000000000003b9b3032/27/d?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/a4e72f/00000000000000003b9b3032/27/a?fvd=n4&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-display:swap;font-style:normal;font-weight:400}@font-face{font-family:Proxima-Soft-Bold;src:url(https://use.typekit.net/af/2657d4/00000000000000003b9b3038/27/l?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff2"),url(https://use.typekit.net/af/2657d4/00000000000000003b9b3038/27/d?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("woff"),url(https://use.typekit.net/af/2657d4/00000000000000003b9b3038/27/a?fvd=n7&primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&v=3) format("opentype");font-display:swap;font-style:normal;font-weight:700}main nav.navbar{position:relative;z-index:1;padding:.5rem 0}.pane-menu-menu-desktop-header-menu .pane-content .menu{padding:0}.pane-menu-menu-desktop-header-menu .pane-content .menu li.is-expanded .nolink:before,.pane-menu-menu-desktop-header-menu .pane-content .menu li.is-expanded a:before{border-color:transparent}.pane-menu-menu-desktop-header-menu .pane-content .menu li{position:relative;display:block;vertical-align:bottom;border-bottom:0}.pane-menu-menu-desktop-header-menu .pane-content .menu li a{overflow:hidden;display:block;width:100%;color:#f5e61f;font-size:1.4rem;line-height:18px;font-family:Proxima-Soft-Bold;text-align:center;text-transform:uppercase;vertical-align:middle}.pane-menu-menu-desktop-header-menu .pane-content .menu li .menu_allgames{border-radius:11px}.pane-menu-menu-desktop-header-menu .pane-content .menu li .menu__link,.pane-menu-menu-desktop-header-menu .pane-content .menu li .nolink{border-top:.5px solid #f1b034;border-bottom:2px solid #c78f00;border-right:1px solid #c78f00;font-size:1.09rem;background-color:transparent;color:#654900;padding:10px 11px 12px}.pane-menu-menu-desktop-header-menu .pane-content .menu .menu_more.menu__link.nolink{font-size:1.08rem;padding:10px 25px 12px 12px}.pane-menu-menu-desktop-header-menu .pane-content .menu .is-expanded .menu{border:0;margin-top:0}.pane-menu-menu-desktop-header-menu .pane-content .menu .is-expanded .menu li a{padding:0;width:100px}.pane-menu-menu-desktop-header-menu .pane-content .menu .is-expanded .menu li.nested{list-style-type:none;background:#fcd792;background:linear-gradient(180deg,#f5e765 34%,#fad94d 94%,#c18500)}.pane-menu-menu-desktop-header-menu .pane-content .menu .is-expanded .menu li.nested:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.pane-menu-menu-desktop-header-menu .pane-content .menu .is-expanded .menu li.nested:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.pane-menu-menu-desktop-header-menu .pane-content .menu .is-expanded .menu li.nested .menu__link{font-size:.75rem;background-color:transparent;color:#654900;padding:7px;width:100px}.pane-menu-menu-desktop-header-menu .pane-content>.menu>li>.nolink,.pane-menu-menu-desktop-header-menu .pane-content>.menu>li>a{display:block;width:100%;color:#f5e61f;font-size:1.5rem;line-height:18px;font-family:Proxima-Soft-Bold;text-align:center;text-transform:uppercase}.pane-menu-menu-desktop-header-menu .pane-content>.menu{display:table;width:100%;padding:0}.pane-menu-menu-desktop-header-menu .pane-content>.menu li a{background-color:#010101}.pane-menu-menu-desktop-header-menu .pane-content>.menu li a.menu_strategy{border-top-left-radius:12px;border-bottom-left-radius:12px}.pane-menu-menu-desktop-header-menu .pane-content>.menu li a.menu_unlocked{border-top-right-radius:12px;border-bottom-right-radius:12px}.pane-menu-menu-desktop-header-menu .pane-content>.menu li .nolink{font-size:1rem}.pane-menu-menu-desktop-header-menu .pane-content>.menu>li{position:relative;float:left;vertical-align:bottom;list-style-type:none;background:#f5e765;background:linear-gradient(180deg,#f5e765,#fad94d 41%,#ffbe00)}.pane-menu-menu-desktop-header-menu .pane-content>.menu>li.is-expanded>.nolink{min-width:100px;color:#654900;position:relative}.pane-menu-menu-desktop-header-menu .pane-content>.menu>li.is-expanded>.nolink:after{content:"";width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #654900;position:absolute;top:17px;right:9px}.pane-menu-menu-desktop-header-menu .pane-content>.menu li:first-child{border-top-left-radius:12px;border-bottom-left-radius:12px}.pane-menu-menu-desktop-header-menu .pane-content>.menu .menu_unlocked.menu__link{border-top-right-radius:12px;border-bottom-right-radius:12px}.pane-menu-menu-desktop-header-menu .pane-content>.menu li.menu_allgames.menu__link{margin-left:11px}@media (max-width:1199.98px){.pane-menu-menu-desktop-header-menu .pane-content>.menu li.menu_allgames.menu__link{margin-left:8px}}.pane-menu-menu-desktop-header-menu .pane-content>.menu>li:last-child{border-radius:11px;background:#fff950}.pane-menu-menu-desktop-header-menu .pane-content>.menu>li:last-child a.menu_allgames{padding:10px 24px 12px}@media (max-width:1199.98px){.pane-menu-menu-desktop-header-menu .pane-content>.menu>li:last-child a.menu_allgames{padding:10px 7px 12px}}.pane-menu-menu-desktop-header-menu .pane-content>.menu .menu{position:absolute;display:none;z-index:10000;margin-top:1px;border-top:none}.pane-menu-menu-desktop-header-menu .pane-content>.menu .menu li a{display:block;width:110px;padding:11px 0 10px 30px;color:#fff}.navbar-container{width:100%}@media (max-width:960.98px){.navbar-container{padding:0 10px}}.navbar-container .welcome-box{margin:0 auto;max-width:270px}.navbar-container .welcome-box .btn{white-space:normal}.navbar .navbar-toggler{position:fixed;top:30px;right:20px;z-index:1000;width:30px;height:30px}@media (max-width:560.98px){.navbar .navbar-toggler{top:15px}}.navbar .navbar-toggler .bar{top:0;left:0;position:absolute;width:30px;height:3px;box-shadow:0 2px 0 rgba(0,0,0,.6);border-radius:4px;background-color:#f1db00}.navbar .navbar-toggler .bar.second{top:9px}.navbar .navbar-toggler .bar.third{top:18px;bottom:-9px}.page__header_mobile .menu-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;opacity:0;display:none}.page__header_mobile .navbar-container{position:fixed;right:-100%;top:0;width:100%;height:100%!important;padding-top:30px;overflow-x:hidden;background:#2a455d}.page__header_mobile .navbar-container .welcome-box{text-align:center;top:-10px;position:relative}.page__header_mobile .navbar-container a{color:#46b8fd;font-family:Proxima-Soft-Bold}.page__header_mobile .navbar-container .mobile-menu-items{max-width:300px;margin:0 auto}.page__header_mobile .navbar-container .pane-menu-menu-desktop-header-menu .pane-content ul.menu{display:block}.page__header_mobile .navbar-container .pane-menu-menu-desktop-header-menu .pane-content ul.menu li{display:block;float:left;width:50%;margin:0;background:0 0;border:none;border-radius:0!important}.page__header_mobile .navbar-container .pane-menu-menu-desktop-header-menu .pane-content ul.menu li.menu_allgames{width:100%;font-weight:700}.page__header_mobile .navbar-container .pane-menu-menu-desktop-header-menu .pane-content ul.menu li.is-expanded{width:100%}.page__header_mobile .navbar-container .pane-menu-menu-desktop-header-menu .pane-content ul.menu li a{border-radius:0!important;background:0 0;border:none;text-align:left;text-transform:none;font-family:Proxima-Soft-Bold;color:#46b8fd;font-size:1.275rem;padding:10px 10px 10px 0!important}.page__header_mobile .navbar-container .pane-menu-menu-desktop-header-menu .pane-content ul.menu li .nolink{text-align:left;border:none;background:0 0;text-transform:none;font-family:Proxima-Soft-Regular;color:#fff;padding:10px 10px 10px 0!important;font-size:1.275rem!important}.page__header_mobile .navbar-container .pane-menu-menu-desktop-header-menu .pane-content ul.menu li .nolink:after{border-top-color:#fff;left:50px}.page__header_mobile .navbar-container .pane-menu-menu-desktop-header-menu .pane-content ul.menu ul.menu{display:none;position:relative}.page__header_mobile .navbar-container .pane-menu-menu-desktop-header-menu .pane-content ul.menu ul.menu li.nested{background:0 0}.page__header_mobile .navbar-container .pane-menu-menu-desktop-header-menu .pane-content ul.menu ul.menu li.nested a.menu__link{width:100%!important;color:#46b8fd;font-size:1.275rem}.page__header_mobile .navbar-container .cmatgame-search-game{clear:both;position:relative;z-index:100000;left:0;top:0;margin:15px auto 0;height:35px;width:100%}.page__header_mobile .navbar-container .cmatgame-search-game label{display:none}.page__header_mobile .navbar-container .cmatgame-search-game #cmatgame-search-block-form input.menu-search-bar{display:block!important;text-indent:0;background-image:none;padding:10px;height:40px;border-radius:0!important;max-width:340px;margin:0;left:0;right:auto;outline:0;box-shadow:inset 0 -1px 0 #ddd;border:4px solid #e9d93c}.page__header_mobile .navbar-container .cmatgame-search-game #cmatgame-search-block-form .search-results-container{top:40px}@media (max-width:1199.98px){.pane-menu-menu-desktop-header-menu .pane-content .menu li .menu_more.menu__link.nolink{padding:10px 28px 12px 6px!important;font-size:1rem!important;min-width:85px!important}.pane-menu-menu-desktop-header-menu .pane-content .menu li a.menu__link,.pane-menu-menu-desktop-header-menu .pane-content>.menu>li:last-child a.menu_allgames{padding:10px 7px 12px;font-size:1rem}}#cmatgame-search-block-form label{position:absolute;right:0;top:11px;background-position:0;width:60px;height:43px;background:url(/themes/custom/coolmath/assets/images/header/menu-search-item.png);text-indent:-99999px}#cmatgame-search-block-form input.menu-search-bar{width:100%;height:44px;margin:9px;top:0;background-image:url(/themes/custom/coolmath/assets/images/close.png);background-position:4px 4px;background-repeat:no-repeat;border-radius:8px;text-indent:72px;font-size:16px;font-family:Proxima-Soft-Regular;border:4px solid #e9d93c;right:-9px;position:absolute;display:block;outline:0}#close-search-box{top:10px;color:#000;z-index:999999;right:410px;font-size:0;content:"X";height:42px;width:55px;position:absolute;left:0}.search-results-container{display:block;left:0;position:absolute;top:48px;max-height:565px;width:100%;overflow-x:hidden;overflow-y:auto;z-index:999;text-align:left;border:4px solid #e9d93c;border-top:0}.pane-cmatgame-search-search-game{position:absolute;top:-11px;width:380px;right:0}.pane-cmatgame-search-search-game .form-item{margin:0}.pane-cmatgame-search-search-game #cmatgame-search-block-form #edit-search-bar{display:none}input::-webkit-input-placeholder{color:#cdcdcd!important}header.page__header{background-color:#2a455d;height:142px}header.page__header .branding.container{position:relative;height:114px}header.page__header .navbar .container{position:relative}@media (min-width:961px){header.page__header .navbar .container{min-width:960px}}.pane-bean-new-go-ad-free a{background:url(/themes/custom/coolmath/assets/images/header/go-ad-free.png) no-repeat;background-position:top;height:59px;width:152px;display:block;font-size:0;border:none}.pane-bean-new-go-ad-free{position:relative;left:-4px}.pane-bean-cm-top{position:absolute;top:65px;border-radius:.25rem;background-color:#2a455d;padding:.25rem;width:220px}.other-sites-wrapper{position:relative;top:5px;display:inline-block}.logo-container{position:relative;top:11px;height:93px;text-align:center}.logo-container img,.logo-container img.logo.svg{width:440px;margin-top:8px;filter:drop-shadow(1px 1px 1px #000)!important;max-width:100%}header.page__header_mobile{background:#2a455d;height:80px}@media (max-width:560.98px){header.page__header_mobile{height:50px}}header.page__header_mobile .logo-container-mobile{margin-top:22px}header.page__header_mobile .logo-container-mobile img.logo.svg{max-width:300px;filter:drop-shadow(2px 2px 1px #000)}@media (max-width:560.98px){header.page__header_mobile .logo-container-mobile{margin-top:12px}header.page__header_mobile .logo-container-mobile img.logo.svg{max-width:200px;height:auto}}.icon-gamethumbnail-carousel{margin-left:59px}.icon-gamethumbnail-carousel{background-image:url(/themes/custom/coolmath/assets/images/cmatgameimages/flash-corner.png);background-repeat:no-repeat;height:33px;width:44px;position:absolute}.navbar-expand-lg>.container{padding:0}@media (min-width:961px){.game-container .col-md-7{padding-right:30px;padding-left:30px}}.global-wrapper{padding-top:0}.page main{background-size:cover;background-repeat:no-repeat;background-position:top;background-attachment:fixed}@media (max-width:960.98px){.cmgr-short-desc,.game-item .game-item-description .cmgr-short-desc p,.game-item .game-item-description .field-body p{font-size:.85rem!important}}.game-item{margin-bottom:20px;overflow:hidden}.game-item .game-link-wrapper img{float:left;margin-right:10px;background-color:#006c8a;border:1px solid #32bdff;padding:5px;width:95px;height:62px;overflow:hidden}@media (max-width:960.98px){.game-item .game-link-wrapper img{width:82px;height:50px;padding:0;border-radius:.25rem}}.game-item .game-link-wrapper h3{font-size:1.08rem;line-height:1.2rem;text-transform:none;display:inline;margin-bottom:5px;color:#29bffd;font-family:Proxima-Soft-Bold}.game-item .game-item-description .cmgr-short-desc,.game-item .game-item-description .field-body{padding-left:92px}@media (min-width:961px){.game-item .game-item-description .cmgr-short-desc,.game-item .game-item-description .field-body{padding-left:105px}}.game-item .game-item-description .cmgr-short-desc p,.game-item .game-item-description .field-body p{color:#fff;font-size:1rem;font-family:Proxima-Soft-Regular;line-height:1.1rem;margin-bottom:0}@media (max-width:960.98px){.game-item .field-body.cmgr-long-desc{display:none}.game-item .cmgr-short-desc{display:block}}@media (min-width:961px){.game-item .field-body.cmgr-long-desc{display:block}}@media (min-width:961px){.game-item .cmgr-short-desc{display:none}}.block-views-blockgame-queues-block-2 .game-item:nth-child(n+12){display:none}.pane-game-details-carousel-game-detail .jcarousel:not([data-jcarousel=true]){max-width:465px;height:54px;overflow:hidden}.pane-game-details-carousel-game-detail .jcarousel:not([data-jcarousel=true]) li{float:left;list-style:none}.pane-game-details-carousel-game-detail .jcarousel:not([data-jcarousel=true])+.bx-controls-direction1{display:none}.pane-game-details-carousel-game-detail .game-item .game-link-wrapper a .field-image{display:flex;margin-right:0}.pane-game-details-carousel-game-detail .game-item .game-link-wrapper a .field-image img{border:none!important;padding:0!important;margin-right:0}@media (max-width:960.98px){.row.leaderboard{margin-left:-30px;margin-right:-30px}}.right-header-block{position:absolute;right:0;color:#fff}.welcome-box{text-align:right}.welcome-box .btn.free-account{position:relative;display:inline-block;background-color:#29bffd;height:50px;white-space:normal;padding:7px 7px 7px 55px;color:#2a455d;font-size:.65rem;border-radius:0 0 .25rem .25rem;box-shadow:2px 2px 2px #000;margin-top:27px;margin-bottom:15px}.welcome-box .btn.free-account .earn{text-transform:none}@media (max-width:960.98px){.welcome-box .btn.free-account{width:290px}}@media (min-width:961px) and (max-width:1199.98px){.welcome-box .btn.free-account{width:100%}.welcome-box .btn.free-account .earn{display:none}}.welcome-box .btn.free-account .avatar{border-radius:50%;border:3px solid #29bffd;background-color:#29bffd;background-image:url(/themes/custom/coolmath/assets/images/user-profile/lion_avatar.png);z-index:1;top:-8px;left:-13px;width:65px;height:65px;box-shadow:0 2px 2px #000}.welcome-box .btn.free-account .avatar,.welcome-box .btn.free-account .badge{background-repeat:no-repeat;background-position:50%;background-size:cover;position:absolute;overflow:hidden;display:block}.welcome-box .btn.free-account .badge{background-image:url(/themes/custom/coolmath/assets/images/user-profile/levels/iL7.svg);z-index:2;top:27px;left:30px;width:34px;height:34px}.welcome-box .btn.free-account .new{position:absolute;right:0;top:-12px;height:12px;overflow:hidden;color:#fff;background:red;font-size:.7rem;font-style:italic;padding:0 12px;border-radius:3px 3px 0 0;line-height:1.2}.welcome-box .btn.free-account .getuserprofile{display:block;font-size:1rem;color:#f1db00;text-shadow:1px -1px #2a455d,-1px -1px #2a455d,-1px 1px #2a455d,-1px -1px #2a455d,1px 0 #2a455d,-1px 0 #2a455d,0 1px #2a455d,0 -1px #2a455d,1px 1px #2a455d,-1px 1px #2a455d,1px 1px #2a455d,1px -1px #2a455d}.welcome-box .btn.free-account .earn{font-size:.65rem}.welcome-box .login-link{font-size:1rem;line-height:1.2rem;font-family:Proxima-Soft-Bold;color:#fff!important;right:73px;position:relative;top:-5px;text-shadow:2px 2px 2px #000}.welcome-box .login-link p{text-align:right}.welcome-box .login-link a.login{color:#29bffd}@media (max-width:960.98px){.welcome-box .login-link{right:0;font-size:1.25rem}.welcome-box .login-link p{text-align:center}}.progress{background:#000;border-radius:5px;height:24px;text-align:center;overflow:visible}.progress .progress-text{font-family:Proxima-Soft-Bold;font-size:1.2rem;line-height:1.125rem;color:#fff;text-shadow:1px 1px 4px #000;position:absolute;top:2px;width:100%}.progress .progress-text a{color:#fff;text-shadow:1px 1px 4px #000;text-decoration:none}.progress .progress-bar{background-image:linear-gradient(90deg,#f7c649 3.53%,#fff661);background-repeat:repeat-x;font-family:Proxima-Soft-Bold;font-size:.875rem;line-height:1.125rem;align-items:center;text-align:center;color:#028fca!important;border-radius:5px}.game-xp-progress .progress-text{color:#fff;-webkit-text-fill-color:#fff;-webkit-text-stroke-width:0;-webkit-text-stroke-color:#fff}.node-type-game .game-progress-status .progress-text{width:70%!important}.node .game-progress-status{width:50%;position:relative;top:0}.node .game-progress-status .progress{height:30px;width:90%}.node .game-progress-status .progress .progress-text{font-size:1.2rem}.game-progress-status{width:100%;display:flex;flex-direction:row;align-items:center;position:relative;top:5px}.game-progress-status .progress{height:20px;width:70%;margin-right:10px}.game-progress-status .progress .progress-text{margin-top:2px}.progress-bar{width:0}.flash-msg h2{color:#58c8eb;font-size:.85rem;text-transform:none;letter-spacing:.5px;text-shadow:2px 2px 2px #000}.flash-img{float:left;padding-right:10px;margin-top:4px}.other-pages-300x250{margin-bottom:44px}.pane-cmatgame-advertisement-cm-g-otherpages-300x250-top{background:0 0}.pane-cmatgame-advertisement-cm-g-otherpages-300x250-top .ad-wrapper{height:268px;width:300px}@media (max-width:766.98px){.pane-cmatgame-advertisement-cm-g-otherpages-300x250-top .ad-wrapper{height:255px;width:300px}}.pane-cmatgame-advertisement-cm-g-otherpages-300x250-center .ad-wrapper{height:268px;width:300px}@media (max-width:766.98px){.pane-cmatgame-advertisement-cm-g-otherpages-300x250-center .ad-wrapper{height:auto;min-height:270px;width:300px;margin-bottom:20px}}.pane-cmatgame-advertisement-cm-g-otherpages-300x250-top .ad-wrapper{display:block}@media (max-width:960.98px){.pane-cmatgame-advertisement-cm-g-otherpages-300x250-top .ad-wrapper{height:255px;width:300px;margin:0 auto}}@media (max-width:766.98px){.pane-cmatgame-advertisement-cm-g-otherpages-300x250-center .ad-wrapper{height:255px;width:300px;margin:0 auto}}.pane-cmatgame-advertisement-cm-g-otherpages-300x250-center .ad-wrapper{display:block}@media (max-width:766.98px){.pane-cmatgame-advertisement-cm-g-otherpages-300x250-center .ad-wrapper{height:255px;width:300px}}@media (max-width:1199.98px){.pane-cmatgame-advertisement-cm-g-otherpages-300x250-center .ad-wrapper{margin:0 auto}}.main-aside .block{margin-bottom:44px}#afg_preloader #adcontainer{margin:0 auto}.wide-game-item .main-aside{margin-right:0}.wide-game-item .main-aside{width:300px}@media (max-width:960.98px){.pane-game-details-carousel-game-detail .view-content{padding-left:30px}}.jcarousel-control-next,.jcarousel-control-prev{position:absolute;top:10px;width:30px;height:30px;text-decoration:none;font-size:0;border-radius:none;box-shadow:none;background-image:url(/themes/custom/coolmath/assets/images/carousel-arrows.png);background-repeat:no-repeat;background-color:transparent;opacity:.7}.jcarousel-control-prev{width:25px;background-position:0;left:-20px}.jcarousel-control-next{width:25px;background-position:100%;right:-20px}.node-type-game .block-gamedetailcarousel,.node-type-game .block-system-main-block{position:relative}.node-type-game .block-system-main-block .btn.playlist-count{display:none;position:absolute;bottom:0;right:0;width:130px;margin-bottom:0}.node-type-game .block-system-main-block .playlist-count{padding:10px;text-align:center}.game-xp-bar{color:#fff;margin-bottom:1rem}.game-xp-bar .game-progress-status{width:400px!important}.game-xp-bar .progress{width:50%;margin-top:0;border:2px solid #27465b}.game-field-wrapper #no-flash-overlay{text-align:center}#thumbsuplike_message{float:left;font-family:Proxima-Soft-Regular;font-size:.875rem;position:absolute;top:-16px;right:82px;font-style:italic;text-transform:none;margin:0;width:120px}.block-gamedetailcarousel{height:107px}.skip-ad-btn{border-radius:5px}#continue-container{height:50px;margin-top:20px}#continue-link{margin-left:35%!important;text-align:right;float:left;font-size:22px;text-transform:uppercase;font-family:Proxima-Soft-Bold}.continue-lnk-container-rsection{width:42%;float:left;text-align:right}#timer_div{float:left;font-size:22px;text-align:left}#timer_div{font-family:Proxima-Soft-Bold;text-transform:uppercase}.img-button{width:58%;float:left;text-align:left}#img-button-container,.img-button,.skip-ad-btn{padding-left:0!important}@media (min-width:1200px){.node-type-game .inside{margin-left:20px}}.node-type-game .inside .view-header{font-size:1.2em}.node-type-game .inside .view-header p{margin-top:15px;color:#fff}.node-type-game .inside h1.pane-title{position:relative;background:0 0;border-bottom:2px solid #47a6ff;font-size:19px!important;color:#e6f6ff;margin-left:0;margin-bottom:5px;border-radius:0;padding-left:0!important;padding-right:60px;line-height:1rem}@media (min-width:961px){.node-type-game .inside h1.pane-title{font-size:30px!important;height:auto;line-height:1.6rem;padding-right:180px}}.node-type-game .bxslider-views-slideshow-main-frame-row .game-item{margin:0}.node-type-game .bxslider-views-slideshow-main-frame-row .game-item .game-link-wrapper{position:relative;display:flex;flex-direction:column}.node-type-game .bxslider-views-slideshow-main-frame-row .game-item .field-image{border:2px solid transparent}.node-type-game .bxslider-views-slideshow-main-frame-row .game-item .game-title{position:absolute;top:0;left:0;display:none;width:83px;height:100%;margin:0;overflow:hidden;text-align:center;white-space:nowrap;font-family:Proxima-Soft-Bold!important}.node-type-game .bxslider-views-slideshow-main-frame-row .game-item .game-title .overlay{display:inline-block;width:83px;height:100%;background-color:#010101;opacity:.5;vertical-align:middle}.node-type-game .bxslider-views-slideshow-main-frame-row .game-item .game-title .title-on-overlay{position:relative;display:inline-block;width:83px;margin-left:-100%;color:#fff;font-size:15px;line-height:1.1;vertical-align:middle;white-space:normal;word-wrap:break-word;font-weight:700}@media (max-width:560.98px){.node-type-game .bxslider-views-slideshow-main-frame-row .field-image{border-color:#3896c5!important}.node-type-game .bxslider-views-slideshow-main-frame-row .game-title{display:block!important}}.node-type-game .game-on-mobile .bxslider-views-slideshow-main-frame-row .field-image{border-color:#3896c5!important}.node-type-game .game-on-mobile .bxslider-views-slideshow-main-frame-row .game-title{display:block!important}.game-xp-bar .game-progress-status{width:300px!important}.immerse-button{margin:0;text-align:right}.immerse-button a.btn{margin:0;line-height:1em;background-image:url(/themes/custom/coolmath/assets/images/WATCH-AD-TO-PLAY-BIG-SCREEN-v3.png);background-repeat:no-repeat;width:312px;height:29px}.immerse-button a.btn span{font-size:0;position:relative;top:-2px;padding-left:4px;text-decoration:none}.immerse-button a.btn i{font-size:0;padding-left:10px}.close-full-screen{margin:0;text-align:right}.close-full-screen a.btn{padding:2px 3px!important;margin:0;line-height:1em}.close-full-screen a.btn span{font-size:16px;position:relative;top:-2px;padding-left:4px;text-decoration:none}.close-full-screen a.btn i{font-size:25px;padding-left:10px}.immerse-button .requestfullscreen{position:relative}.field-game{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;margin-bottom:20px}.node-type-game .close-full-screen,.node-type-game .game-xp-bar-immerse-button{display:none}#does-not-support-ie{text-align:center;padding:20px}.game-page-mobile .game-image .game__field-og-image{position:relative;min-height:150px;max-height:225px;overflow:hidden}.game-page-mobile .game-image img{background:#000;height:100%}.game-page-mobile .game-image img{width:100%;height:auto}.game-page-mobile .game-image .playNowButton{position:absolute;z-index:1;top:80px;left:calc(50% - 24px);width:50px;height:50px;transform:scale(2)}.game-page-mobile .game-image .playNowButton i.icon-circle{color:#40af40;position:absolute;top:3px;left:2px;margin:0 auto;font-size:46px}.game-page-mobile .game-image .playNowButton i.icon-play{color:#fff;position:absolute;top:18px;left:20px;margin:0 auto;text-shadow:1px 1px 1px #000}.game-page-mobile .game-image .circle{width:52px;height:52px;font-size:48px;display:block;background:#fff;border:1px solid #fff;border-radius:50%;box-shadow:0 0 0 0 #fff;transform:scale(1);animation:playPulse 2s infinite;left:-1px;position:relative}.game-page-mobile .game-xp-bar .game-progress-status{width:90%!important}.game-page-mobile .game-xp-bar .progress{width:100%;height:30px;margin:0 10px 0 0}@keyframes playPulse{0%{transform:scale(.9);box-shadow:0 0 0 0 #fff}50%{transform:scale(1);box-shadow:0 0 0 0 hsla(0,0%,100%,0)}to{transform:scale(.9);box-shadow:0 0 0 0 hsla(0,0%,100%,0)}}.game-item-description,.game-item-description p{line-height:1.1rem}@media (min-width:961px){.cmgr-short-desc{display:none}}@media (max-width:960.98px){.node-type-game .game-container .main-aside{display:none}}.no-flash-overlay-mobile{font-family:Proxima-Soft-Bold;background-color:#fff;left:0}.no-flash-overlay-mobile{position:absolute;top:60px;right:0;margin:auto;border:1px solid;border-radius:.25rem;color:#000;width:205px;height:80px;padding:.5rem;font-size:1rem;z-index:100;box-shadow:1 1 1 transparent}@media (min-width:961px){.no-flash-overlay-mobile{font-size:1rem;padding:1rem;width:280px;height:95px}}h3.mobile-instructions{color:#fff;font-family:Proxima-Soft-Bold;font-size:20px;line-height:1.5rem;text-transform:uppercase}#big-screen-container{width:560px;height:608px;border:2px solid #f1f55e;position:relative;margin:0 auto;padding:0 15px;background:#2b455e}.image-bs-sample{float:left;padding-left:40px}.big-screen-head{height:52px;background-color:#111926}.mid-big-section-head{background-color:#2b455e;margin:0 auto;text-align:center;padding-top:42px;height:552px}.big-screen-container-class .img-container-big-screen{height:270px!important}.img-container-big-screen{padding-top:30px;height:220px}.mid-big-section-head h1{font-size:1.5rem}.mid-big-section-head h2{text-transform:capitalize;letter-spacing:.5px}.image-bs-sample h2{font-size:1.1rem}.bs-head-txt{float:left;text-align:center;color:#f1f55e;font-size:1.2rem;padding-top:13px;padding-left:73px}.big-screen-container-class .bs-head-txt{padding-left:50px!important}.bs-head-logo{float:left;padding-left:10px;padding-top:2px}.bs-close-button{width:35px;background-color:#4298ef;border-radius:50px;float:left;height:35px;text-align:center;padding-top:8px;color:#000!important;padding-left:50;margin-left:95px;margin-top:8px}.big-screen-container-class .bs-close-button{margin-left:auto!important;position:relative;right:10px}.big-screen-container-class .bs-close-button a{color:#000!important}.bs-close-btn{color:#000;font-weight:700}.bs-footer-link{padding-top:25px}.bs-learn-more{text-align:center;padding-top:5px;font-size:.85rem;letter-spacing:.5px;color:#d9af58}.bs-lrn-more{color:#d9af58!important;text-underline-position:under}.bs-lrn-more,.bs-no-thks{text-decoration:underline}.bs-no-thks{text-align:center;padding-top:30px;letter-spacing:.5px;text-underline-position:under}.bs-no-thks a{color:#fff}.bs-lnk-lrn-more{color:#fff!important}.adfree-marketing-campaign{background-color:#16202c;height:600px;border:2px solid #ff0;width:600px}.adfree-marketing-campaign .mid-big-section-head{height:532px!important}.adfree-marketing-campaign .bs-head-txt{padding-left:35px!important;color:#f6c555!important}.adfree-marketing-campaign .bs-head-logo{width:100px;float:left;padding-left:10px;padding-top:2px}.adfree-mid-section-marketing-campaign .sup-bold{font-size:120%;font-weight:700}.adfree-mid-section-marketing-campaign .sup-bold-2{font-size:110%;font-weight:700;color:#06ddb5}.adfree-mid-section-marketing-campaign .mkt-container1{float:left;width:171px;text-align:right;height:100px}.adfree-mid-section-marketing-campaign .ad-free-txt{color:#06ddb5;font-size:16px;float:left;height:125px;width:360px;text-align:left;font-weight:700;padding-top:42px;padding-left:10px;letter-spacing:.65px}.adfree-mid-section-marketing-campaign .image-bs-sample{float:left;padding-left:20px}.adfree-mid-section-marketing-campaign .image-better-focus{float:left;padding-left:175px}.adfree-mid-section-marketing-campaign .no-waiting-txt{color:#fff;font-size:13px;float:left;width:200px;text-align:left;padding-top:18px;padding-left:10px;letter-spacing:.65px}.adfree-mid-section-marketing-campaign .better-focus-container{width:100%;height:133px;text-align:center}.adfree-mid-section-marketing-campaign .all-excl-txt{float:left;text-align:center;color:#c2a960;font-size:1.1rem;padding-top:13px;padding-left:50px;letter-spacing:.75px;width:100%;height:50px}.img-container-big-screen{text-align:center}.marketing-cmpn-footer{background-color:#16202c}.bs-close-button a{color:#29bffc!important}@media (max-width:960.98px){.field-body.cmgr-long-desc{display:none}}.node-type-game .game-instructions{display:none}.view-display-id-carousel_game_detail .game-item .game-link-wrapper img{padding:0;border:none;width:83px;height:50px}.no-select{-webkit-touch-callout:none}.flashIntroTxt{font-size:14px;font-weight:700;letter-spacing:1px;padding-top:10px;text-align:center;padding-left:12px}.flashIntroTxtImg{margin-left:-4px}#newFlashDetectHtml{width:648px}.flashContainerList{background-color:#2a455d;padding-top:13px;padding-bottom:1px;padding-left:38px;margin-top:15px;width:560px;border-radius:6px}.flashContainerList .common-title{padding-top:5px;padding-bottom:5px}.flashNotFoundImgStyle{border-radius:6px}.related-game-block{margin:0 auto}#videoplayer{min-height:1px}.like-container-entity-node{float:left;margin-right:14px}.like-container-entity-node>div{display:inline}.dislike-container-entity-node{float:left}.dislike-container-entity-node>div{display:inline}.block-page-title-block{position:relative}#thumbsup{position:absolute;right:0;z-index:11111}@media (min-width:961px){#thumbsup{top:0}}@media (max-width:960.98px){#thumbsup{top:-10px}}#thumbsup a,#thumbsup img{outline:0;border:none}#thumbsup .thumbsupmessage{float:left;margin:0;font-size:1rem;font-family:Proxima-Soft-Regular;position:relative;top:4px;left:-13px;color:#fff;text-transform:none!important;font-weight:400}@media (max-width:1199.98px){#thumbsup .thumbsupmessage{font-size:.8rem;top:-25px;right:-60px;left:auto}}.game-item{overflow:hidden;margin-bottom:1.5rem}.game-item h3{font-size:1rem;line-height:1.125rem;font-family:Proxima-Soft-Bold;text-transform:none}body{color:#fff}a.login{color:#29bffd}</style>
<link rel="shortcut icon" href="//www.coolmathgames.com/themes/custom/coolmath/favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
    var valid_test_environment = false;
      function getCookie(key) {
        var keyValue = document.cookie.match("(^|;) ?" + key + "=([^;]*)(;|$)");
        return keyValue ? keyValue[2] : null;
      }
      function setCookie1(cname, cvalue, hours) {
        var d = new Date();
        d.setTime(d.getTime() + (hours*60*60*1000));
        var expires = 'expires='+ d.toUTCString();
        document.cookie = cname + '=' + cvalue + ';' + expires + ';path=/';
      }
      function getParameterByName(name) {
        var regexS = '[\?&]' + name + '=([^&#]*)';
        var regex = new RegExp(regexS);
        var results = regex.exec(location.href);
        if (results === null) {
          return '';
        }
        return decodeURIComponent(results[1].replace(/\+/g, ' '));
      }
      var cmg_gdpr_check = getCookie('GDPR');

      var cmg_school_whitelisted = getCookie('cmg_schwl');
      if(cmg_school_whitelisted === null && (typeof valid_test_environment !== 'undefined' && valid_test_environment) && typeof myDebugAction === 'function') {
        cmg_school_whitelisted = myDebugAction();
      }

      var freeTrialUser = false;
      var date = new Date();
      var hours = date.getHours();
      var currentMonth = date.getMonth();
      var currentYear = date.getFullYear();
      var day = date.getDay();
      var month_names_short = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
      var currentMonthName = month_names_short[currentMonth];
      var schoolStartHour = 7;
      var schoolEndHour = 15;
      var cmg_no_ads_debug = false;
      //var cmg_no_ads = false;
      if(typeof subscriberLeg === 'undefined' || subscriberLeg === null || subscriberLeg === '') {
        subscriberLeg = 'Default Leg';
        if(typeof myDebugAction === 'function' && (typeof valid_test_environment !== 'undefined' && valid_test_environment) ) {
          myDebugAction();
        }
      }
      if(typeof freeGameLimit === 'undefined' || freeGameLimit === null) {
        freeGameLimit = 0;
      }
      if(typeof cmg_no_ads === 'undefined' && cmg_no_ads_debug && (typeof valid_test_environment !== 'undefined' && valid_test_environment)) {
        cmg_no_ads = true;
      }
      var schoolHours = false;
      var schoolHolidays = ["Jul 4","Sep 3","Nov 22","Nov 23"];
      var schoolHoliday = false;

      //TODO -- Summer vacation dates
      var summerVacationStart = new Date('07/1/'+currentYear);
      var summerVacationEnd = new Date('07/10/'+currentYear);

      var today_month_day = currentMonthName + ' ' + date.getDate();
      if(schoolHolidays.indexOf(today_month_day) !== -1 || (date >= summerVacationStart && date <= summerVacationEnd) || day === 6 || day == 0) {
        schoolHoliday = true;
      }
      var currentMonthName = month_names_short[currentMonth];
      if(!schoolHoliday && hours >= schoolStartHour && hours <= schoolEndHour) {
        schoolHours = true;
      }
      var targetStateUser = false;
      if(typeof targeted_state !== 'undefined' && targeted_state !== null && targeted_state) {
        targetStateUser = true;
      }
      if(typeof watchAdtoUnlockGame == 'undefined') {
        watchAdtoUnlockGame = false;
      }
      var cmg_active_anonymous_user = getCookie('cmg_active_anonymous_user');
      var cmatgame_editor = getCookie('cmg_editor');
      if(typeof cmg_active_anonymous_user !== 'undefined' && cmg_active_anonymous_user !== null) {
        ////console.log('We have an active school hours session');
      }
      //Display Ads to anonymous users only if the user is not from a targeted state or it is school hours.
      //   Do not display ads for targeted state user during non school hours, but free game play is restricted
      if(!schoolHours && targetStateUser && cmg_active_anonymous_user === null && cmatgame_editor === null) {
        freeTrialUser = true;
     }
   </script>
<script type="text/javascript">
     function checkIfFlashIsEnabled() {
          var ie_flash;
          try { ie_flash = (window.ActiveXObject && (new ActiveXObject("ShockwaveFlash.ShockwaveFlash")) !== false) } catch(err) { ie_flash = false; }
          var _flash_installed = ((typeof navigator.plugins != "undefined" && typeof navigator.plugins["Shockwave Flash"] == "object") || ie_flash);
          if(typeof _flash_installed == "undefined" || !_flash_installed) {
            return false;
          } else {
            return true;
          }
       }
       function trackEvent(category, action, label, noninteraction) {
          if(typeof __gaTracker === 'undefined')
            return;
            noninteraction = noninteraction || 0;
           //console.log('Tracked: ' + category + ' ' + action + ' ' + label + ' noninteraction: ' + noninteraction);
          __gaTracker('send', {
              'hitType': 'event',          // Required.
              'eventCategory': category,   // Required.
              'eventAction': action,      // Required.
              'eventLabel': label,
              'eventValue': 0,
              'nonInteraction': noninteraction
          });
      }
      function trackSocial(network,action,target) {
          if(typeof __gaTracker === 'undefined')
            return;
          __gaTracker('send', {
              'hitType': 'social',          // Required.
              'socialNetwork': network,
              'socialAction': action,
              'socialTarget': target
          });
      }
    </script>
<script>/*! jQuery v3.2.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.2.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=Array.isArray(d)))?(e?(e=!1,f=c&&Array.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext;function B(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,D=/^.[^:#\[\.,]*$/;function E(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):D.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(E(this,a||[],!1))},not:function(a){return this.pushStack(E(this,a||[],!0))},is:function(a){return!!E(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var F,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,H=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||F,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:G.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),C.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};H.prototype=r.fn,F=r(d);var I=/^(?:parents|prev(?:Until|All))/,J={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function K(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return K(a,"nextSibling")},prev:function(a){return K(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return B(a,"iframe")?a.contentDocument:(B(a,"template")&&(a=a.content||a),r.merge([],a.childNodes))}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(J[a]||r.uniqueSort(e),I.test(a)&&e.reverse()),this.pushStack(e)}});var L=/[^\x20\t\r\n\f]+/g;function M(a){var b={};return r.each(a.match(L)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?M(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=e||a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function N(a){return a}function O(a){throw a}function P(a,b,c,d){var e;try{a&&r.isFunction(e=a.promise)?e.call(a).done(b).fail(c):a&&r.isFunction(e=a.then)?e.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(a){c.apply(void 0,[a])}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,N,e),g(f,c,O,e)):(f++,j.call(a,g(f,c,N,e),g(f,c,O,e),g(f,c,N,c.notifyWith))):(d!==N&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==O&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:N,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:N)),c[2][3].add(g(0,a,r.isFunction(d)?d:O))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(P(a,g.done(h(c)).resolve,g.reject,!b),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)P(e[c],h(c),g.reject);return g.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Q.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var R=r.Deferred();r.fn.ready=function(a){return R.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||R.resolveWith(d,[r]))}}),r.ready.then=R.then;function S(){d.removeEventListener("DOMContentLoaded",S),
a.removeEventListener("load",S),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",S),a.addEventListener("load",S));var T=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)T(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},U=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function V(){this.expando=r.expando+V.uid++}V.uid=1,V.prototype={cache:function(a){var b=a[this.expando];return b||(b={},U(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){Array.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(L)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var W=new V,X=new V,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function $(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:Y.test(a)?JSON.parse(a):a)}function _(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Z,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=$(c)}catch(e){}X.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return X.hasData(a)||W.hasData(a)},data:function(a,b,c){return X.access(a,b,c)},removeData:function(a,b){X.remove(a,b)},_data:function(a,b,c){return W.access(a,b,c)},_removeData:function(a,b){W.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=X.get(f),1===f.nodeType&&!W.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),_(f,d,e[d])));W.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){X.set(this,a)}):T(this,function(b){var c;if(f&&void 0===b){if(c=X.get(f,a),void 0!==c)return c;if(c=_(f,a),void 0!==c)return c}else this.each(function(){X.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){X.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=W.get(a,b),c&&(!d||Array.isArray(c)?d=W.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return W.get(a,c)||W.access(a,c,{empty:r.Callbacks("once memory").add(function(){W.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=W.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ba=new RegExp("^(?:([+-])=|)("+aa+")([a-z%]*)$","i"),ca=["Top","Right","Bottom","Left"],da=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},ea=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function fa(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&ba.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var ga={};function ha(a){var b,c=a.ownerDocument,d=a.nodeName,e=ga[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),ga[d]=e,e)}function ia(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=W.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&da(d)&&(e[f]=ha(d))):"none"!==c&&(e[f]="none",W.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ia(this,!0)},hide:function(){return ia(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){da(this)?r(this).show():r(this).hide()})}});var ja=/^(?:checkbox|radio)$/i,ka=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,la=/^$|\/(?:java|ecma)script/i,ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ma.optgroup=ma.option,ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead,ma.th=ma.td;function na(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&B(a,b)?r.merge([a],c):c}function oa(a,b){for(var c=0,d=a.length;c<d;c++)W.set(a[c],"globalEval",!b||W.get(b[c],"globalEval"))}var pa=/<|&#?\w+;/;function qa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(pa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ka.exec(f)||["",""])[1].toLowerCase(),i=ma[h]||ma._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=na(l.appendChild(f),"script"),j&&oa(g),c){k=0;while(f=g[k++])la.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var ra=d.documentElement,sa=/^key/,ta=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ua=/^([^.]*)(?:\.(.+)|)/;function va(){return!0}function wa(){return!1}function xa(){try{return d.activeElement}catch(a){}}function ya(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ya(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=wa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(ra,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(L)||[""],j=b.length;while(j--)h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.hasData(a)&&W.get(a);if(q&&(i=q.events)){b=(b||"").match(L)||[""],j=b.length;while(j--)if(h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&W.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(W.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&B(this,"input"))return this.click(),!1},_default:function(a){return B(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?va:wa,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:wa,isPropagationStopped:wa,isImmediatePropagationStopped:wa,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=va,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=va,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=va,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&sa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&ta.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return ya(this,a,b,c,d)},one:function(a,b,c,d){return ya(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=wa),this.each(function(){r.event.remove(this,a,c,b)})}});var za=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Aa=/<script|<style|<link/i,Ba=/checked\s*(?:[^=]|=\s*.checked.)/i,Ca=/^true\/(.*)/,Da=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ea(a,b){return B(a,"table")&&B(11!==b.nodeType?b:b.firstChild,"tr")?r(">tbody",a)[0]||a:a}function Fa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Ga(a){var b=Ca.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ha(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(W.hasData(a)&&(f=W.access(a),g=W.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}X.hasData(a)&&(h=X.access(a),i=r.extend({},h),X.set(b,i))}}function Ia(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ja.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ja(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Ba.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ja(f,b,c,d)});if(m&&(e=qa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(na(e,"script"),Fa),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,na(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Ga),l=0;l<i;l++)j=h[l],la.test(j.type||"")&&!W.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Da,""),k))}return a}function Ka(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(na(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&oa(na(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(za,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=na(h),f=na(a),d=0,e=f.length;d<e;d++)Ia(f[d],g[d]);if(b)if(c)for(f=f||na(a),g=g||na(h),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);else Ha(a,h);return g=na(h,"script"),g.length>0&&oa(g,!i&&na(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(U(c)){if(b=c[W.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[W.expando]=void 0}c[X.expando]&&(c[X.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ka(this,a,!0)},remove:function(a){return Ka(this,a)},text:function(a){return T(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.appendChild(a)}})},prepend:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(na(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return T(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Aa.test(a)&&!ma[(ka.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(na(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ja(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(na(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var La=/^margin/,Ma=new RegExp("^("+aa+")(?!px)[a-z%]+$","i"),Na=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",ra.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,ra.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Oa(a,b,c){var d,e,f,g,h=a.style;return c=c||Na(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&Ma.test(g)&&La.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Pa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Qa=/^(none|table(?!-c[ea]).+)/,Ra=/^--/,Sa={position:"absolute",visibility:"hidden",display:"block"},Ta={letterSpacing:"0",fontWeight:"400"},Ua=["Webkit","Moz","ms"],Va=d.createElement("div").style;function Wa(a){if(a in Va)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ua.length;while(c--)if(a=Ua[c]+b,a in Va)return a}function Xa(a){var b=r.cssProps[a];return b||(b=r.cssProps[a]=Wa(a)||a),b}function Ya(a,b,c){var d=ba.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Za(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ca[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ca[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ca[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ca[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ca[f]+"Width",!0,e)));return g}function $a(a,b,c){var d,e=Na(a),f=Oa(a,b,e),g="border-box"===r.css(a,"boxSizing",!1,e);return Ma.test(f)?f:(d=g&&(o.boxSizingReliable()||f===a.style[b]),"auto"===f&&(f=a["offset"+b[0].toUpperCase()+b.slice(1)]),f=parseFloat(f)||0,f+Za(a,b,c||(g?"border":"content"),d,e)+"px")}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Oa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=Ra.test(b),j=a.style;return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:j[b]:(f=typeof c,"string"===f&&(e=ba.exec(c))&&e[1]&&(c=fa(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(j[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i?j.setProperty(b,c):j[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b),i=Ra.test(b);return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Oa(a,b,d)),"normal"===e&&b in Ta&&(e=Ta[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Qa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?$a(a,b,d):ea(a,Sa,function(){return $a(a,b,d)})},set:function(a,c,d){var e,f=d&&Na(a),g=d&&Za(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=ba.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Ya(a,c,g)}}}),r.cssHooks.marginLeft=Pa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Oa(a,"marginLeft"))||a.getBoundingClientRect().left-ea(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ca[d]+b]=f[d]||f[d-2]||f[0];return e}},La.test(a)||(r.cssHooks[a+b].set=Ya)}),r.fn.extend({css:function(a,b){return T(this,function(a,b,c){var d,e,f={},g=0;if(Array.isArray(b)){for(d=Na(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function _a(a,b,c,d,e){return new _a.prototype.init(a,b,c,d,e)}r.Tween=_a,_a.prototype={constructor:_a,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=_a.propHooks[this.prop];return a&&a.get?a.get(this):_a.propHooks._default.get(this)},run:function(a){var b,c=_a.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):_a.propHooks._default.set(this),this}},_a.prototype.init.prototype=_a.prototype,_a.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},_a.propHooks.scrollTop=_a.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=_a.prototype.init,r.fx.step={};var ab,bb,cb=/^(?:toggle|show|hide)$/,db=/queueHooks$/;function eb(){bb&&(d.hidden===!1&&a.requestAnimationFrame?a.requestAnimationFrame(eb):a.setTimeout(eb,r.fx.interval),r.fx.tick())}function fb(){return a.setTimeout(function(){ab=void 0}),ab=r.now()}function gb(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ca[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function hb(a,b,c){for(var d,e=(kb.tweeners[b]||[]).concat(kb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&da(a),q=W.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],cb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=W.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ia([a],!0),j=a.style.display||j,k=r.css(a,"display"),ia([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=W.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ia([a],!0),m.done(function(){p||ia([a]),W.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=hb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],Array.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=kb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=ab||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(i||h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:ab||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);f<g;f++)if(d=kb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,hb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j}r.Animation=r.extend(kb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return fa(c.elem,a,ba.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(L);for(var c,d=0,e=a.length;d<e;d++)c=a[d],kb.tweeners[c]=kb.tweeners[c]||[],kb.tweeners[c].unshift(b)},prefilters:[ib],prefilter:function(a,b){b?kb.prefilters.unshift(a):kb.prefilters.push(a)}}),r.speed=function(a,b,c){var d=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in r.fx.speeds?d.duration=r.fx.speeds[d.duration]:d.duration=r.fx.speeds._default),null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){r.isFunction(d.old)&&d.old.call(this),d.queue&&r.dequeue(this,d.queue)},d},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(da).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=kb(this,r.extend({},a),f);(e||W.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=W.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&db.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=W.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),r.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(ab=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),ab=void 0},r.fx.timer=function(a){r.timers.push(a),r.fx.start()},r.fx.interval=13,r.fx.start=function(){bb||(bb=!0,eb())},r.fx.stop=function(){bb=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var lb,mb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return T(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?lb:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),
null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&B(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(L);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),lb={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=mb[b]||r.find.attr;mb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=mb[g],mb[g]=e,e=null!=c(a,b,d)?g:null,mb[g]=f),e}});var nb=/^(?:input|select|textarea|button)$/i,ob=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return T(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):nb.test(a.nodeName)||ob.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function pb(a){var b=a.match(L)||[];return b.join(" ")}function qb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,qb(this)))});if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,qb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,qb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(L)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=qb(this),b&&W.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":W.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+pb(qb(c))+" ").indexOf(b)>-1)return!0;return!1}});var rb=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:pb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!B(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var sb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!sb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,sb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(W.get(h,"events")||{})[b.type]&&W.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&U(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!U(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=W.access(d,b);e||d.addEventListener(a,c,!0),W.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=W.access(d,b)-1;e?W.access(d,b,e):(d.removeEventListener(a,c,!0),W.remove(d,b))}}});var tb=a.location,ub=r.now(),vb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(Array.isArray(b))r.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(Array.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!ja.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:Array.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}});var Bb=/%20/g,Cb=/#.*$/,Db=/([?&])_=[^&]*/,Eb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Gb=/^(?:GET|HEAD)$/,Hb=/^\/\//,Ib={},Jb={},Kb="*/".concat("*"),Lb=d.createElement("a");Lb.href=tb.href;function Mb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(L)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nb(a,b,c,d){var e={},f=a===Jb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Ob(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Pb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Qb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:tb.href,type:"GET",isLocal:Fb.test(tb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ob(Ob(a,r.ajaxSettings),b):Ob(r.ajaxSettings,a)},ajaxPrefilter:Mb(Ib),ajaxTransport:Mb(Jb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Eb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||tb.href)+"").replace(Hb,tb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(L)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Lb.protocol+"//"+Lb.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Nb(Ib,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Gb.test(o.type),f=o.url.replace(Cb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Bb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(vb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Db,"$1"),n=(vb.test(f)?"&":"?")+"_="+ub++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Kb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Nb(Jb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Pb(o,y,d)),v=Qb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Rb={0:200,1223:204},Sb=r.ajaxSettings.xhr();o.cors=!!Sb&&"withCredentials"in Sb,o.ajax=Sb=!!Sb,r.ajaxTransport(function(b){var c,d;if(o.cors||Sb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Rb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Tb=[],Ub=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Tb.pop()||r.expando+"_"+ub++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Ub.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ub.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Ub,"$1"+e):b.jsonp!==!1&&(b.url+=(vb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Tb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=C.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=qa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=pb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length},r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),b=f.ownerDocument,c=b.documentElement,e=b.defaultView,{top:d.top+e.pageYOffset-c.clientTop,left:d.left+e.pageXOffset-c.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),B(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||ra})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return T(this,function(a,d,e){var f;return r.isWindow(a)?f=a:9===a.nodeType&&(f=a.defaultView),void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Pa(o.pixelPosition,function(a,c){if(c)return c=Oa(a,b),Ma.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return T(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.holdReady=function(a){a?r.readyWait++:r.ready(!0)},r.isArray=Array.isArray,r.parseJSON=JSON.parse,r.nodeName=B,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Vb=a.jQuery,Wb=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Wb),b&&a.jQuery===r&&(a.jQuery=Vb),r},b||(a.jQuery=a.$=r),r});
</script>
<script type="text/javascript">
      gamePage = true;
          quizPage = false;
      gameType = 'game_html5';
      game_width_size = 640;
      mobile_ga_game_type = 'Mobile'; 
          var ad_refresh_timer_interval = 60000; 
          var ad_refresh_event_interval = 30000;
      </script>
<script type="text/javascript">
		  var hide_preroll_ads = false; 
          var preroll_ads_timer = 15;
		  
          cmatgame_subscriber = getCookie("cmg_sx");
          if(getCookie("cmg_wl") !== null) {
            cmatgame_subscriber = getCookie("cmg_wl");
          }
          //check if school is whitelisted
          if(cmg_school_whitelisted !== null && getCookie("cmg_schwl") !== null) {
            cmg_school_whitelisted = getCookie("cmg_schwl");
            cmatgame_subscriber = getCookie("cmg_schwl");
          } else if(cmg_school_whitelisted === null && typeof cmg_no_ads_debug !== "undefined" && cmg_no_ads_debug) {
           //console.log("KY school hours");
           cmatgame_subscriber = cmg_no_ads_debug;
          }
          if(cmg_gdpr_check !== null) {
            var cmg_gdpr_all_check = getCookie("GDPR_All");  //GDPR_All cookie is set when user selects accept all cookies in the GDPR overlay
            var cmg_gdpr_first_check = getCookie("GDPR_First");
            var cmg_gdpr_reject_check = getCookie("GDPR_Reject");
            if(cmg_gdpr_all_check == null && (cmg_gdpr_first_check != null || cmg_gdpr_reject_check !=null)) {  //user either accepted only first party cookies or rejected all cookies so do not display ads
              cmatgame_subscriber = getCookie("GDPR");
            }
          }
          isRemoveAdSwfJWPLayer = false;
          jQuery(document).ready(function() {
          if(typeof isAdblockerOn === "undefined"){
            if(typeof __gaTracker !== "undefined") {
             __gaTracker("send", {
              "hitType": "event",          // Required.
              "eventCategory": "Page-level-ad-blocker2",   // Required.
              "eventAction": "AdBlockerDetected",      // Required.
              "eventLabel": document.title,
              "eventValue": 1,
              "nonInteraction": 1
              });
            }
          } else {
           if(typeof __gaTracker !== "undefined") {
              __gaTracker("send", {
                "hitType": "event",          // Required.
                "eventCategory": "Page-level-ad-blocker2",   // Required.
                "eventAction": "AdBlockerNotDetected",      // Required.
                "eventLabel": document.title,
                "eventValue": 1,
                "nonInteraction": 1
            });
           }
         }
		 function removeAdSwfJWPLayer() {}
         var isChrome = navigator.userAgent.toLowerCase().indexOf("chrome") > -1;
         if(!jQuery(".adtxt").is(":visible") && isChrome) {
           removeAdSwfJWPLayer();
         }
        });
        </script>
<script type="text/javascript">
           if((typeof cmatgame_subscriber === "undefined" ||
       cmatgame_subscriber === "" ||
         cmatgame_subscriber === null ||
         typeof freeTrialUser === "undefined"  ) && !freeTrialUser) {
        var pwUnits = [];
        var windowPath = window.location.pathname;
           // category landing pages with video
          if( windowPath == "/1-strategy-games" ||
            windowPath == "/1-skill-games" ||
            windowPath == "/1-number-games" ||
            windowPath == "/1-logic-games" ||
            windowPath == "/1-playlists" ||
            windowPath == "/1-daily-games" ||
            windowPath == "/1-complete-game-list" || windowPath == "/profile/leaderboard") {
          var tyche = {
           mode: "tyche",
           config: "//config.playwire.com/1023174/v2/websites/71134/banner.json",
           forcePath: "trendi-video",
           passiveMode: true
            };
						if(document.documentElement.clientWidth <768) { //mobile or table
							pwUnits = [{
								selectorId: "leaderboard-atf",
								type: "leaderboard_atf"
							},
							{
								selectorId: "leaderboard-btf",
								type: "leaderboard_btf"
							},
							{
								selectorId: "mob-med-rect-atf",
								type: "med_rect_atf"
							},
							{
								selectorId: "mob-med-rect-btf",
								type: "med_rect_btf"
							}
							];
						} else if(document.documentElement.clientWidth >=768 && document.documentElement.clientWidth <=1365) {
							pwUnits = [{
								selectorId: "leaderboard-atf",
								type: "leaderboard_atf"
							},
							{
								selectorId: "leaderboard-btf",
								type: "leaderboard_btf"
							},
							{
								selectorId: "med-rect-atf",
								type: "med_rect_atf"
							},
							{
								selectorId: "med-rect-btf",
								type: "med_rect_btf"
							},
							{
								selectorId: "sky-btf",
								type: "sky_btf"
							},
							{
								type: "trendi_video"
							}];
						} else {
							pwUnits = [{
								selectorId: "leaderboard-atf",
								type: "leaderboard_atf"
							},
							{
								selectorId: "leaderboard-btf",
								type: "leaderboard_btf"
							},
							{
								selectorId: "med-rect-atf",
								type: "med_rect_atf"
							},
							{
								selectorId: "med-rect-btf",
								type: "med_rect_btf"
							},
							{
								selectorId: "sky-atf",
								type: "sky_atf"
							},
							{
								selectorId: "sky-btf",
								type: "sky_btf"
							},
							{
								type: "trendi_video"
							}];
						}

        // Homepage, category landing pages without video
           }else if( windowPath == "/" ||
                  windowPath == "/1-playlists" ||
                  windowPath == "/0-jigsaw-puzzles" ||
                  windowPath == "/1-mobile-categories") {
            var tyche = {
             mode: "tyche",
             config: "//config.playwire.com/1023174/v2/websites/71134/banner.json",
             passiveMode: true
            };
						if(document.documentElement.clientWidth <768) { //mobile or table
							pwUnits = [{
	              selectorId: "leaderboard-atf",
	              type: "leaderboard_atf"
	            },
							{
								selectorId: "mob-med-rect-atf",
								type: "med_rect_atf"
							},
							{
								selectorId: "mob-med-rect-btf",
								type: "med_rect_btf"
							},
	            {
	              selectorId: "med-rect-atf",
	              type: "med_rect_btf"
	            },
	            {
	              selectorId: "med-rect-btf4",
	              type: "med_rect_btf"
	            }];
						} else if(document.documentElement.clientWidth >=768 && document.documentElement.clientWidth <=1365) {
							pwUnits = [{
	              selectorId: "leaderboard-atf",
	              type: "leaderboard_atf"
	            },
	            {
	              selectorId: "leaderboard-btf",
	              type: "leaderboard_btf"
	            },
	            {
	              selectorId: "med-rect-atf",
	              type: "med_rect_atf"
	            },
	            {
	              selectorId: "med-rect-btf1",
	              type: "med_rect_btf"
	            },
	            {
	              selectorId: "med-rect-btf2",
	              type: "med_rect_btf"
	            },
	            {
	              selectorId: "med-rect-btf3",
	              type: "med_rect_btf"
	            },
	            {
	              selectorId: "med-rect-btf4",
	              type: "med_rect_btf"
	            }];
						}  else {
							pwUnits = [{
	              selectorId: "leaderboard-atf",
	              type: "leaderboard_atf"
	            },
	            {
	              selectorId: "leaderboard-btf",
	              type: "leaderboard_btf"
	            },
	            {
	              selectorId: "med-rect-atf",
	              type: "med_rect_atf"
	            },
	            {
	              selectorId: "med-rect-btf1",
	              type: "med_rect_btf"
	            },
	            {
	              selectorId: "med-rect-btf2",
	              type: "med_rect_btf"
	            },
	            {
	              selectorId: "med-rect-btf3",
	              type: "med_rect_btf"
	            },
	            {
	              selectorId: "med-rect-btf4",
	              type: "med_rect_btf"
	            },
	            {
	              selectorId: "sky-atf",
	              type: "sky_atf"
	            },
	            {
	              selectorId: "sky-btf",
	              type: "sky_btf"
	            }];
						}


        // all other pages
        } else  {
          var tyche = {
                       mode: "tyche",
                       config: "//config.playwire.com/1023174/v2/websites/71134/banner.json",
                       passiveMode: true
            };
					if(document.documentElement.clientWidth <768) { //mobile or table
						pwUnits = [{
	              selectorId: "leaderboard-atf",
	              type: "leaderboard_atf"
	            },
	            {
	              selectorId: "leaderboard-btf",
	              type: "leaderboard_btf"
	            },
							{
	              selectorId: "med-rect-btf",
	              type: "med_rect_btf"
	            }
	          ];
					} else if(document.documentElement.clientWidth >=768 && document.documentElement.clientWidth <=1365) {  //desktop
						pwUnits = [{
	              selectorId: "leaderboard-atf",
	              type: "leaderboard_atf"
	            },
	            {
	              selectorId: "leaderboard-btf",
	              type: "leaderboard_btf"
	            },
	            {
	              selectorId: "med-rect-atf",
	              type: "med_rect_atf"
	            },
	            {
	              selectorId: "med-rect-btf",
	              type: "med_rect_btf"
	            },
	            {
	              selectorId: "sky-btf",
	              type: "sky_btf"
	            }
	          ];
					} else {  //desktop
						pwUnits = [{
	              selectorId: "leaderboard-atf",
	              type: "leaderboard_atf"
	            },
	            {
	              selectorId: "leaderboard-btf",
	              type: "leaderboard_btf"
	            },
	            {
	              selectorId: "med-rect-atf",
	              type: "med_rect_atf"
	            },
	            {
	              selectorId: "med-rect-btf",
	              type: "med_rect_btf"
	            },
	            {
	              selectorId: "sky-atf",
	              type: "sky_atf"
	            },
	            {
	              selectorId: "sky-btf",
	              type: "sky_btf"
	            }
	          ];
					}

        }
        // function that is called when tyche is ready
        var loadUnits = function () {
          var timeout = 1500; // How long before calling ad units in ms
          if(document.documentElement.getAttribute("rel")=="optimized"){
            timeout = 1000 // for optimzed pages
          }
          setTimeout(function () {
          tyche
          .addUnits(pwUnits)
          .then(function(){
            tyche.displayUnits();
          }).catch( function(e){
            tyche.displayUnits();
            console.log(e);
          });
          }, timeout);
        }
        tyche.onReady = function () { // attach function to tyche onReady
          loadUnits();
        }
        if(document.documentElement.getAttribute("rel")=="optimized"){
          defer(function(){
            var pwScript = document.createElement("script");
            pwScript.type = "text/javascript";
            pwScript.src = "//cdn.intergi.com/hera/tyche.js";
            pwScript.async = true;
            document.getElementsByTagName("head")[0].appendChild(pwScript);
          },2000)
        }else{
          var pwScript = document.createElement("script");
          pwScript.type = "text/javascript";
          pwScript.src = "//cdn.intergi.com/hera/tyche.js";
          pwScript.async = true;
          document.getElementsByTagName("head")[0].appendChild(pwScript);
        }
      }
          </script>
<script type="text/javascript">
          var $elements_with_events = jQuery('.js-track');
          if($elements_with_events.length > 0) {
            $elements_with_events.each(function(){
            var action = typeof jQuery(this).data('action') !== 'undefined' ? jQuery(this).data('action') : 'click';
            jQuery(this).on(action, function(){
            var category, label;
            category = typeof jQuery(this).data('category') !== 'undefined' ? jQuery(this).data('category') : ( jQuery(this).text() || 'Unassigned' );
            label = typeof jQuery(this).data('label') !== 'undefined' ? jQuery(this).data('label') :  ( jQuery(this).attr('class') || 'Unassigned' );
            trackEvent(category,'click',label);
           });
         });
        }
       </script>

<title>Awesome Tanks 2 - Play it now at CoolmathGames.com</title>
	<script type="deferjs">
      function getCookie(key) {
        var keyValue = document.cookie.match("(^|;) ?" + key + "=([^;]*)(;|$)");
        return keyValue ? keyValue[2] : null;
      }
      
      // initialize js variableswith current theme style
      var user_stylePath = encodeURIComponent("");
      var path = "/"+decodeURIComponent(user_stylePath);
      jQuery('#styleswitcher-css').attr('href', path);

      jQuery(document).ready(function() {
      if (typeof getCookie === 'function' && getCookie('cmg_xpp') !== null) {
        jQuery('body').addClass('cmatgame');
        var themepath = decodeURIComponent(getCookie('cmg_xpp'));
        if(themepath != "null" && !themepath.startsWith("/")) {
          themepath = "/"+themepath;
        }
        var path = location.protocol + "//" + location.host + themepath;
        if (jQuery('#styleswitcher-css').length) {
          jQuery('#styleswitcher-css').attr('href', path);
          console.log("Loading userprofile theme... " + path);
        }
      }
      });
  </script>
  <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/11579","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"clientside_validation_jquery":{"validate_all_ajax_forms":2,"force_validate_on_blur":false},"lazy":{"lazysizes":{"lazyClass":"lazyload","loadedClass":"lazyloaded","loadingClass":"lazyloading","preloadClass":"lazypreload","errorClass":"lazyerror","autosizesClass":"lazyautosizes","srcAttr":"data-src","srcsetAttr":"data-srcset","sizesAttr":"data-sizes","minSize":40,"customMedia":[],"init":true,"expFactor":1.5,"hFac":0.8000000000000000444089209850062616169452667236328125,"loadMode":2,"loadHidden":true,"ricTimeout":0,"throttleDelay":125,"plugins":[]},"placeholderSrc":"","preferNative":false},"cmatgame":{"gamePlaylistCount":2473,"flash_emulation":"3","html5embed":{"width":"640","height":"600","game":{"u":"sites\/default\/files\/games\/awesome_tanks_2_3_0.zip"}},"swfembed":"","isSubscriptionActive":false},"user":{"uid":0,"permissionsHash":"10d61b137c4f914b655d7628788e0db136577254c17eb9fe2565b5c80c7820df"}}</script>

<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js" type="deferjs"></script>
<![endif]-->
<script src="/sites/default/files/js/js_sNEAmR0AhkHJnHdC7Wdf0CJIgemx92Ag-8eL_f1xXBM.js" type="deferjs"></script>

  </head>
  <body class="path-_-awesome-tanks-2 node-type-game node-11579 game-full-screen html5 mobile-playable wide-game-item not-active-user">
       	

  <script type="deferjs">
    jQuery(document).ready(function() {
    cmg_gdpr_check = getCookie("GDPR");
    cmg_gdpr_all_check = getCookie("GDPR_All");
    cmg_gdpr_first_check = getCookie("GDPR_First");
    cmg_gdpr_reject_check = getCookie("GDPR_Reject");
    if(cmg_gdpr_check != null && cmg_gdpr_check=="true") {
       if(cmg_gdpr_all_check == null && cmg_gdpr_first_check == null && cmg_gdpr_reject_check == null) { // user is visiting our site firsttime from one of GDPR countries
        jQuery("#yourCookieChoices").show();
        //remove_ads_from_free_game_pages();
        //jQuery('.content-wrapper').css('pointer-events','default');
       } else if(cmg_gdpr_first_check !== null  || cmg_gdpr_reject_check !== null ){ //user selected first party cookies or rejected all cookies so we need to remove ads
        remove_ads_from_free_game_pages();
        var footerlink = '<li class="menu__item is-leaf last leaf"><a href="/cookie-choices" class="menu__link">Your Cookie Choices</a></li>';
        jQuery(".footer-menu-column-0 .footer-menu").append(footerlink);
        //jQuery('.content-wrapper').css('pointer-events','default');
       } else if(cmg_gdpr_all_check !== null) { //user accepted all cookies
        var footerlink = '<li class="menu__item is-leaf last leaf"><a href="/cookie-choices" class="menu__link">Your Cookie Choices</a></li>';
        jQuery(".footer-menu-column-0 .footer-menu").append(footerlink);
       }
     }
    });
  </script>
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
    


<script>
  // initialize js variableswith current theme style
  var user_stylePath = encodeURIComponent("");
  var path = "/" + decodeURIComponent(user_stylePath);
  jQuery('#styleswitcher-css').attr('href', path);

  // jQuery(document).ready(function() {
  if (typeof getCookie === 'function' && getCookie('cmg_xpp') !== null) {
    jQuery('body').addClass('cmatgame');
    var themepath = decodeURIComponent(getCookie('cmg_xpp'));
    if(themepath != "null" && !themepath.startsWith("/")) {
      themepath = "/"+themepath;
    }
    var path = location.protocol + "//" + location.host + themepath;
    if (jQuery('#styleswitcher-css').length) {
      jQuery('#styleswitcher-css').attr('href', path);
      console.log("Loading userprofile theme... " + path);
    }
  }
  // });
</script>

<div class="page global-wrapper">
  <main class="mt-0">
    
<header class="page__header d-none d-lg-block">
  <div class="branding container">
    <div class="row">
              <div class="other-sites-wrapper col-lg-3 d-none d-lg-block pl-0">
          <div class="panel-pane pane-block pane-bean-new-go-ad-free">
            <a id="cmg-goadfree" onclick="goadfree_event_handler()" href="#">Go Ad Free!</a>
          </div>
          <div
            class="pane-bean-cm-top">
                                    <div class="flash-msg"><a href="/coolmath-games-and-flash">
			      <div class="flash-img"><img src="/themes/custom/coolmath/assets/images/cmatgameimages/flash-image.png" alt="flash-image.png"></div><div class="flash-content"><h2>The future of Flash games <br> on Coolmath Games</h2></div></div>
          </div>
        </div>
        <div class="logo-container col-7 col-lg-6 ">
          <a href="/" title="Home" rel="home" class="site-branding__logo">
                        <img src="/themes/custom/coolmath/logo.svg" alt="Home" class="logo svg"/>
          </a>
                  </div>
        <div class="right-header-block col-2 col-lg-3 pr-0">
          
<!-- user-avatar-form.twig -->
<div class="welcome-box">
      <a href="/signup" class="btn free-account" title="Get a Free Account">
      <span class="avatar"></span>
      <span class="badge"></span>
      <span class="new">NEW</span>
      <span class="getuserprofile">Get your user profile</span>
      <span class="earn">FREE | Earn XP | Level Up</span>
    </a>
  </li>
  <div class="login-link my-2 my-lg-0">
    <p>or
    <a href="/login" title="Log in" class="login">Log In</a></p>
  </div>
</div>
        </div>
          </div>
  </div>
  <nav class="navbar navbar-expand-lg justify-content-between">
    <div class="container">
      <div class="navbar-container">
          
  <div class="block block--coolmath-desktopheadermenu">

  
    

      
			<div class="pane-menu-menu-desktop-header-menu">
			<div class="pane-content">
																		<ul class="menu">
																																														<li  class="menu_strategy menu__link">
																																																							<a href="/1-strategy-games" class="menu_strategy menu__link" data-drupal-link-system-path="taxonomy/term/6">Strategy</a>
																													</li>
																																																<li  class="menu_skill menu__link">
																																																							<a href="/1-skill-games" class="menu_skill menu__link" data-drupal-link-system-path="taxonomy/term/46">Skill</a>
																													</li>
																																																<li  class="menu_numbers menu__link">
																																																							<a href="/1-number-games" class="menu_numbers menu__link" data-drupal-link-system-path="taxonomy/term/151">Numbers</a>
																													</li>
																																																<li  class="menu_logic menu__link">
																																																							<a href="/1-logic-games" class="menu_logic menu__link" data-drupal-link-system-path="taxonomy/term/91">Logic</a>
																													</li>
																																																<li  class="menu_trivia menu__link">
																																																							<a href="/trivia" class="menu_trivia menu__link" data-drupal-link-system-path="trivia">Trivia</a>
																													</li>
																							<li class="menu__item is-expanded expanded">
																													<span  class="menu_more menu__link nolink">More</span>
																																															<div class="expandable-wrapper">
										<ul class="menu">
																																<li class="nested">
																																									<a href="/1-classic-games" class="menu_classic menu__link" data-drupal-link-system-path="taxonomy/term/211">Classic</a>
																													</li>
																																		<li class="nested">
																																									<a href="/1-word-games" class="menu_word games menu__link" data-drupal-link-system-path="taxonomy/term/1059">Word Games</a>
																													</li>
																																		<li class="nested">
																																									<a href="/0-jigsaw-puzzles" class="menu_puzzles menu__link" data-drupal-link-system-path="0-jigsaw-puzzles">Puzzles</a>
																													</li>
																																		<li class="nested">
																																									<a href="/1-memory-games" class="menu_memory menu__link" data-drupal-link-system-path="taxonomy/term/181">Memory</a>
																													</li>
																																		<li class="nested">
																																									<a href="/1-geography-games" class="menu_geography menu__link" data-drupal-link-system-path="taxonomy/term/206">Geography</a>
																													</li>
																																		<li class="nested">
																																									<a href="/1-science-games" class="menu_science menu__link" data-drupal-link-system-path="taxonomy/term/626">Science</a>
																													</li>
															</ul>
														</div>
																		
																			</li>
																																																<li  class="menu_playlists menu__link">
																																																							<a href="/1-playlists" class="menu_playlists menu__link" data-drupal-link-system-path="1-playlists">Playlists</a>
																													</li>
																																																<li  class="menu_random menu__link random-redirect">
																																																							<a href="/random" class="menu_random menu__link random-redirect" data-drupal-link-system-path="random">Random!</a>
																													</li>
																																																<li  class="menu_unlocked menu__link">
																																																							<a href="/1-daily-games" class="menu_unlocked menu__link" data-drupal-link-system-path="taxonomy/term/1056">Daily Games</a>
																													</li>
																																															<li  class="menu_allgames menu__link">
																																																						<a href="/1-complete-game-list" class="menu_allgames menu__link" data-drupal-link-system-path="1-complete-game-list">All Games A-Z</a>
																													</li>
															</ul>
																						</div>
				</div>
					

  
  </div>


        <div class="panel-pane pane-block pane-cmatgame-search-search-game">
          <div id="cmatgame-search-block-form">
  <div class="form-item">
    <label for="edit-search-bar">Search bar </label>
    <input placeholder="Search by game name" type="text" id="edit-search-bar" name="search_bar" value="" size="60" maxlength="128" class="form-text menu-search-bar" style="display: none; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;">
    <div id="close-search-box" style="display: none;">X</div>
  </div>
  <div class="search-results-container" style="display: none;"></div>
</div>

        </div>
      </div>
    </div>
  </nav>
</header>
    
<header class="page__header page__header_mobile d-lg-none">
  <div class="container-fluid">
    <div class="row">
      <div class="logo-container-mobile col-12 text-center">
        <a href="/" title="Home" rel="home" class="site-branding__logo">
          <img src="/themes/custom/coolmath/logo.svg" alt="Home" class="logo svg"/>
        </a>
      </div>
    </div>
  </div>
  <nav class="navbar">
    <div class="navbar-inner">
      <button class="navbar-toggler" type="button">
        <span class="bar first"></span>
        <span class="bar second"></span>
        <span class="bar third"></span>
      </button>
      <div class="menu-overlay"></div>
      <div class="navbar-container">
        <div class="mobile-menu-items">
          <div class="mi-title"><strong>Search</strong></div>
          <div class="cmatgame-search-game pane-cmatgame-search-search-game"><div id="cmatgame-search-block-form">
  <div class="form-item">
    <label for="edit-search-bar">Search bar </label>
    <input placeholder="Search by game name" type="text" id="edit-search-bar" name="search_bar" value="" size="60" maxlength="128" class="form-text menu-search-bar" style="display: none; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;">
    <div id="close-search-box" style="display: none;">X</div>
  </div>
  <div class="search-results-container" style="display: none;"></div>
</div>
</div>
          <div class="mi-title"><strong>Browse</strong></div>
            
  <div class="block block--coolmath-desktopheadermenu">

  
    

      
			<div class="pane-menu-menu-desktop-header-menu">
			<div class="pane-content">
																		<ul class="menu">
																																														<li  class="menu_strategy menu__link">
																																																							<a href="/1-strategy-games" class="menu_strategy menu__link" data-drupal-link-system-path="taxonomy/term/6">Strategy</a>
																													</li>
																																																<li  class="menu_skill menu__link">
																																																							<a href="/1-skill-games" class="menu_skill menu__link" data-drupal-link-system-path="taxonomy/term/46">Skill</a>
																													</li>
																																																<li  class="menu_numbers menu__link">
																																																							<a href="/1-number-games" class="menu_numbers menu__link" data-drupal-link-system-path="taxonomy/term/151">Numbers</a>
																													</li>
																																																<li  class="menu_logic menu__link">
																																																							<a href="/1-logic-games" class="menu_logic menu__link" data-drupal-link-system-path="taxonomy/term/91">Logic</a>
																													</li>
																																																<li  class="menu_trivia menu__link">
																																																							<a href="/trivia" class="menu_trivia menu__link" data-drupal-link-system-path="trivia">Trivia</a>
																													</li>
																							<li class="menu__item is-expanded expanded">
																													<span  class="menu_more menu__link nolink">More</span>
																																															<div class="expandable-wrapper">
										<ul class="menu">
																																<li class="nested">
																																									<a href="/1-classic-games" class="menu_classic menu__link" data-drupal-link-system-path="taxonomy/term/211">Classic</a>
																													</li>
																																		<li class="nested">
																																									<a href="/1-word-games" class="menu_word games menu__link" data-drupal-link-system-path="taxonomy/term/1059">Word Games</a>
																													</li>
																																		<li class="nested">
																																									<a href="/0-jigsaw-puzzles" class="menu_puzzles menu__link" data-drupal-link-system-path="0-jigsaw-puzzles">Puzzles</a>
																													</li>
																																		<li class="nested">
																																									<a href="/1-memory-games" class="menu_memory menu__link" data-drupal-link-system-path="taxonomy/term/181">Memory</a>
																													</li>
																																		<li class="nested">
																																									<a href="/1-geography-games" class="menu_geography menu__link" data-drupal-link-system-path="taxonomy/term/206">Geography</a>
																													</li>
																																		<li class="nested">
																																									<a href="/1-science-games" class="menu_science menu__link" data-drupal-link-system-path="taxonomy/term/626">Science</a>
																													</li>
															</ul>
														</div>
																		
																			</li>
																																																<li  class="menu_playlists menu__link">
																																																							<a href="/1-playlists" class="menu_playlists menu__link" data-drupal-link-system-path="1-playlists">Playlists</a>
																													</li>
																																																<li  class="menu_random menu__link random-redirect">
																																																							<a href="/random" class="menu_random menu__link random-redirect" data-drupal-link-system-path="random">Random!</a>
																													</li>
																																																<li  class="menu_unlocked menu__link">
																																																							<a href="/1-daily-games" class="menu_unlocked menu__link" data-drupal-link-system-path="taxonomy/term/1056">Daily Games</a>
																													</li>
																																															<li  class="menu_allgames menu__link">
																																																						<a href="/1-complete-game-list" class="menu_allgames menu__link" data-drupal-link-system-path="1-complete-game-list">All Games A-Z</a>
																													</li>
															</ul>
																						</div>
				</div>
					

  
  </div>


          
<!-- user-avatar-form.twig -->
<div class="welcome-box">
      <a href="/signup" class="btn free-account" title="Get a Free Account">
      <span class="avatar"></span>
      <span class="badge"></span>
      <span class="new">NEW</span>
      <span class="getuserprofile">Get your user profile</span>
      <span class="earn">FREE | Earn XP | Level Up</span>
    </a>
  </li>
  <div class="login-link my-2 my-lg-0">
    <p>or
    <a href="/login" title="Log in" class="login">Log In</a></p>
  </div>
</div>
        </div>
      </div>
    </div>
  </nav>
</header>
    <div class="page__content">
      <div class="game-container">
        <div class="row leaderboard">
          <div class="col-12">
              

<div id="block-coolmath-adstop-otherpage-728x90" class="block block-cmatgame-core block-adstop-otherpage-728x90">
  
    
      <div class="view-content">
      <div class="item-list"><div class="panel-pane pane-block pane-cmatgame-advertisement-cm-g-otherpages-728-90"><div class="ad-wrapper"><!-- 728 x 90 ATF Desktop --><div id="leaderboard-atf"></div></div></div></div>
    </div>
  </div>

          </div>
        </div>

        <div class="row pb-3 mr-lg-5">
                      <div class="col-md-2 d-none d-xl-block">
                

<div id="block-coolmath-adsleft-otherpage-160x600" class="block block-cmatgame-core block-adsleft-otherpage-160x600">
  
    
      <div class="view-content">
      <div class="panel-pane pane-block pane-cmatgame-advertisement-cm-g-otherpages-160x600-left">
	        <div class="ad-wrapper">
	          <div id="left-ad" class="ad-holder">
	           <!-- will be appended later if window/game size requirements are met
	           <div id="sky-atf"></div> -->
	          </div>
	          <script type="text/javascript">
	           if(getCookie("cmg_sx") == null &&  getCookie("cmg_wl")== null && jQuery(window).width() >= 1366) {
               console.log("Page is resized so displayed 160x600 left ad");
	             var leftAd = document.getElementById("left-ad");
	             var sky_left = document.createElement("div");
	             sky_left.setAttribute("id", "sky-atf");
	             leftAd.appendChild(sky_left);
	           }
	          </script>
	          </div>
	        </div>
    </div>
  </div>

            </div>
          
          <div class="main-col col-sm-12 col-md-12 col-lg-9 col-xl-7 pl-lg-0">
            <a id="main-content" tabindex="-1"></a>
            <div class="inside">
                <div data-drupal-messages-fallback class="hidden"></div>


<div id="block-coolmath-breadcrumbs" class="block block-system block-system-breadcrumb-block">
  
    
      <div class="view-content">
      
    </div>
  </div>

<div id="block-coolmath-page-title" class="block block-core block-page-title-block">
  
    
      <div class="view-content">
      <div class="cmatgame-title">

  <h1 class="pane-title"><span><span>Awesome Tanks 2</span>
</span></h1>

</div>


<div id='thumbsup'>
  <span id='thumbsuplike_message'></span>
  <span class='thumbsupmessage'></span>
  <div class="like-container-entity-node" id="like-container-11579">
    <div class="like inline float-left">
      <input type='hidden' id='thumbsvote' value="false"/>
      <a href="javascript:;" nodeid="11579" class="enable entity-node"><img src="/modules/custom/cmatgame_core/images/thumbs_up_white.png" alt="Like" title="Like" class="entity-node"></a>
    </div>
  </div>
  <div class="dislike-container-entity-node" id="dislike-container-11579">
    <div class="dislike inline float-left">
      <input type='hidden' id='thumbsvote' value="false"/>
      <a href="javascript:;" nodeid="11579" class="enable entity-node"><img src="/modules/custom/cmatgame_core/images/thumbs_down_white.png" alt="Dislike" title="Dislike" class="entity-node"></a>
    </div>
  </div>
  <input type="hidden" id="gamerating" name="gamerating" value=""/>
  <input type="hidden" id="percentlike_vote" name="percentlike_vote" value="yes"/>
</div>


    </div>
  </div>

<div id="block-coolmath-coolmath-system-main" class="block block-system block-system-main-block">
  
    
      <div class="view-content">
      <div class="d-none d-lg-block game-on_device game-on-desktop">
  


<div class="like-block mb-4">
  

<div id="block-coolmath-carouselingamedetailpage" class="block block-cmatgame-core block-gamedetailcarousel">
  
    
      <div class="view-content">
      <div class="pane-game-details-carousel-game-detail"><div class='view-display-id-carousel_game_detail'><div class='view-header'><p>You'll Also Like...</p></div><div class='view-content'><div><div class='bx-wrapper jcarousel-wrapper'><div class='jcarousel'><ul><li class="bxslider-views-slideshow-main-frame-row "><div class="game-item "><div class="game-link-wrapper"><a href="/0-awesome-tanks"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Awesome Tanks Game" title="Awesome Tanks" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/awesome-tanks-game-logo.png?itok=-idGSLyb" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Awesome Tanks</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row mobile-hidden"><div class="game-item mobile-not-playable"><div class="game-link-wrapper"><a href="/0-table-tanks"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Table Tanks Game" title="Table Tanks" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/table-tanks-game-logo.png?itok=qgVbOe2f" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Table Tanks</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row mobile-hidden"><div class="game-item mobile-not-playable"><div class="game-link-wrapper"><a href="/0-just-one-boss"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Just One Boss Game" title="Just One Boss" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/just-one-boss-game-logo-2.png?itok=nyjp5bYq" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Just One Boss</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row "><div class="game-item "><div class="game-link-wrapper"><a href="/0-retro-space-blaster"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Retro Space Blaster Game" title="Retro Space Blaster" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/Retro-Space-Blaster-Game-Logo-2.png?itok=K7q0Q6zN" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Retro Space Blaster</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row mobile-hidden"><div class="game-item mobile-not-playable"><div class="game-link-wrapper"><a href="/0-defly-io"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Defly.io Game" title="Defly.io" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/defly-io-game-logo-NEW.png?itok=SDytchei" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Defly.io</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row mobile-hidden"><div class="game-item mobile-not-playable"><div class="game-link-wrapper"><a href="/0-copter-royale"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Copter Royale Game" title="Copter Royale" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/copter-royale-game-logo_0.png?itok=mBoa4U1x" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Copter Royale</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row mobile-hidden"><div class="game-item mobile-not-playable"><div class="game-link-wrapper"><a href="/0-awesome-planes"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Awesome Planes Game" title="Awesome Planes" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/awesome-planes-logo-2.jpg?itok=tsWoumU3" class="lazyload img-fluid" typeof="foaf:Image" />

<span class="icon-gamethumbnail-carousel"> </span></div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Awesome Planes</span></h5></a></div></div></li></ul></div><div class="bx-controls-direction1"><a href="#" class="jcarousel-control-prev">&lsaquo;</a><a href="#" class="jcarousel-control-next">&rsaquo;</a></div></div></div></div></div></div>
    </div>
  </div>
</div>

<div class="btn-container">
  <a href="/playlists/0-awesome-tanks-2" class="btn btn-primary btn-md mb-2 playlist-count">This Game is in Playlists</a>
</div>

<div id="block-system-main" class="mt-3">
    <script type="deferjs">
    (function ($, Drupal) {
      $(document).ready(function () {
        var gamePlaylistCount = drupalSettings.cmatgame.gamePlaylistCount;
        if (gamePlaylistCount > 0) {
          var playlistMessage = "";
          if (gamePlaylistCount > 0 && gamePlaylistCount<= 9) {
              playlistMessage = "VIEW PLAYLISTS WITH THIS GAME";
            } else if(gamePlaylistCount >= 10 && gamePlaylistCount < 100) {
            gamePlaylistCount = parseInt(gamePlaylistCount / 10) * 10;
            playlistMessage = "THIS GAME IS IN " + gamePlaylistCount + "+ PLAYLISTS";
          } else if (gamePlaylistCount >= 100 && gamePlaylistCount < 9999) {
            gamePlaylistCount = parseInt(gamePlaylistCount / 100) * 100;
            playlistMessage = "THIS GAME IS IN " + gamePlaylistCount + "+ PLAYLISTS";
          } else {
            playlistMessage = "THIS GAME IS IN 9999+ PLAYLISTS";
          } $(".playlist-count").html(playlistMessage);
          $(".playlist-count").prependTo('.d-lg-block .block-gamedetailcarousel');
          $(".playlist-count").show();
        }
      });
    })(jQuery, Drupal);
  </script>


  <article data-history-node-id="11579" role="article" about="/0-awesome-tanks-2" class="node node-game node--view-mode-full clearfix game-w-summary game-field-wrapper">

        <header>
      
            
    </header>

    <script type="deferjs">
      if (typeof signupPromoTop !== 'undefined' && signupPromoTop !== '') {
        signupContainerTop = '<div class="signup-container-top"><a href="/subscribe/2efa4bc4" onclick="preroll_signup_top_handler();">' + signupPromoTop + '</a></div>';
      } else {
        signupPromoTop = '';
        signupContainerTop = '<div class="signup-container-top"><a href="/subscribe/2efa4bc4" onclick="preroll_signup_top_handler();">' + signupPromoTop + '</a></div>';
      }
      if (typeof signupPromoBottom !== 'undefined' && signupPromoBottom !== '') {
        signupContainerBottom = '<div class="signup-container-bottom"><a href="/subscribe/2efa4bc4" onclick="preroll_signup_bottom_handler();"> ' + signupPromoBottom + '</a></div>';
      } else {
        signupPromoBottom = '';
        signupContainerBottom = '<div class="signup-container-bottom"><a href="/subscribe/2efa4bc4" onclick="preroll_signup_bottom_handler();"> ' + signupPromoBottom + '</a></div>';
      }
      function preroll_signup_top_handler() {
        trackEvent('Preroll Signup Clicked', 'Preroll Signup Top', document.title);
      }
      function preroll_signup_bottom_handler() {
        trackEvent('Preroll Signup Clicked', 'Preroll Signup Bottom', document.title);
      }
    </script>
    <div class="node__content clearfix field-item">
      <div class="no-flash-overlay-mobile" style="display:none;">
        <p>
          <strong>Sorry... this game is not playable in your browser.</strong>
        </p>
      </div>
      <div id="no-flash-overlay" style="display:none;">
        <a href="http://www.adobe.com/go/getflashplayer" target="_blank"><img src="/themes/custom/coolmath/assets/images/enable-flash-chrome.png" alt="click to enable flash"/></a>
      </div>
      <div id="does-not-support-ie" style="display:none;"></div>
            <div id="newFlashDetectHtml" style="display:none;">
        <div class="row">
                      <div class="col-md-12 flashIntroTxt">
              <img src="/sites/default/files/awesome-tanks-2.png" border="0" class="flashNotFoundImgStyle">
            </div>
                  </div>
        <div class="">
          <div class=" flashIntroTxtImg">
            <img src="/themes/custom/coolmath/assets/images/cmatgameimages/flash-page-message-with-robot.png">
          </div>
        </div>

        <div class="row">

          <div class="related-game-block">
            

<div class="block block-cmatgame-playlist block-related-game-block">
  
    
      <div class="view-content">
      <div class="views-element-container flashContainerList">
    <div class="common-title">
        <span class="title-with-button"><h2 style='font-family: "CCSmash";font-size: 1.125rem;line-height: 1.375rem;text-transform: none;'>In the meantime, related games you might love:</h2></span>
    </div>
                <div class="view-content">
                    <div>
                        <div class="pane-content js-view-dom-id-7140079e46f72a7c8e6b9ad1e953026a1b15c1da48b375d7a4ff28c1c4bdc940">
                            <div class="views-row">
							                                <div class="game-item">
                                    <div class="game-link-wrapper">
                                        <a href="/0-awesome-tanks">
                                            <div class="field-image">
                                                <img src="https://www.coolmathgames.com/sites/default/files/game_thumbnail/awesome-tanks-game-logo.png" width="83" height="50" alt="Awesome Tanks"
                                                    title="Awesome Tanks" data-src=" https://www.coolmathgames.com/sites/default/files/game_thumbnail/awesome-tanks-game-logo.png"
                                                    class="imgList lazyloaded" typeof="foaf:Image">
                                            </div>
                                            <h3 class="game-title">Awesome Tanks</h3>
                                        </a>
                                    </div>
                                    <div class="game-item-description">
                                        <div class="field-body">
                                            <p>Hop in your tank and destroy the enemy base.</p>
                                        </div>
                                    </div>
                                </div>
     						                                <div class="game-item">
                                    <div class="game-link-wrapper">
                                        <a href="/0-table-tanks">
                                            <div class="field-image">
                                                <img src="https://www.coolmathgames.com/sites/default/files/game_thumbnail/table-tanks-game-logo.png" width="83" height="50" alt="Table Tanks"
                                                    title="Table Tanks" data-src=" https://www.coolmathgames.com/sites/default/files/game_thumbnail/table-tanks-game-logo.png"
                                                    class="imgList lazyloaded" typeof="foaf:Image">
                                            </div>
                                            <h3 class="game-title">Table Tanks</h3>
                                        </a>
                                    </div>
                                    <div class="game-item-description">
                                        <div class="field-body">
                                            <p>Upgrade your tank and take out your foes!</p>
                                        </div>
                                    </div>
                                </div>
     						                                <div class="game-item">
                                    <div class="game-link-wrapper">
                                        <a href="/0-just-one-boss">
                                            <div class="field-image">
                                                <img src="https://www.coolmathgames.com/sites/default/files/game_thumbnail/just-one-boss-game-logo-2.png" width="83" height="50" alt="Just One Boss"
                                                    title="Just One Boss" data-src=" https://www.coolmathgames.com/sites/default/files/game_thumbnail/just-one-boss-game-logo-2.png"
                                                    class="imgList lazyloaded" typeof="foaf:Image">
                                            </div>
                                            <h3 class="game-title">Just One Boss</h3>
                                        </a>
                                    </div>
                                    <div class="game-item-description">
                                        <div class="field-body">
                                            <p>Pull out your best tricks to stop the evil magician!</p>
                                        </div>
                                    </div>
                                </div>
     						                                <div class="game-item">
                                    <div class="game-link-wrapper">
                                        <a href="/0-retro-space-blaster">
                                            <div class="field-image">
                                                <img src="https://www.coolmathgames.com/sites/default/files/game_thumbnail/Retro-Space-Blaster-Game-Logo-2.png" width="83" height="50" alt="Retro Space Blaster"
                                                    title="Retro Space Blaster" data-src=" https://www.coolmathgames.com/sites/default/files/game_thumbnail/Retro-Space-Blaster-Game-Logo-2.png"
                                                    class="imgList lazyloaded" typeof="foaf:Image">
                                            </div>
                                            <h3 class="game-title">Retro Space Blaster</h3>
                                        </a>
                                    </div>
                                    <div class="game-item-description">
                                        <div class="field-body">
                                            <p>Blast asteroids and save the galaxy!</p>
                                        </div>
                                    </div>
                                </div>
     						</div></div></div></div></div>

    </div>
  </div>
          </div>

        </div>
      </div>
           <div id="big-screen-container" class="big-screen-container-class" style="display:none;">
        <div class="big-screen-head row">
          <div class="bs-head-logo col-md-2"><img src="/themes/custom/coolmath/assets/images/full-screen/cool-math-logo.png"></div>
          <div class="bs-head-txt col-md-9">Premium Gaming Without Distractions</div>
          <div class=" col-md-1">
            <div class="bs-close-button">
              <a href="#" class="bs-close-btn" onclick="bigscreen_overlay_promo_close_handler(); return false;">X</a>
            </div>
          </div>
        </div>
        <div class="mid-big-section-head ">
          <div class="row">
            <div class="col-md-12">
              <h1>Get Premium Big Screen Mode</h1>
            </div>
            <div class="col-md-12">
              <h2>Unlimited Big Screen Gaming & More!</h2>
            </div>
          </div>
          <div class="img-container-big-screen row">
            <div class="image-bs-sample col-md-5">
              <h2>From This
              </h2><img src="/themes/custom/coolmath/assets/images/full-screen/BigScreen-small.png">
            </div>
            <div class="image-bs-sample col-md-7">
              <h2>
                To this
              </h2>
              <img src="/themes/custom/coolmath/assets/images/full-screen/bigscreen-big.png">
            </div>
          </div>
          <div>
            <div class="bs-footer-link">
              <a href="/premium-access/6ea95de6" onclick="bigscreen_overlay_promo_signup_handler(); return false;"><img src="/themes/custom/coolmath/assets/images/full-screen/get-premium-btn.png"></a>
            </div>
            <div class="bs-learn-more">
              <a href="/premium-benefits" onclick="bigscreen_overlay_promo_more_handler(); return false;" class="bs-lrn-more">Learn More</a>
            </div>
            <div class="bs-no-thks">
              <a href="" class="bs-lnk-lrn-more" onclick="bigscreen_overlay_promo_close_handler(); return false;">No, Thanks. I just want to play games right now.</a>
            </div>
          </div>
        </div>
      </div>
      <div id="id-adfree-marketing-campaign" class="adfree-marketing-campaign" style="display:none;">
        <div class="big-screen-head row">
          <div class="bs-head-logo col-md-2"><img src="/themes/custom/coolmath/assets/images/full-screen/cool-math-logo.png"></div>
          <div class="bs-head-txt col-md-8">Get Premium Distraction Free Gaming!</div>
          <div class="col-md-2">
            <div class="bs-close-button">
              <a href="#" class="bs-close-btn" onclick="adfree_marketing_overlay_promo_close_handler(); return false;">X</a>
            </div>
          </div>
        </div>
        <div class="mid-big-section-head  adfree-mid-section-marketing-campaign">
          <div class="mkt-container-co row">
            <div class="mkt-container1 col-md-5"><img src="/themes/custom/coolmath/assets/images/full-screen/ad-free-icon-up.png"></div>
            <div class="ad-free-txt  col-md-5">
              <span class="sup-bold">AD-FREE:</span>
              The best gaming experience!</div>
          </div>
          <div class="img-container-big-screen row">
            <div class="" style="padding-left:10px;">
              <div class="image-bs-sample">
                <img src="/themes/custom/coolmath/assets/images/full-screen/no-waiting-up.png">
              </div>
              <div class="no-waiting-txt">
                <div class="sup-bold-2">No Waiting:</div>
                Skip Immediately to the Game</div>
            </div>
            <div class="" style="padding-left:10px;">
              <div class="image-bs-sample">
                <img src="/themes/custom/coolmath/assets/images/full-screen/reduce-leg-up.png">
              </div>
              <div class="no-waiting-txt">
                <div class="sup-bold-2">Reduced Lag:</div>
                Faster, Cleaner Gaming</div>
            </div>
          </div>
          <div class="better-focus-container ">
            <div class="image-better-focus">
              <img src="/themes/custom/coolmath/assets/images/full-screen/better-focus-up.png">
            </div>
            <div class="no-waiting-txt  ">
              <div class="sup-bold-2">Better Focus:</div>Stay Game-Concentrated</div>
            <div class="all-excl-txt">And More Exclusive features for Premium Members!</div>
          </div>
          <div class="marketing-cmpn-footer">
            <div class="bs-footer-link">
              <a href="/premium-access/b2df5a33" target="_blank" onclick="adfree_marketing_overlay_promo_signup_handler(); return false;"><img src="/themes/custom/coolmath/assets/images/full-screen/get-premium-btn.png"></a>
            </div>
            <div class="bs-learn-more">
              <a href="/premium-benefits" target="_blank" onclick="adfree_marketing_overlay_promo_more_handler(); return false;" class="bs-lrn-more">Learn More</a>
            </div>
            <div class="bs-no-thks">
              <a href="" class="bs-lnk-lrn-more" onclick="adfree_marketing_overlay_promo_close_handler(); return false;">No, Thanks. I just want to play games right now.</a>
            </div>
          </div>
        </div>
      </div>
      <div id="playlist-marketing-container-id"></div>
                <div class="field-game" id="swfgamewrapper">
  	    	<iframe1 class="square no-select" width="640px" height="600px" src="https://www.coolmathgames.com/0-awesome-tanks-2/play" frameborder="0" id="html5game" scrolling="no" sandbox="allow-scripts allow-same-origin allow-modals"></iframe1>
      </div>

      
            
      <script type="deferjs">
  if (typeof cmg_is_mobile_device === 'function') {
    cmg_is_mobile_device();
  }
  var browser = (function () {
    var test = function (regexp) {
      return regexp.test(window.navigator.userAgent)
    }
    switch (true) {
      case test(/edg/i):
        return "Microsoft Edge";
      case test(/trident/i):
        return "Microsoft Internet Explorer";
      case test(/firefox|fxios/i):
        return "Mozilla Firefox";
      case test(/opr\//i):
        return "Opera";
      case test(/ucbrowser/i):
        return "UC Browser";
      case test(/samsungbrowser/i):
        return "Samsung Browser";
      case test(/chrome|chromium|crios/i):
        return "Google Chrome";
      case test(/safari/i):
        return "Apple Safari";
      default:
        return "Other";
    }
  })();


  // user profile related variables
  gameId = 11579;
  is_level_based = 1;
  level_offset = 0;
  xp_per_level = 40;
  doesnotie = 0;
  flashemulation = '';
  iframed_game_url = '';

  var userprofile_level_xp = "100,200,250,300,350,400,450,500,550,625,700,775,850,925,1000,1075,1150,1225,1300,1375,1450,1525,1600,1700,1800,1900,2000,2100,2200,2300,2400,2500,2600,2700,2800,2900,3000,3100,3200,3300,3400,3500,3600,3700,3800,3900,4000,4100,4200,4300,4400,4500,4600,4700,4800,4900,5000,5100,5200,5300,5400,5500,5600,5700,5800,5900,6000,6100,6200,6300,6400,6500,6600,6700,6800,6900,7000,7100,7200,7300,7400,7500,7600,7700,7800,7900,8000,8100,8200,8300,8400,8500,8600,8700,8800,8900,9000,9100,9200,10000";
  userprofile_level_xpData = userprofile_level_xp.split(",");
  incrementedTotalPlays = false;
  lastKeyBoardorMouseActivityTime = Date.now();
  workerstatusvar = "notstartedinit";
  supportCMGDefault = false; // disable a/b test
  supportCMGABTest = false;
  supportCMGABTestImage1 = false;
  supportCMGABTestImage2 = false;
  supportCMGABTestImage3 = false;

  // define all the marketing promo values to false if they are not defined before
  if (typeof watchAdtoUnlockGame == "undefined") {
    watchAdtoUnlockGame = false;
  }
  if (typeof displayAdblockOverlay == "undefined") {
    displayAdblockOverlay = false;
  }
  if (typeof supportCMG == "undefined") {
    supportCMG = false;
  }
  if (typeof premiumAvatarGame == "undefined") {
    premiumAvatarGame = false;
  }

  gamesPlayed = parseInt(localStorage.getItem('gamesPlayed') || 0);

    cmg_stop_truex_promo = "";
  truex_overlay_preroll_ad_display = false;
	 // Big-screen promo games clss-2990
  //bs_promo_pages    = /(0-(2048|awesome-planes|awesome-tanks-2|battlecoast|snake|big-ice-tower-tiny-square|big-tower-tiny-square|bloons-tower-defense-3|bob-the-robber|burrito-bison|cannon-basketball-4|choppy-orc|circloo|circloo-2|dolphin-olympics|dolphin-olympics-2|duck-life|duck-life-2-world-champion|duck-life-3-evolution|duck-life-4|duck-life-treasure-hunt|emperors-on-ice|idle-breakout|just-one-boss|learn-to-fly|learn-to-fly-2|learn-to-fly-3|learn-to-fly-idle|mainlands-wars|overlords-new-mansion|papas-freezeria|parking-fury-2|pre-civilization-bronze-age|raft-wars|raft-wars-2|retro-ping-pong|run-3|start-powerless|stickman-swing|the-sun-for-the-vampire|the-sun-for-the-vampire-2|the-sun-for-the-vampire-3|table-tanks|tail-of-the-dragon|the-final-earth|the-final-earth-2|tic-tac-toe|tower-of-destiny|toy-defense|truck-loader-4|wiz|wonderputt|worlds-hardest-game|worlds-hardest-game-2|worlds-hardest-game-3|8-ball-pool|archery-world-tour|awesome-tanks|mainlands-wars|big-tower-tiny-square|handulum|raft-wars|run-3|the-sun-for-the-vampire|tower-of-destiny|wonderputt|papas-freezeria|raft-wars))/;
  bs_promo_pages    = /999999/;
   // ad free marketing pages clss-3014
  // adfreeMktPages    = /(0-(4-in-a-row|60-second-burger-run|apple-worm|arcade-golf-neon|basketball-master-2|black-and-white|bloxorz|bob-the-robber-to-go|candy-jump|cannon-basketball-2|cannon-basketball-3|chef-slash|chrome|color-pipes|crazy-eights|crazy-taxi-m122|cube-flip|cubeform|diggy|divide|emerald-and-amber|factory-balls-forever|get-to-the-other-side|gravity-control|hefty-shaman|idle-dice|interstate-drifter-1999|jellybots|jumpless-world|jumpnull|kirigami|lemonade-stand|loop-path|mow-it|ovo|papa-louie-2-when-burgers-attack|papa-louie-3-when-sundaes-attack|parking-fury-3|parkingmania|parking-mania-2|push-your-luck|puzzle-ball|rabbit-samurai|rabbit-samurai|red-ball-4|roller-baller|stranded-isle|sudoku|super-ordinary-joe|there-is-no-game|word-search|crazy-taxi-m12))/;
  adfreeMktPages = /999999/;
   // avatarMktPages
   // CmgDefault not having games clss-3020
  //cmgDefaultGameUrl = /(0-(fireboy|4-in-a-row|60-second-burger-run|apple-worm|arcade-golf-neon|basketball-master-2|black-and-white|bloxorz|bob-the-robber-to-go|candy-jump|cannon-basketball|cannon-basketball-2|cannon-basketball-3|chef-slash|chrome|color-pipes|crazy-eights|crazy-taxi-m12|cube-flip|cubeform|diggy|divide|emerald-and-amber|factory-balls-forever|get-to-the-other-side|gravity-control|hefty-shaman|idle-dice|interstate-drifter-1999|jellybots|jumpless-world|jumpnull|kirigami|lemonade-stand|loop-path|mow-it|ovo|papa-louie-2-when-burgers-attack|papa-louie-3-when-sundaes-attack|parking-fury|parking-fury-3|parkingmania|parking-mania-2|push-your-luck|puzzle-ball|rabbit-samurai|red-ball-4|roller-baller|stranded-isle|sudoku|super-ordinary-joe|there-is-no-game|word-search|abandoned-2-the-forest|abandoned|axiel|bounce-floor|crossy-cat|cupcake-monster|encase|factory-balls|factory-balls-2|factory-balls-3|factory-balls-4|into-space|into-space-2|jelly-escape|marble-trap|mini-golf-adventures|mini-metro-london|off-the-line|pathfinder|red|red-ball-4-volume-2|red-ball-4-volume-3|slime-laboratory|slime-laboratory-2|stranded-isle|solitaire|spot-the-difference|the-ranger-with-the-magic-bow|three-goblets|zombie-launcher|wipo|super-rhino-turtle|round-runner|space-is-key|space-is-key-2|space-is-key-ultimate-challenge|zombie-launcher-2|2048|8-ball-pool|archery-world-tour|awesome-planes|awesome-tanks|awesome-tanks-2|basket-and-ball|battlecoast|big-ice-tower-tiny-square|big-tower-tiny-square|block-the-pig|bloons-tower-defense-3|bob-the-robber|burrito-bison|cannon-basketball-4|catch-the-candy|catch-the-candy-halloween|catch-the-candy-mech|catch-the-candy-xmas|checkers|chess|choppy-orc|circloo|circloo-2|clicker-heroes|copter-royale|darts|dolphin-olympics|dolphin-olympics-2|duck-life|duck-life-2-world-champion|duck-life-3-evolution|duck-life-4|duck-life-treasure-hunt|emperors-on-ice|handulum|hangman|idle-breakout|iq-ball|jacksmith|jelly-truck|johnny-upgrade|just-one-boss|learn-to-fly|learn-to-fly-2|learn-to-fly-3|learn-to-fly-idle|mainlands-wars|moto-x3m|moto-x3m-pool-party|moto-x3m-spooky-land|overlords-new-mansion|papas-bakeria|papas-burgeria|papas-cheeseria|papas-cupcakeria|papas-donuteria|papas-freezeria|papas-hot-doggeria|papas-pancakeria|papas-pastaria|papas-pizzeria|papas-scooperia|papas-sushiria|papas-taco-mia|papas-wingeria|parking-fury-2|poptropica|powerline-io|pre-civilization-bronze-age|raft-wars|raft-wars-2|retro-ping-pong|run|run-2|run-3|snake|start-powerless|stickman-swing|sticky-ninja-academy|sticky-ninja-missions|the-sun-for-the-vampire|the-sun-for-the-vampire-2|the-sun-for-the-vampire-3|table-tanks|tail-of-the-dragon|tarzan-ball|the-final-earth|the-final-earth-2|tic-tac-toe|tower-of-destiny|toy-defense|truck-loader-4|wiz|wonderputt|worlds-hardest-game|worlds-hardest-game-2|worlds-hardest-game-3|space-is-key-christmas|defly-io))/;
  cmgDefaultGameUrl = /999999/;
   // premiumAvtar not having games clss-3021
  //premiumAvatarMktPages = /(0-(basket-and-ball|block-the-pig|catch-the-candy|catch-the-candy-halloween|catch-the-candy-mech|catch-the-candy-xmas|clicker-heroes|copter-royale|defly-io|hangman|iq-ball|jacksmith|jelly-truck|johnny-upgrade|moto-x3m-winter|moto-x3m-spooky-land|moto-x3m-pool-party|redline-pong|poptropica|powerline-io|run|run-2|sticky-ninja-academy|sticky-ninja-missions|tarzan-ball|darts|papas-burgeria|papas-bakeria|papas-cheeseria|papas-cupcakeria|papas-donuteria|papas-hot-doggeria|papas-pancakeria|papas-pastaria|papas-pizzeria|papas-scooperia|papas-sushiria|papas-taco-mia|papas-wingeria))/;
  premiumAvatarMktPages = /999999/;
  premiumAvatarGame = false;//disabling to fix timer count down issue

   // playlist marketing promo games clss-3007
  //playlistMktPages = /(0-(abandoned-2-the-forest|abandoned|axiel|bounce-floor|crossy-cat|cupcake-monster|encase|factory-balls|factory-balls-2|factory-balls-3|factory-balls-4|into-space|into-space-2|jelly-escape|marble-trap|mini-golf-adventures|mini-metro-london|off-the-line|pathfinder|red|red-ball-4-volume-2|red-ball-4-volume-3|slime-laboratory|slime-laboratory-2|stranded-isle|solitaire|spot-the-difference|the-ranger-with-the-magic-bow|three-goblets|zombie-launcher|wipo|super-rhino-turtle|round-runner|space-is-key|space-is-key-2|space-is-key-ultimate-challenge|zombie-launcher-2))/;
  playlistMktPages = /999999/;

  function doesnotIEMessage() {
    jQuery('.field-game').css('display', 'none');
    jQuery('.no-flash').css('display', 'none');
    jQuery('#afg_container').css('display', 'none').html('<div></div>');
    jQuery('#does-not-support-ie').show();
    jQuery('#afg_preloader').css('display', 'none').html('<div></div>');;
    jQuery('#does-not-support-ie').html('<img src="/themes/custom/cmatgame/images/does-not-support-ie.png" alt="does not support ie"/> ');
    jQuery('.load-wrap').hide();
    jQuery('#continue-container').hide();
    jQuery('#afg_preloader').hide();
  }

  function getGameName() {
    var url = window.location.href;
    var lastPart = url.split("/").pop();
    return lastPart;
  }

  function setIframeHeight(iframe) {
    if (iframe) {
    /*
		var iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;
		if (iframeWin.document.body) {
			iframe.height = iframeWin.document.documentElement.scrollHeight || iframeWin.document.body.scrollHeight;
		}
	*/
      var gamename = getGameName();
      if (gamename == "0-chess") {
        iframe.height = "620px";
      }
    }
  };

    jQuery(function(){
    setIframeHeight(document.getElementById('html5game'));
  });

  if (isUserValidFreeUserOrSubscriber()) {
    var userprofileData = JSON.parse(localStorage.getItem("userprofile"));
    var levelofcompletedgame = 1;
    for (var i = 0; i < userprofileData.mygameslist.length; i++) {
      if (userprofileData.mygameslist[i].id == gameId) {
        var levelbasedCompletedStatus = userprofileData.mygameslist[i].timebasedcompletedSt;
        var levelofcompletedgame = userprofileData.mygameslist[i].level;
      }
    }
  }

  /** For big screen promo with list of games to appear
  */
  function checkBigScreenPromoURL() {
    bigScreenPromoGame = false;
    if (bs_promo_pages.test(location.pathname)) {
      bigScreenPromoGame = true;
      jQuery(document).ready(function () {
        jQuery(".pane-bean-new-go-ad-free").html('<a class="bigscreenanchor" onclick="bigscreen_overlay_promo_signup_handler(\'Get big screen mode - header button clicked\'); return false;" href="/premium-access/6ea95de6">Go Big Screen!</a>');
        jQuery('#right-rail-big-screen-promo').show();
      });
    }
  }
  checkBigScreenPromoURL();

  /**
  ** check for marketing game promo for game page. check for specific games to make this popover appear.
  */
  function checkAdfreeMktCmpgnURL() {
    AdfreeMktCmpGame = false;
    if ((typeof adfreeMktPages != 'undefined' && adfreeMktPages.test(location.pathname)) || (location.pathname == "/0-cannon-basketball") || (location.pathname == "/0-parking-fury")) {
      AdfreeMktCmpGame = true;
      jQuery(document).ready(function () {
        jQuery(".pane-bean-new-go-ad-free").html('<a class="adfree-marketing-logo" onclick="adfree_marketing_overlay_promo_signup_handler(\'Get Adfree Marketing screen mode - header button clicked\'); return false;" href="/premium-access/b2df5a33">Go Big Screen!</a>');
        jQuery('#right-rail-adfree-marketing-promo').show();
      });
    }
  }
  checkAdfreeMktCmpgnURL();

  /**
  ** check for playlist marketing game promo for game page. check for specific games to make this popover appear.
  */
  function checkPlaylistMktCmpgnURL() {
    playListMktCmpGame = false;
    if (playlistMktPages.test(location.pathname)) {
      playListMktCmpGame = true;
      jQuery(document).ready(function () {
       // jQuery(".pane-bean-new-go-ad-free").html('<a class="playlist-marketing-logo" onclick="playlist_marketing_overlay_promo_signup_handler(\'Get Playlist Marketing screen mode - header button clicked\'); return false;" href="/premium-access/b2df5a33">Go Big Screen!</a>');
        jQuery('.playlist-right-side-promo').show();
      });
    }
  }
  checkPlaylistMktCmpgnURL();


  function checkPremiumAvatarURL() {
    premiumAvatarGame = false;
    if(typeof premiumAvatarMktPages != 'undefined' && premiumAvatarMktPages.test(location.pathname) || (location.pathname == "/0-moto-x3m-winter") || ( location.pathname  == '/0-redline-pong')) {
      if (gamesPlayed == 2 || gamesPlayed == 8) {
        schoolHours = false;//display all the time
        premiumAvatarGame = true;
      }
      // setting the default premiumAvatarGameABTest
      if (getCookie('cmg_fx') !== null && getCookie('cmg_sx') == null) {
        var planToSubscription = '67361110';
      } else {
        var planToSubscription = '553bdf22';
      }
      // logged in free user
      jQuery(document).ready(function () {
        jQuery(".pane-bean-new-go-ad-free").html('<a class="premium-avatar-marketing-logo" onclick="premium_avatar_overlay_promo_signup_handler(\'Premium Avatar screen mode - header button clicked\'); return false;" href="/premium-access/' + planToSubscription + '">Go Big Screen!</a>');
        jQuery('.premium-avatar-right-side-promo').show();
      });
      var gamePageBarPromo = 'GET THE AVATAR: GO PREMIUM';
      gamePageBarPromoActionText = 'Get Premium ';
      var pathpromobarsubscriptionform = '/subscribe/' + planToSubscription;
      jQuery('.gamepage-signup-promo').hide();
      jQuery('#block-cmatgame-cmatgame-system-main').append('<div class="premium-avatar-promo marketing-gamepage-signup-promo"><h2>' + gamePageBarPromo + '</h2> <div class="link-in-title-block-promo"><a href="/subscribe/' + planToSubscription + '" id="gamepage_bs_signup_promo_handler" onclick="premium_avatar_overlay_promo_signup_handler(\'Premium Avatar screen mode - promo bar clicked\'); return false;">' + gamePageBarPromoActionText + '</a></div></div>');

    }
  }

  function checkPlayedGames() {
    // this is for supportCMG A/B Test
    gamesPlayed = parseInt(localStorage.getItem('gamesPlayed') || 0);
    sessionGamesPlayed = parseInt(sessionStorage.getItem('sessionGamesPlayed') || 0);
    //localStorage.setItem('gamesPlayed', ++ gamesPlayed)
    localStorage.setItem('gamesPlayed', 0);
    sessionStorage.setItem('sessionGamesPlayed', ++ sessionGamesPlayed);
    checkPremiumAvatarURL();
  }

  /**
  ** For CMG default screen promo with list of games to appear
  */
  function checkCMGDefaultExceptionURL() {
    supportCMG = false;
    if(!cmgDefaultGameUrl.test(location.pathname) && (typeof gamesPlayed != "undefined" && (gamesPlayed == 2 || gamesPlayed == 8))) {
      supportCMG = true;
      schoolHours = false; // display all the time

      if (getCookie('cmg_fx') !== null && getCookie('cmg_sx') == null) {
        var planToSubscription = 'd61242ac';
      } else {
        var planToSubscription = '0735a1f2';
      } // logged in free user
      jQuery(document).ready(function () {
        jQuery(".pane-bean-new-go-ad-free").html('<a class="cmgDefaultException-logo" onclick="cmgDefault_overlay_promo_signup_handler(\'Get CMGDefault screen mode - header button clicked\'); return false;" href="/premium-access/' + planToSubscription + '">Go Big Screen!</a>');
        jQuery('.cmgdefault-right-side-promo').show();
      });
      var gamePageBarPromo = 'GO PREMIUM: THE BEST GAMING EXPERIENCE';
      gamePageBarPromoActionText = 'Get Premium ';
      var pathpromobarsubscriptionform = '/subscribe/' + planToSubscription;
      jQuery('.gamepage-signup-promo').hide();
      jQuery('#block-cmatgame-cmatgame-system-main').append('<div class="marketing-gamepage-signup-promo"><h2>' + gamePageBarPromo + '</h2> <div class="link-in-title-block-promo"><a href="/subscribe/' + planToSubscription + '" id="gamepage_bs_signup_promo_handler" onclick="cmgDefault_overlay_promo_signup_handler(\'Get CMGDefault screen mode - promo bar clicked\'); return false;">' + gamePageBarPromoActionText + '</a></div></div>');
    }
  }

  checkPlayedGames();
  settimebased();
  checkCMGDefaultExceptionURL();


  if (isUserValidFreeUserOrSubscriber()) {
    var userprofileData = JSON.parse(localStorage.getItem("userprofile"));
    var levelofcompletedgame = 1;
    for (var i = 0; i < userprofileData.mygameslist.length; i++) {
      if (userprofileData.mygameslist[i].id == gameId) {
        var levelbasedCompletedStatus = userprofileData.mygameslist[i].timebasedcompletedSt;
        var levelofcompletedgame = userprofileData.mygameslist[i].level;
      }

    }
  }

  var workerstatusvar = "no";
  var count = 0;
  var myInterval;
  // Active

  function chkIdleOnpage() {
    var userActivityTime = Date.now();
    // check if user activity is not there more than 55 min 60000*55 = 3300000
    if (userActivityTime - lastKeyBoardorMouseActivityTime > 3300000) {
      if (typeof(w) != "undefined") {

        workerstatusvar = "terminated";
        w.terminate();
        w = undefined;
      }
    } else { // May be keyboard is active start new worker
      settimebased();
    }
  }
  // Inactive
  if (!is_level_based) { // check idle time in every 5 min 60000 * 5 = 300000
    idleOnPageCheckTimer = setInterval(function () {
      chkIdleOnpage()
    }, 300000);
  }

  function settimebased() {
    if (!is_level_based) {
      jQuery(document).ready(function () {
        if (isUserValidFreeUserOrSubscriber()) {
          window.addEventListener("beforeunload", function (e) {
            saveUserProgress();
          });
          if (typeof(Worker) !== "undefined") {
            if (typeof(w) == "undefined") {

              w = new Worker("/modules/custom/cmatgame_userprofile/js/userprogress_workers.js");
              w.onmessage = function (event) {
                var userActivityTime = Date.now();
                // save userprofile object back to localstorage
                // if(userActivityTime - lastKeyBoardorMouseActivityTime <= 60000) {
                userprofile = event.data;
                localStorage.setItem("userprofile", JSON.stringify(userprofile));

                // display game progressbar on game pages
                if (typeof gameId != "undefined") {
                  display_game_progressbar(gameId);
                }
                // display user progressbar
                display_user_profile_progressbar();
                //adding save userprogress back to api server
                saveUserProgress();
                // }
              };

              var userprofile = localStorage.getItem("userprofile");
              setTimeout(function () {
                var userprofile = localStorage.getItem("userprofile");
                var currentGameData = searchGamesById(gameId);
                if (typeof w != 'undefined') {
                  w.postMessage([
                    gameId,
                    xp_per_level,
                    userprofile,
                    currentGameData,
                    cmatgameSearchGames,
                    userprofile_level_xpData
                  ]);
                }
              }, 60000);
              // setInterval(function () { updateMyGamesTimeSpent1(gameId) }, 60000);
            }
          }
        }
      });
    }
  }

  // Stop timer
  function stopTimer() {
    count = 0;

    if (workerstatusvar == "terminated") {
      settimebased();
      workerstatusvar = "started";
    }
    window.clearInterval(myInterval);
  }

  function checkKeyboardOrMouseActivity() {
    lastKeyBoardorMouseActivityTime = Date.now();
    if (!is_level_based) {
      if (typeof isRemoveAdSwfJWPLayer === "undefined" || !isRemoveAdSwfJWPLayer) { // html 5 game
      } else {
        stopTimer();
      }
    }
  }
  function startTimer() {
  // for flash based game check idle time in every 5 min 60000 * 5 = 300000
    myInterval = window.setInterval(timerHandler, 30000);
  }
  function timerHandler() {
    count++;
    // count of flash based game will  for 55 rounds
    if (count == 55) {
      workerstatusvar = "terminated";
      if (typeof w !== 'undefined') {
        w.terminate();
        w = undefined;
      }
    }
  }
  document.addEventListener("mousemove", checkKeyboardOrMouseActivity, false);
  document.addEventListener('keydown', checkKeyboardOrMouseActivity, false);

  document.addEventListener("keypress", checkKeyboardOrMouseActivity, false);
  document.addEventListener("touchmove", checkKeyboardOrMouseActivity, false);
  if(!is_level_based) {
    if (typeof isRemoveAdSwfJWPLayer === "undefined" || !isRemoveAdSwfJWPLayer) {
      // html 5 game
      document.addEventListener("visibilitychange", function() {

        if(document.visibilityState == 'hidden') {
          //startTimer();
          if(typeof idleOnPageCheckTimer !== 'undefined') {

            clearInterval(idleOnPageCheckTimer);
          }
          /***  need to remove below workerstatusvar variable. position changed . it should be under if codition
            where worker undefine
          ***/
          // workerstatusvar = "terminated";

          if (typeof w !== 'undefined') {
            w.terminate();
            w = undefined;
            workerstatusvar = "terminated";
          }

        } else if (document.visibilityState == 'visible') {
          stopTimer(); // starts worker.
        }
      }, false);
    } else {
      // flash game
      window.addEventListener('focus', stopTimer);
      window.addEventListener('blur', startTimer);
      // Check browser minimize
      document.addEventListener("visibilitychange", function () {

        if (document.visibilityState == 'hidden') {
          startTimer();
        } else if (document.visibilityState == 'visible') {

          stopTimer();
        }
      }, false);

      startTimer();

    }
  } // end of !is_level_based

  function putSharedObjectsInDB(syncData) {
    flashStorage = syncData;
    saveUserProgress();
  }
  isRemoveAdSwfJWPLayer = false;
  // Testing Overlay for Watch Ad To Unlock Games
  // var watchAdtoUnlockGame = true;
  // var schoolHours = false;
  // console.log('supportCMG is true');
  window.addEventListener("message", receiveMessage, false);
  function receiveMessage(event) { // console.log("message received2 from " + event.origin + " : " + event.data);
    var valid_domain_msg = false;
    if (/coolmathgames\.com|coolmathgames\.local|coolmathgames/.test(event.origin)) {
      valid_domain_msg = true;
    }
    if (event.data == "continue-without-big-screen" && jQuery('#big-screen-overlay').length && valid_domain_msg) { // close overlay
      if (jQuery('#big-screen-overlay').length) {
        jQuery('#big-screen-overlay').hide();
        if (jQuery('#big-screen-truex-overlay').length) {
          jQuery('#big-screen-truex-overlay').hide();
        }
        cmg_bigscreen_trackevent('closesignup', cmg_bsft);
      }
    } else if (event.data == "continue-with-login-big-screen" && jQuery('#big-screen-overlay').length && valid_domain_msg) { // console.log("BIGSCREEN message received2 from " + event.origin + " : " + event.data);
      cmg_bigscreen_trackevent('closesignup2login', cmg_bsft);
      jQuery('#big-screen-overlay').hide();
      if (jQuery('#big-screen-truex-overlay').length) {
        jQuery('#big-screen-truex-overlay').hide();
      }
      window.location = "/login?destination=" + window.location.pathname;
    } else if (event.data == "continue-premium-big-screen" && (jQuery('#big-screen-overlay').length || jQuery('#pr-profile-screen-overlay').length) && valid_domain_msg) { // console.log("BIGSCREEN message received2 from " + event.origin + " : " + event.data);
      cmg_bigscreen_trackevent('playgame after signup', cmg_bsft);
      jQuery('#big-screen-overlay').hide();
      jQuery('#pr-profile-screen-overlay').hide();
      if (jQuery('#big-screen-truex-overlay').length) {
        jQuery('#big-screen-truex-overlay').hide();
      }
      window.location.reload();
    } else if (event.data == "big-screen-profile-customize" && (jQuery('#big-screen-overlay').length || jQuery('#pr-profile-screen-overlay').length) && valid_domain_msg) {
      // console.log("BIGSCREEN message received2 from " + event.origin + " : " + event.data);
      cmg_bigscreen_trackevent('profile customize after signup', cmg_bsft);
      jQuery('#big-screen-overlay').hide();
      jQuery('#pr-profile-screen-overlay').hide();
      if (jQuery('#big-screen-truex-overlay').length) {
        jQuery('#big-screen-truex-overlay').hide();
      }
      if (getCookie('cmg_fx') !== null) {
        window.location = '/profile/' + getCookie('cmg_fx').toLowerCase() + '/edit';
      }
    } else if (event.data == "big-screen-premium-benefits" && jQuery('#big-screen-overlay').length && valid_domain_msg) {
      // console.log("BIGSCREEN message received2 from " + event.origin + " : " + event.data);
      cmg_bigscreen_trackevent('see premium benefits after signup', cmg_bsft);
      jQuery('#big-screen-overlay').hide();
      if (jQuery('#big-screen-truex-overlay').length) {
        jQuery('#big-screen-truex-overlay').hide();
      }
      if (getCookie('cmg_fx') !== null) {
        window.location = '/premium-benefits';
      }
    } else if (event.data == "keypress-from-game") {
      checkKeyboardOrMouseActivity();
    } else if (event.origin === "https://copterroyale.coolmathgames.com" || event.origin === "https://copterroyale2.coolmathgames.com" || event.origin === "https://powerline.coolmathgames.com") {

      var eventObject = JSON.parse(event.data);
      if (eventObject.eventType == "gameEvent") {
        cmgGameEvent(eventObject.key, eventObject.value);
      } else if (eventObject.eventType == "dataEvent") {
        cmgDataEvent(eventObject.key, eventObject.value);
      }
    } else if (event.origin == 'https://www.coolmath-games.com' || event.origin != 'https://d8-dev.coolmathgames.com') {
      if (event.data.eventType == "syncEventPut") {
        syncData = event.data.syncJSON;
        putSharedObjectsInDB(syncData);
      }
      if (event.data.eventType == "syncEventGet") {
        if (typeof flashStorageFromDB != "undefined") { // restoring flash shared objects from DB
          for (var i = 0; i < flashStorageFromDB.length; i++) {
            flashStorageFromDB[i].swfdata = decodeURI(flashStorageFromDB[i].swfdata);
          }
          document.getElementById('swfgame').contentWindow.postMessage({
            'eventType': 'syncEventGet',
            'soData': flashStorageFromDB
          }, '*');
        } else {
          document.getElementById('swfgame').contentWindow.postMessage({
            'eventType': 'gamePlay'
          }, '*');
        }
      }
    } else {
      return;
    }
  }
  // var signupPromoTop = 'Join to Play Ad-Free'; var signupPromoBottom = 'Join to Skip All Ads';
  if (typeof signupPromoTop !== 'undefined' && signupPromoTop !== '') {
    signupContainerTop = '<div class="signup-container-top"><a href="/premium-access/2efa4bc4" id="preroll_signup_top_handler">' + signupPromoTop + '</a></div>';
  } else {
    signupPromoTop = '';
    signupContainerTop = '<div class="signup-container-top"><a href="/premium-access/2efa4bc4" id="preroll_signup_top_handler">' + signupPromoTop + '</a></div>';
  }
  if (typeof signupPromoBottom !== 'undefined' && signupPromoBottom !== '') {
    signupContainerBottom = '<div class="signup-container-bottom"><a href="/premium-access/2efa4bc4" id="preroll_signup_bottom_handler"> ' + signupPromoBottom + '</a></div>';
  } else {
    signupPromoBottom = '';
    signupContainerBottom = '<div class="signup-container-bottom"><a href="/premium-access/2efa4bc4" id="preroll_signup_bottom_handler"> ' + signupPromoBottom + '</a></div>';
  }
  function preroll_signup_top_handler() {
    trackEvent('Preroll Signup Clicked', 'Preroll Signup Top', document.title);
  }
  function preroll_signup_bottom_handler() {
    trackEvent('Preroll Signup Clicked', 'Preroll Signup Bottom', document.title);
  }

  // we will define this varialbe signUpURLABTest in experiments.js
  var cmg_upg_days_limit = 180;
  var user_dst = window.location.pathname;
  user_dst = user_dst.replace("\/", "");
  if (window.location.host !== 'cmatgame.local') {
    if (typeof signUpURL === 'undefined' || signUpURL === '') {
      signUpURL = '/premium-access/ b2df5a33?origin=' + user_dst;
    } else {
      signUpURL = signUpURL + '?origin=' + user_dst;
    }
  } else if (typeof signUpURLABTest === "undefined" || signUpURLABTest === null) {
    signUpURL = 'https://' + window.location.hostname + '/premium-access/ b2df5a33?origin=' + user_dst;
  } else {
    signUpURL = signUpURLABTest;
  }
  function subscription_promo_handler() {
    if (typeof freeTrialUser !== 'undefined' && freeTrialUser) {
      trackEvent('Premium Subscription ' + subscriberLeg, 'Subscription overlay clicked', userPlayedGames);
      trackGoalVirtualPV('/virtual/subscription-overlay-click');
    }
    return;
  }
  function subscriptionSignUpUrl() {
    var user_played_games = '';
    var zeroFreeGamesLeftUsers = localStorage.getItem("zeroFreeGamesLeftUsers");
    if (typeof userPlayedGames !== 'undefined' && userPlayedGames) {
      user_played_games = "upg=" + userPlayedGames;
    } else {
      user_played_games = "upg=0";
    }
    if (zeroFreeGamesLeftUsers !== null && user_played_games !== '') {
      user_played_games = user_played_games + '&zfg=' + zeroFreeGamesLeftUsers;
    } else if (zeroFreeGamesLeftUsers !== null) {
      user_played_games = 'zfg=' + zeroFreeGamesLeftUsers;
    }
    if (typeof signUpURL !== 'undefined' && signUpURL !== null && signUpURL.indexOf('upg') === -1) {
      if (signUpURL.indexOf('?random_true') > -1) {
        signUpURL = signUpURL.replace('?random_true', '');
      }
      if (signUpURL.indexOf('?') > -1) {
        signUpURL = signUpURL + '&' + user_played_games;
      } else {
        signUpURL = signUpURL + '?' + user_played_games;
      }
    }
  }

  function updateMyGamesTimeSpent(gameId) {
    var userActivityTime = Date.now();
    // if(userActivityTime - lastKeyBoardorMouseActivityTime <= 60000) { //user is active on page for last 60 seconds, so we can add this as his XP
    if (currentTimeInterval >= 2) {
      currentTimeInterval = 0;
      if (isUserValidFreeUserOrSubscriber()) { // save MyGames only for subscribers
        saveMyGames(gameId, 0, 1);
        currentTime = userActivityTime;
      }
    } else {
      currentTimeInterval = currentTimeInterval + 1;
      saveUserProgress(); // save user progress every 20 sec
    }
    // }
  }

  function updateMyGamesTimeSpent1(gameId) {
    if (isUserValidFreeUserOrSubscriber()) { // save MyGames only for subscribers
      if (userActivityTime - lastKeyBoardorMouseActivityTime <= 60000) {
        saveMyGames(gameId, 0, 1);
      }
    }
  }

  function updateMyGamesTimeSpentLevelBase(gameId, level) {
    if (isUserValidFreeUserOrSubscriber()) { // save MyGames only for subscribers

      saveMyGames(gameId, 1, level);
    }
  }
  /*
   if(!is_level_based) {
    var objGameNode = {};
    objGameNode[gameId] = "yes";
    localStorage.setItem("runoncestarted", JSON.stringify(objGameNode));
        setInterval(function () { updateMyGamesTimeSpent1(gameId) }, 60000);
      }
   */
  if (is_level_based) {
    var userActivityTime = Date.now();
    // for level based game. check if user activity is not there more than 55 min 60000*55 = 3300000
    if (userActivityTime - lastKeyBoardorMouseActivityTime <= 3300000) {
      var objGameNode = {};
      objGameNode[gameId] = "no";
      var localgamestrate = "storagelocal-" + gameId + "-storagelocal";
      localStorage.setItem("runoncestarted", JSON.stringify(objGameNode));
      localStorage.setItem(localgamestrate, "no");
      updateMyGamesTimeSpentLevelBase(gameId, levelofcompletedgame)
    }
  }

  function removePrerollAndDisplayGame() {
    settimebased();
    // console.log('remove ad swf');
    if (isRemoveAdSwfJWPLayer) { // remove preroll only once

    } else { // record current time to calculate how much time user spent on playing the current game
      currentTime = Date.now();
      currentTimeInterval = 0;
      // call this only for timebased games
      // TODO save game progress
      /*if(!is_level_based) {
        setInterval(function () { updateMyGamesTimeSpent(gameId) }, 20000);
      }
      */


      jQuery("#my-content").css("opacity", "1");
      if (typeof intervalId != "undefined") {
        clearInterval(intervalId);
      }
      jQuery("#afg_container").remove();
      jQuery("#afg_preloader").remove();
      jQuery("#continue-container").remove();
      if (!drupalSettings.cmatgame.swfembed) { // html5 game game width, game height and game type
        game_width = jQuery("#html5game").attr("width");
        game_height = jQuery("#html5game").attr("height");
        game_type = "html5";
        // IE Detection and Version grabbing
        ie = false;
        var html5_game_url = jQuery("#html5game").attr("src");
        var swf_game_url = jQuery("#swfgame").attr("src");

        if (typeof swf_game_url !== 'undefined') {
          if (!checkIfFlashIsEnabled()) { // console.log('flash is undefined');
            flashDetectionMessage();
          }
        }
        if (typeof swf_game_url !== 'undefined' && swf_game_url.indexOf("//") === 0) {
          swf_game_url = window.location.protocol + swf_game_url;
        } else if (typeof swf_game_url !== 'undefined' && swf_game_url.indexOf("//") > 0) {
          swf_game_url = swf_game_url.replace("http:", window.location.protocol);
        }
        if (typeof html5_game_url !== 'undefined' && html5_game_url.indexOf("//") === 0) {
          html5_game_url = window.location.protocol + html5_game_url;
        } else if (typeof html5_game_url !== 'undefined' && html5_game_url.indexOf("//") > 0) {
          html5_game_url = html5_game_url.replace("http:", window.location.protocol);
        }
        if (navigator.appName == "Microsoft Internet Explorer") {
          ie = true;
          var ua = navigator.userAgent;
          var re = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
          if (re.exec(ua) != null) {
            ieVersion = parseInt(RegExp.$1)
          }
        }
        if (ie && ieVersion < 9) {
          nothtml5browser = '<div style="margin-top:20px;color: #f5e61f;line-height:1.1em;font-size: 1.867em;">Hey, you\'re using an older web browser that can\'t play HTML5 games like this one.<br><br>Please switch to another browser or just enjoy a different Coolmath game!</' + 'div><br><p style="font-size:1.6em;color:#0E83D4;font-weight:bold;">&#8226; <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie" target="_new">Get a new Internet Explorer browser from Microsoft</a></p>';
          jQuery("#html5game").replaceWith(nothtml5browser);
          jQuery("#swfgame").replaceWith(nothtml5browser);
        } else {
          sandbox = jQuery("#html5game").attr("sandbox");
          if (sandbox !== undefined) {
            sandbox = ' sandbox=\"' + sandbox + '\"';
          } else {
            sandbox = '';
          }
          if(cmg_is_mobile_device() ) {
            newiframe = '<iframe1 id="html5game" src="' + html5_game_url + '" class="' + jQuery("#html5game").attr("class") + '" width="' + jQuery("#html5game").attr("width") + '" height="' + jQuery("#html5game").attr("height") + '" scrolling="no" marginwidth="0' + '" vspace="0" frameborder="0" hspace="0" marginheight="0"' + sandbox + '></iframe1>';
            newswfiframe = '<iframe1 id="swfgame" src="' + swf_game_url + '" class="' + jQuery("#swfgame").attr("class") + '" width="' + jQuery("#swfgame").attr("width") + '" height="' + jQuery("#swfgame").attr("height") + '" scrolling="no" marginwidth="0" vspac' + 'e="0" frameborder="0" hspace="0" marginheight="0"></iframe1>';
          } else {
            newiframe = '<iframe id="html5game" src="' + html5_game_url + '" class="' + jQuery("#html5game").attr("class") + '" width="' + jQuery("#html5game").attr("width") + '" height="' + jQuery("#html5game").attr("height") + '" scrolling="no" marginwidth="0' + '" vspace="0" frameborder="0" hspace="0" marginheight="0"' + sandbox + '></iframe>';
            newswfiframe = '<iframe id="swfgame" src="' + swf_game_url + '" class="' + jQuery("#swfgame").attr("class") + '" width="' + jQuery("#swfgame").attr("width") + '" height="' + jQuery("#swfgame").attr("height") + '" scrolling="no" marginwidth="0" vspac' + 'e="0" frameborder="0" hspace="0" marginheight="0"></iframe>';
          }
          if (typeof isRemoveAdSwfJWPLayer === "undefined" || !isRemoveAdSwfJWPLayer) {
            jQuery("#html5game").replaceWith(newiframe);
            if (checkIfFlashIsEnabled() || drupalSettings.cmatgame.flash_emulation === "1") {
              jQuery("#swfgame").replaceWith(newswfiframe);
            }
          }
        }
      } else {
        if (!checkIfFlashIsEnabled() && drupalSettings.cmatgame.flash_emulation !== "1") {
          // console.log('flash is undefined');
          /* CLSS-1614 to load html5 as backup - START */
          var html5_game_url = jQuery("#html5game").attr("src");
          if (typeof html5_game_url !== 'undefined') {
            game_width = jQuery("#html5game").attr("width");
            game_height = jQuery("#html5game").attr("height");
            game_type = "html5";
            // IE Detection and Version grabbing
            ie = false;
            if (typeof html5_game_url !== 'undefined' && html5_game_url.indexOf("//") === 0) {
              html5_game_url = window.location.protocol + html5_game_url;
            } else if (typeof html5_game_url !== 'undefined' && html5_game_url.indexOf("//") > 0) {
              html5_game_url = html5_game_url.replace("http:", window.location.protocol);
            }
            if (navigator.appName == "Microsoft Internet Explorer") {
              ie = true;
              var ua = navigator.userAgent;
              var re = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
              if (re.exec(ua) != null) {
                ieVersion = parseInt(RegExp.$1)
              }
            }
            if (ie && ieVersion < 9) {
              nothtml5browser = '<div style="margin-top:20px;color: #f5e61f;line-height:1.1em;font-size: 1.867em;">Hey, you\'re using an older web browser that can\'t play HTML5 games like this one.<br><br>Please switch to another browser or just enjoy a different Coolmath game!</' + 'div><br><p style="font-size:1.6em;color:#0E83D4;font-weight:bold;">&#8226; <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie" target="_new">Get a new Internet Explorer browser from Microsoft</a></p>';
              jQuery("#html5game").replaceWith(nothtml5browser);
            } else {
              sandbox = jQuery("#html5game").attr("sandbox");
              if (sandbox !== undefined) {
                sandbox = ' sandbox=\"' + sandbox + '\"';
              } else {
                sandbox = '';
              }
              newiframe = '<iframe id="html5game" src="' + html5_game_url + '" class="' + jQuery("#html5game").attr("class") + '" width="' + jQuery("#html5game").attr("width") + '" height="' + jQuery("#html5game").attr("height") + '" scrolling="no" marginwidth="0' + '" vspace="0" frameborder="0" hspace="0" marginheight="0"' + sandbox + '></iframe>';
              if (typeof isRemoveAdSwfJWPLayer === "undefined" || !isRemoveAdSwfJWPLayer) {
                jQuery("#html5game").replaceWith(newiframe);
              }
            }
          } else { /* CLSS-1614 to load html5 as backup - END */
            flashDetectionMessage();
          }
        } else { // flash game game width, game height and game type
          if(drupalSettings.cmatgame.flash_emulation === "1"){ //ruffle
            game_width = drupalSettings.cmatgame.swfembed.swf.swf_1.width;
            game_height = drupalSettings.cmatgame.swfembed.swf.swf_1.height;
            game_type = "html5";
            var swfURLObject = drupalSettings.cmatgame.swfembed.swf.u;
            var swfURLArray = swfURLObject.split("/");
            var swf_game_url = 'https://www.coolmath-games.com/sites/cmatgame/files/ruffle1/ruffle.html?f='+swfURLArray[swfURLArray.length-1]+'&w='+game_width+'&h='+game_height;
            newswfiframe = '<iframe id="swfgame" src="' + swf_game_url + '" class="' + jQuery("#swfgame").attr("class") + '" width="' + jQuery("#swfgame").attr("width") + '" height="' + jQuery("#swfgame").attr("height") + '" scrolling="no" marginwidth="0" vspac' + 'e="0" frameborder="0" hspace="0" marginheight="0"></iframe>';
            jQuery("#swfgame").replaceWith(newswfiframe);
          }  else {
            game_width = drupalSettings.cmatgame.swfembed.swf.swf_1.width;
            game_height = drupalSettings.cmatgame.swfembed.swf.swf_1.height;
            game_type = "flash";

            if (typeof isRemoveAdSwfJWPLayer === "undefined" || !isRemoveAdSwfJWPLayer) {
              var swf_game_url = jQuery("#swfgame").attr("src");
              if (typeof swf_game_url !== 'undefined' && swf_game_url.indexOf("//") === 0) {
                swf_game_url = window.location.protocol + swf_game_url;
              } else if (typeof swf_game_url !== 'undefined' && swf_game_url.indexOf("//") > 0) {
                swf_game_url = swf_game_url.replace("http:", window.location.protocol);
              }
              newswfiframe = '<iframe id="swfgame" src="' + swf_game_url + '" class="' + jQuery("#swfgame").attr("class") + '" width="' + jQuery("#swfgame").attr("width") + '" height="' + jQuery("#swfgame").attr("height") + '" scrolling="no" marginwidth="0" vspac' + 'e="0" frameborder="0" hspace="0" marginheight="0"></iframe>';
              jQuery("#swfgame").replaceWith(newswfiframe);

              var gameInstructions = document.getElementById('game-instructions');
              // insert fix flash div before game instructions field
              if (typeof gameInstructions !== 'undefined' && gameInstructions !== null && typeof gameInstructions.innerHTML !== 'undefined' && gameInstructions.innerHTML !== null) {
                gameInstructions.innerHTML = '<div class="no-flash">If this flash game doesn\'t work on your computer, go <a href="/fix-flash.html">here</a> for help.</div><br><br>' + gameInstructions.innerHTML;
              }
            }
          }
          isRemoveAdSwfJWPLayer = true;
        }
      }
    }
    $('.game-xp-bar-immerse-button').addClass('enabled');
    jQuery('.btn.btn-primary.btn-sm.requestfullscreen').css('display', 'inline-block');
    display_game_progressbar(gameId);
  }

  function cmatgame_premium_subscription_game_display() {
    var cmatgame_subscriber = getCookie('cmg_sx');
    var validSubscriber = false;
    if (typeof cmatgame_subscriber !== 'undefined' && cmatgame_subscriber !== null) {
      validSubscriber = true;
    }
    if(getCookie("cmg_wl") !== null) {
      validSubscriber = true;
    }
    var cmatgame_free_user = getCookie('cmg_fx');
    var validFreeUser = false;
    if (typeof cmatgame_free_user !== 'undefined' && cmatgame_free_user !== null) {
      validFreeUser = true;
    }

    if (typeof subscribeNowAlienClass === 'undefined' || subscribeNowAlienClass === null || subscribeNowAlienClass === '') {
      // if (drupalSettings.cmatgame.isSubscriptionActive == false) {
      // subscribeNowAlienClass = "subscribe-now-alien-subscribe";
      // } else {
      // subscribeNowAlienClass = "subscribe-now-alien-signup";
      // }
    }
    freeGamesExceeded = true;
    // Display Ads to anonymous users the time from 7am to 13pm, display ads to anonymous users  from 13pm to 11:59pm and 00 to 7am only if the user is not from New York city
    // TODO -->  Need to add day of the week for school hours logic, day < 6 do not display Ads when GDPR cookie is set abd GDPR_All cookie is not set
    // Remove preroll-ads for whitelist users
    if (validSubscriber || getCookie("cmg_wl") !== null) { // retrieve user progress
      retrieveUserProgress();
      removePrerollAndDisplayGame();
      jQuery(document).ready(function () {
        $('.game-xp-bar-immerse-button').addClass('enabled');
        jQuery('.btn.btn-primary.btn-sm.requestfullscreen').css('display', 'inline-block');
        display_game_progressbar(gameId);
        immersive_mode_display_controller();
      });

    } else if (getCookie('cmg_schwl') !== null || typeof cmg_no_ads !== 'undefined' || (! validSubscriber && schoolHours || (!schoolHours && !targetStateUser) || (!schoolHours && targetStateUser && getCookie('cmg_active_anonymous_user') !== null))) { // TODO Display Game
      removePrerollAndDisplayGame();
      jQuery(document).ready(function () {
        $('.game-xp-bar-immerse-button').addClass('enabled');
        jQuery('.btn.btn-primary.btn-sm.requestfullscreen').css('display', 'inline-block');
        display_game_progressbar(gameId);
      });

      if (!/0-chess/.test(window.location.pathname)) { // setCookie('cmg_active_anonymous_user', 'active', 30*60*1000);
      }
    } else if (! validSubscriber && !schoolHours && targetStateUser && getCookie('cmg_active_anonymous_user') === null && getCookie('cmg_editor') === null) { // if user comes from google dont show the subscription paywall
      var ref = document.referrer;
      // count number of games played by the user this month
      userPlayedGames = 0;
      var userFreeGameList = [];
      var freeGameNid = 11579;
      if (sessionStorage.getItem("userFreeGameList") !== null) {
        userFreeGameList = JSON.parse(sessionStorage.getItem("userFreeGameList"));
      }
      if ((localStorage.getItem("userPlayedGames") == null || getCookie('cmg_upg') === null) && freeGameLimit !== 0) {
        userPlayedGames = 1;
        localStorage.setItem("userPlayedGames", userPlayedGames);
        // TODO monthly cookie
        setCookie('cmg_upg', 'true', cmg_upg_days_limit * 24 * 60 * 60 * 1000);
        userFreeGameList = [freeGameNid];
        sessionStorage.setItem("userFreeGameList", JSON.stringify(userFreeGameList));
        // TODO Display Game
        removePrerollAndDisplayGame();
        jQuery(document).ready(function () {
          display_game_progressbar(gameId);
        });

      } else { // userPlayedGames = parseInt(localStorage.getItem("userPlayedGames"+currentMonth+currentYear)); Monthly limit
        if (localStorage.getItem("userPlayedGames") !== null && getCookie('cmg_upg') !== null) {
          userPlayedGames = parseInt(localStorage.getItem("userPlayedGames"));
        } else {
          userPlayedGames = 0;
          setCookie('cmg_upg', 'true', cmg_upg_days_limit * 24 * 60 * 60 * 1000);
        }
        if (freeGameLimit != 0 && userPlayedGames < freeGameLimit && userFreeGameList.indexOf(freeGameNid) === -1) {
          userPlayedGames ++;
          freeGamesExceeded = false;
          if (userFreeGameList.length > 0) {
            userFreeGameList = userFreeGameList.concat(freeGameNid);
          } else {
            userFreeGameList = [freeGameNid];
          }
          localStorage.setItem("userPlayedGames", userPlayedGames);
          sessionStorage.setItem("userFreeGameList", JSON.stringify(userFreeGameList));
        } else {
          freeGamesExceeded = true;
        }
        // console.log("Number of games user has played "+ userPlayedGames );
        var validReferer = false;
        var validGameSession = false;
        if (userFreeGameList.indexOf(freeGameNid) > -1) {
          validGameSession = true;
        }
        if (ref.match("google.com") !== null || ref.match("yahoo.com") !== null || ref.match("bing.com") !== null) {
          validReferer = true;
        }
        subscriptionSignUpUrl();
        if (! validReferer && userPlayedGames >= freeGameLimit && ! validGameSession) {
          // subscription paywall
          // block anonymous users for New York City from 0-7am and 13pm to 11:59pm console.log("Free games limit exceeded and referer is not google");
          clearInterval(intervalId);
          jQuery("#afg_container").remove();
          jQuery(".title-instructions").remove();
          jQuery(".body-instructions").remove();
          var alreadySubscriberText = '<p class="already-subscribed">Already a Subscriber? <a class="learn-more-link" href="/login">Login</a></p>';
          if (getCookie('cmg_l') != null) {
            alreadySubscriberText = '';
          }
          var headLine = '<p class="no-free-games-headline">Please Sign up to keep playing</p>';
          if (getCookie('cmg_l') != null && getCookie('cmg_sx') != null) {
            headLine = '<p class="no-free-games-headline" style="padding-top:46px;">PLEASE SUBSCRIBE NOW TO KEEP PLAYING</p>';
          }
          jQuery(".field-game").html('<div class="subscription-overlay" style="height:360px;width:500px;background:#008aa3;white-space:normal;">' + headLine + '<p class="free-in-schools">The World\'s Best Collection of Games <br> For Logic, Reasoning & Fun.  <a class="' + subscribeNowAlienClass + '" id="game_subscription_promo_handler" href="' + signUpURL + ' ">Subscribe Now</a>' + alreadySubscriberText + '</div>');
          jQuery("#videoplayer").remove();
        } else {
          // console.log("User may have come from google or is within the free game limit "+ (freeGameLimit-userPlayedGames) );
          // TODO Display Game
          removePrerollAndDisplayGame();
          jQuery(document).ready(function () {
            display_game_progressbar(gameId);
          });
        }
      }
    }
  }
  function unlockAllLevels() {
    trackEvent('Unlock All Levels category', 'unlock all levels button clicked', document.title);
    alllevels = '<div id="subscriber-banner"><div class="adobe-analytics-sub-experience levels-unlocked">levels-unlocked</div></div>';
    jQuery("#subscriber-banner").replaceWith(alllevels);
    var cmgorigindomain = /coolmath-games/;
    var cmgtargetdomain = window.location.protocol + 'www.coolmath-games.com';
    if (/edit-stage/.test(window.location.hostname)) {
      cmgtargetdomain = window.location.protocol + 'edit-stage.coolmath-games.com';
    } else if (/d8-dev/.test(window.location.hostname)) {
      cmgtargetdomain = window.location.protocol + 'stage.coolmath-games.com';
    } else if (/cmatgame.local|dev.coolmath.games.com/.test(window.location.hostname)) {
      cmgtargetdomain = window.location.protocol + 'stage.coolmath-games.com';
    }
    if (game_type == "html5") {
      document.getElementById("html5game").contentWindow.unlockAllLevels();
    } else {
      if (cmgorigindomain.test(window.location.hostname)) {
        document.getElementById("swfObjID").unlockAllLevels();
      } else {
        var recievergameFrame = document.getElementById("swfgame");
        gDate = new Date();
        recievergameFrame.contentWindow.postMessage('unlockAllLevels', cmgtargetdomain); // TODO -- put target origin
      }
    }
  }
  function addSubToUnlockGAEvent() {
    trackEvent('Unlock All Levels category', 'subscribe to unlock button clicked', document.title);
    trackGoalVirtualPV('/virtual/unlock-button-click');
    window.location.href = "https://www.coolmathgames.com/signup/ b2df5a33?origin= /0-awesome-tanks-2&stual=1"
  }
  var immersive_mode_enabled = false;
  // Rules for big screen free trial
  function valid_big_screen_ft() {
    validUserMode = false;
    cmg_bsft = getCookie('cmg_bsft') !== null ? parseInt(getCookie('cmg_bsft')) : 0;
    // Logged in user
    if (getCookie('cmg_fx') !== null && getCookie('cmg_uid') !== null) {
      cmg_uid_bsft = getCookie('cmg_bsft_' + getCookie('cmg_uid'));
      if (cmg_uid_bsft !== null) {
        cmg_bsft = parseInt(cmg_uid_bsft);
      } else {
        cmg_bsft = 0;
      }
    }
    if (cmg_bsft <= 3) {
      validUserMode = true;
    }
    return validUserMode;
  }
  function immersive_mode_display_controller() {
    var validUserMode = false;
    if (getCookie('cmg_editor') !== null) { // display game for editors
      removePrerollAndDisplayGame();
      validUserMode = true;
    }
    if (getCookie('cmg_sx') !== null || getCookie("cmg_wl") !== null) { // display xp bar for premium users
      $('.game-xp-bar-immerse-button').addClass('enabled');
      jQuery('.btn.btn-primary.btn-sm.requestfullscreen').css('display', 'inline-block');
      validUserMode = true;
    } else if (getCookie('cmg_fx') !== null) { // Is valid Freemium user free trial ?
      if (valid_big_screen_ft()) {
        validUserMode = true;
      } else {
        validUserMode = true;
        // console.log("User reached FT limit. Display Big screen button ?");
      }
    } else { // Is valid Anonymous user free trial ?
      if (valid_big_screen_ft()) {
        validUserMode = true;
      }
    }

    if (validUserMode && ! immersive_mode_enabled) {
      immersive_mode_enabled = true;
      immersive_mode_display();
    }
  }
  var bigScreenTimer = null;
  bigScreenActive = false;
  function cmg_bigscreen_trackevent(type, trial_num) {
    if (jQuery('#big-screen-truex-overlay').length) {
      jQuery('#big-screen-truex-overlay').hide();
    }
    var tCat = 'BigScreen-Trial';
    if (cmg_stop_truex_promo === '' || cmg_stop_truex_promo !== 'yes') {
      var tCat = 'BigScreen-TrueX-Promo';
    }
    var tUsr = 'Anonymous user';
    if (typeof getCookie === 'function' && (getCookie('cmg_sx') !== null || getCookie('cmg_wl') !== null)) {
      tUsr = 'Subscriber';
    } else if (typeof getCookie === 'function' && getCookie('cmg_fx') !== null) {
      tUsr = 'Freemium user';
    }
    var tEvt = tUsr + ' trial ' + trial_num + ' - ' + type;
    if (cmg_stop_truex_promo === '' || cmg_stop_truex_promo !== 'yes') {
      tEvt = tUsr + ' TrueX Promo' + ' - ' + type;
    } else {
      if (trial_num > 3) {
        tEvt = tUsr + ' no more trial ' + ' - ' + type;
      }
    }
    if (type === 'enter' || type === 'exit' || type === 'closesignup' || type == 'closepromo' || type == 'bigscreen-exit') {
      trackEvent(tCat, tEvt, document.title);
    } else if (type === 'exit2signup' || type === 'signup') {
      if (cmg_stop_truex_promo === '' || cmg_stop_truex_promo !== 'yes') {
        var sLeg = get_premium_access_leg_desc('849ef809');
        if (typeof getCookie === 'function' && getCookie('cmg_fx') !== null && (getCookie('cmg_sx') === null && getCookie('cmg_wl') === null)) {
          sLeg = get_premium_access_leg_desc('e180e28d');
        }
        trackEvent(tCat, tEvt + ' - Leg - ' + sLeg, document.title);
      } else {
        var sLeg = get_premium_access_leg_desc('1bb008bd');
        if (typeof getCookie === 'function' && getCookie('cmg_fx') !== null && (getCookie('cmg_sx') === null && getCookie('cmg_wl') === null)) {
          sLeg = get_premium_access_leg_desc('7859e605');
        }
        trackEvent(tCat, tEvt + ' - Leg - ' + sLeg, document.title);
      }
    } else {
      trackEvent(tCat, type, document.title);
    }
  }
  popover_login_click = false;

  function cmg_display_login_page() {
    //console.log("login link clicked in popup message");
    popover_login_click = true;
    if (jQuery('#popover' + gameId).length) {
      jQuery('#popover' + gameId).remove();
      immerse_hover_on = 0;
    }
    window.location = "/login?destination=" + window.location.pathname
  }

  function display_cmg_overlay_signupform(variant) {
  	// console.log("BIG SCREEN display_cmg_overlay_signupform: "+new Date());
    if (jQuery('#popover' + gameId).length) {
      jQuery('#popover' + gameId).remove();
      immerse_hover_on = 0;
    }
    // track event of type  'signup'
    if (typeof cmg_bsft === 'undefined') {
      cmg_bsft = 0;
      if (getCookie('cmg_fx') === null) {
        cmg_bsft = getCookie('cmg_bsft') !== null ? parseInt(getCookie('cmg_bsft')) : 0;
      } else if (getCookie('cmg_uid') !== null && getCookie('cmg_bsft_' + getCookie('cmg_uid')) !== null) {
        cmg_bsft = getCookie('cmg_bsft_' + getCookie('cmg_uid'));
      }
    }
    cmg_bigscreen_trackevent('signup', cmg_bsft);
    if ((getCookie('cmg_sx') === null && getCookie('cmg_wl') === null)) {
      myStopFunction();
    }
    // Check if A/B test is available
    if (typeof signup_abtest_cmg_bsft !== 'undefined') {
      //variant = signup_abtest_cmg_bsft;
    }
    if (typeof variant === 'undefined' || variant === '') {
      variant = '/16'; // 14b, 15c, 16
    }

    if (cmg_stop_truex_promo !== '' && cmg_stop_truex_promo === 'yes' && jQuery('#big-screen-overlay').length) {
      jQuery('#big-screen-overlay').show();
    } else if (cmg_stop_truex_promo !== '' && cmg_stop_truex_promo === 'yes') {
      var big_screen_url = '';
      if (getCookie('cmg_fx') === null) {
        // big_screen_url = '/premium-access/1bb008bd' + variant + '?ts='+new Date().getTime();//Bigscreen trial plans
        // big_screen_url = '/premium-access/849ef809' + variant + '?ts=' + new Date().getTime(); // BSWOJ anon plan
        big_screen_url = '/premium-access/6ea95de6' + variant + '?ts='+new Date().getTime();//BSWOJ anon plan

      } else {
        // big_screen_url = '/premium-access/7859e605' + variant + '?ts='+new Date().getTime();//BSFT logged-in user plan
        big_screen_url = '/premium-access/e180e28d' + variant + '?ts=' + new Date().getTime(); // BSWOJ logged-in user plan
      }
      if (variant == 'thankyou') {
        big_screen_url = '/signup/thank-you/overlay?ts=1596827222&src=wc&origin=/premium-access/1bb008bd/14b&sp=0&cmgtypl=1bb008bd&cmgovly=1';
      }
      if (/coolmathgames/.test(location.host)) {
        // big_screen_url = "https://" + location.host + big_screen_url;
      }
      var ov_css = 'style="display:none; position: fixed; z-index: 100000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.4);" min-height="1040px"';
      var ovc_css = 'style="margin: auto; padding: 10px; width: 850px;" min-height="540px"';
      var iframe_overlay = '<div id="big-screen-overlay" ' + ov_css + ' width="90%" height="90%"><div class="big-screen-signup-container" ' + ovc_css + ' ><a class="btn-close" onclick="cmg_bigscreen_trackevent(\'closesignup\', cmg_bsft); return false;" href="/"><i class="fa fa-circle fa-stack-1x"></i><i class="icon-remove_sign" aria-hidden="true"></i></a><iframe src="' + big_screen_url + '" width="100%" height="100%" min-height="1000px" id="big_screen_iframe" scrolling="no"></iframe></div></div>';
      // TODO Add this iframe at the correct place that it needs to go.
      jQuery('.global-wrapper').before(iframe_overlay); // TODO
      jQuery('#big_screen_iframe').css('height', '800px');
      jQuery('#big-screen-overlay').fadeIn(1000);
      jQuery('.big-screen-signup-container .btn-close').on('click', function (e) {
        e.preventDefault();
        jQuery('#big-screen-overlay').hide();
      });
    } else {
      var big_screen_url = '';
      if (getCookie('cmg_fx') === null) { // big_screen_url = '/premium-access/1bb008bd' + variant + '?ts='+new Date().getTime();
        big_screen_url = '/premium-access/849ef809' + variant + '?ts=' + new Date().getTime(); // BSWOJ anon plan
      } else { // big_screen_url = '/premium-access/7859e605' + variant + '?ts='+new Date().getTime();
        big_screen_url = '/premium-access/e180e28d' + variant + '?ts=' + new Date().getTime(); // BSWOJ logged-in user plan
      }
      if (variant == 'thankyou') {
        big_screen_url = '/signup/thank-you/overlay?ts=1596827222&src=wc&origin=/premium-access/849ef809/14b&sp=0&cmgtypl=1bb008bd&cmgovly=1';
      }
      if (/coolmathgames/.test(location.host)) { // big_screen_url = "https://" + location.host + big_screen_url;
      }
      var ov_css = 'style="display:none; position: fixed; z-index: 100000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.4);" min-height="1040px"';
      var ovc_css = 'style="margin: auto; padding: 10px; width: 850px;" min-height="540px"';
      var iframe_overlay = '<div id="big-screen-overlay" ' + ov_css + ' width="90%" height="90%"><div class="big-screen-signup-container" ' + ovc_css + ' ><a class="btn-close" onclick="cmg_bigscreen_trackevent(\'closesignup\', cmg_bsft); return false;" href="/"><i class="fa fa-circle fa-stack-1x"></i><i class="icon-remove_sign" aria-hidden="true"></i></a><iframe src="' + big_screen_url + '" width="100%" height="100%" min-height="1000px" id="big_screen_iframe" scrolling="no"></iframe></div></div>';
      // TODO Add this iframe at the correct place that it needs to go.
      jQuery('.global-wrapper').before(iframe_overlay); // TODO
      jQuery('#big_screen_iframe').css('height', '800px');
      jQuery('#big-screen-overlay').fadeIn(1000);
      jQuery('.big-screen-signup-container .btn-close').on('click', function (e) {
        e.preventDefault();
        jQuery('#big-screen-overlay').hide();
      });
    }
  }
  function immersive_mode_exit_handler(variant) {
    bigScreenActive = false;
    cmg_bsft = getCookie('cmg_bsft') !== null ? parseInt(getCookie('cmg_bsft')) : 0;
    // we do not increment in exit handler
    // Logged in user
    if (getCookie('cmg_fx') !== null && getCookie('cmg_uid') !== null) {
      cmg_uid_bsft = getCookie('cmg_bsft_' + getCookie('cmg_uid'));
      if (cmg_uid_bsft !== null) {
        cmg_bsft = parseInt(cmg_uid_bsft);
      } else {
        cmg_bsft = 0;
      }
    }
    if (cmg_bsft >= 3 && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) { // Redirect the user to signup page
      if (jQuery.fullscreen.isFullScreen()) {
        jQuery.fullscreen.exit();
      }
      if (cmg_stop_truex_promo !== '' && cmg_stop_truex_promo === 'yes') {
        // track event of type  'exit2signup'
        cmg_bigscreen_trackevent('exit2signup', cmg_bsft);
        display_cmg_overlay_signupform(variant);
      } else {
        cmg_bigscreen_trackevent('bigscreen-exit', cmg_bsft);
      }
    } else if (getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
      myTimerAction();
    }
    if (bigScreenTimer) {
      clearTimeout(bigScreenTimer);
      bigScreenTimer = null;
    }
    if (cmg_bsft < 3) { // track event of type  'exit'
      cmg_bigscreen_trackevent('exit', cmg_bsft);
    }
  }
  function bigScreenTimerAction() {
    cmg_bsft = 3;
    if (typeof bigScreenActive !== 'undefined' && bigScreenActive) {
      if (getCookie('cmg_fx') !== null && getCookie('cmg_uid') !== null) { // Logged in user
        cmg_uid_bsft = getCookie('cmg_bsft_' + getCookie('cmg_uid'));
        if (cmg_uid_bsft !== null) { // cmg_bsft = parseInt(cmg_uid_bsft) + 1;
          cmg_bsft = 3; // 3011
        } else {
          cmg_bsft = 3; // 3011
        }
        // Ajax request to update user object
        url = "/ajax/cmgbsft/" + getCookie('cmg_uid') + '/' + cmg_bsft; // + '?' + new Date().getTime();
        status = 0;
        jQuery.getJSON(url, function (data) {
          if (typeof data.uid !== 'undefined' && data.cmgbsft !== 'undefined') {
            status = 1;
          }
        });
        // setCookie('cmg_bsft_'+getCookie('cmg_uid'), cmg_bsft, 365 * 24 * 60 * 60 * 1000);
      } else {
        // Anon user
        // cmg_bsft = getCookie('cmg_bsft') !== null ? parseInt(getCookie('cmg_bsft')) + 1 : 1;
        cmg_bsft = 3; // 3011
        setCookie('cmg_bsft', cmg_bsft, 365 * 24 * 60 * 60 * 1000);
      }
      clearTimeout(bigScreenTimer);
      bigScreenTimer = null;
    }
  }
  var immerse_hover_on = 0;
  var immerse_hover_in = 0;
  var big_screen_msg_on = 0;
  function immersive_popover_msg() {
    var popover_msg = "New Premium Feature! Try it for FREE now";
    if ((getCookie('cmg_sx') !== null || getCookie('cmg_wl') !== null)) {
      popover_msg = "New Premium Feature! Try it now!";
    } else {
      cmg_bsft = getCookie('cmg_bsft') !== null ? parseInt(getCookie('cmg_bsft')) : 0;
      // Logged in user
      if (getCookie('cmg_fx') !== null && getCookie('cmg_uid') !== null) {
        cmg_uid_bsft = getCookie('cmg_bsft_' + getCookie('cmg_uid'));
        if (cmg_uid_bsft !== null) {
          cmg_bsft = parseInt(cmg_uid_bsft);
        } else {
          cmg_bsft = 0;
        }
      }
      // setCookie('cmg_bsft', cmg_bsft, 365*24*60*60*1000);todo in timer function after bigscreen is active for a minute
      if (cmg_bsft === 1) {
        popover_msg = "2 Free Trials Remaining";
      } else if (cmg_bsft === 2) {
        popover_msg = "1 Free Trial Remaining";
      } else if (cmg_bsft >= 3) {
        var variant = '';
        if (typeof signup_abtest_2_variations_adfree_modular !== 'undefined') {
          variant = '/'.signup_abtest_2_variations_adfree_modular;
        }
        if (getCookie('cmg_fx') !== null) {
          popover_msg = 'BIG SCREEN is a Premium Feature. <br/>Please <a onclick=\'display_cmg_overlay_signupform(); return false;\' href=\'/premium-access/7859e605' + variant + '\'>Sign Up</a>';
        } else {

          popover_msg = 'BIG SCREEN is a Premium Feature. <br/>Please <a onclick=\'display_cmg_overlay_signupform(); return false;\' href=\'/premium-access/1bb008bd' + variant + '\'>Sign Up</a> or <a onclick=\'cmg_display_login_page(); return false;\' href=\'/login\'>Log In</a>.';
        }
      }
    }
    return popover_msg;
  }
  var cmg_bs_popover_prefix = '<div class="popover fade bs-popover-top show" role="tooltip" id="popover' + gameId + '" x-placement="top" ';
  var cmg_bs_popover_suffix1 = '><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body">';
  var cmg_bs_popover_suffix2 = '</div></div>';

  // Display BS TrueX options overlay
  network_user_id = '';
  truex_options = null;
  truex_ad_available = 0;
  // make call to trueX for available ads
  function requestTrueXAdsAndDisplay(client) { // log("Ads Requested");
    client.requestActivity(function (truexAd) { // var truexAd = ads.shift();
      if (truexAd) {
        truex_ad_available = 1;
        // trackEvent('View a Sponsored Video', 'TrueX Ad Available', document.title);
        log("Bigscreen Truex Ad client loaded and ad available");
        showTrueXOptIn(truexAd, client);
      } else { // log("No ads available.");
        log("Bigscreen Truex Ad NOT available. Pre-roll video ad shall be displayed");
        // trackEvent('View a Sponsored Video', 'TrueX Ad Not Available', document.title);
        truex_ad_available = 0;
      }
    });
  }

  function showTrueXOptIn(truexAd, client) { // add TrueX event handlers
    truexAd.onStart(function (activity) { // ad started
      log("Bigscreen Truex Ad start");
      // cmg_bigscreen_trackevent
      trackEvent('BigScreen-TrueX-Promo', 'View a Sponsored Video: TrueX Ad Start', document.title);
      // <h2>PLAY BIG SCREEN AFTER THIS 30 SECOND AD</h2>
      jQuery('#big-screen-truex-header-text').css('padding-top', '14px').html('<h2 style="font-size: 22px;">PLAY BIG SCREEN AFTER THIS 30 SECOND AD</h2>');
      // .css('margin-top', '150px');
      // jQuery('#big-screen-signup-container-id').css('margin-top', '0').css('margin', 'auto');
      myStopFunction();
      trueXTimer = setTimeout(function () {
        jQuery('#big-screen-truex-header-text').css('background-color', '#16202c').css('padding-top', '14px').html('<h2 style="font-size: 22px;">PLEASE INTERACT WITH THIS AD TO CONTINUE</h2>'); // .css('margin-top', '150px');
      }, 25 * 1000);
    });
    truexAd.onCredit(function (engagement) { // user spent 30 seconds and interacted at least once
      log("Bigscreen Truex Ad credit");
      trackEvent('BigScreen-TrueX-Promo', 'View a Sponsored Video: TrueX Ad Credited', document.title);
      // <div class="continue-link-yellow"> text to write </div>
      jQuery('#big-screen-truex-header-text').css('background-color', '#16202c').css('padding-top', '14px').html('<h2><a href="" style="font-size: 22px; text-decoration: none; color:#F5E61F; " id="truex-bigscreen-activate-id" class="truex-bigscreen-activate">PLAY BIG SCREEN NOW </a></h2>');
      document.getElementById("truex-bigscreen-activate-id").onclick = function () {
        event.preventDefault();
        if (typeof bigScreenActive === 'undefined' || typeof bigScreenActive !== 'undefined' && !bigScreenActive) {
          jQuery('#big-screen-signup-container-id').html("");
          jQuery('#big-screen-truex-overlay').remove();
          cmg_start_game_full_screen('truex');
        }
      }
      // console.log(engagement);
    });
    truexAd.onClose(function (activity) { // user closed the ad unit
      log("Bigscreen Truex Ad close");
      trackEvent('BigScreen-TrueX-Promo', 'View a Sponsored Video: TrueX Ad Closed', document.title);
      containerClose();
      requestTrueXAdsAndDisplay(client);
    });
    truexAd.onFinish(function (activity) { // user got to end of ad
      log("Bigscreen Truex Ad finish");
      trackEvent('BigScreen-TrueX-Promo', 'View a Sponsored Video: TrueX Ad Finished', document.title);
      jQuery('#big-screen-signup-container-id').html("");
      jQuery('#big-screen-truex-overlay').remove();
      // full screen
      cmg_start_game_full_screen("truex");
    });
    truexAd.onMessage(function (payload) { // log("onMessage = " + payload);
    });


    // track TrueX Trigger Point Impression
    // client.trackTriggerPointImpression(truexAd);

    // handle opt-in click event
    // add TrueX Opt-in to DOM
    if (jQuery("#cmg-big-screen-truex-activity").length) {
      var truex_container = document.getElementById("cmg-big-screen-truex-activity");
      document.getElementById("cmg-big-screen-truex-activity").onclick = function () { // truex_preroll_display_handler();
        event.preventDefault();
        trackEvent('BigScreen-TrueX-Promo', 'View a Sponsored Video: Button clicked', document.title);
        jQuery('.big-screen-options-container').hide();
        if (truex_ad_available && typeof client !== 'undefined') { // BigScreen-TrueX-Promo
          log("Bigscreen Truex ad available. Show Truex activity");
          trackEvent('BigScreen-TrueX-Promo', 'View a Sponsored Video: TrueX Ad Loading', document.title);
          client.loadActivityIntoContainer(truexAd, 'big-screen-signup-container-id', {
            width: "960px",
            height: "540px"
          });
          // show_big_screen_preroll_ad();//test preroll
        } else {
          log("Bigscreen Truex ad not available. Instead show preroll video");
          // TODO: Show preroll
          truex_overlay_preroll_ad_display = true;
          show_big_screen_preroll_ad();
          trackEvent('BigScreen-TrueX-Promo', 'View a Sponsored Video: Preroll Ad Loading', document.title);
        }
      };
    }

    // cmg-big-screen-truex-signup
    if (jQuery("#cmg-big-screen-truex-signup").length) {
      document.getElementById("cmg-big-screen-truex-signup").onclick = function () {
        log("Bigscreen button clicked");
        event.preventDefault();
        // jQuery('.big-screen-options-container').hide();
        jQuery('#big-screen-truex-overlay').remove();
        display_cmg_overlay_signupform();
      };
    }
  }
  function truex_preroll_display_handler() { // log("Truex ad is available. Show truex activity");
    event.preventDefault();
    trackEvent('BigScreen-TrueX-Promo', 'View a Sponsored Video: Button clicked', document.title);
    jQuery('.big-screen-options-container').hide();
    if (truex_ad_available && typeof client !== 'undefined') { // BigScreen-TrueX-Promo
      trackEvent('BigScreen-TrueX-Promo', 'View a Sponsored Video: TrueX Ad Loading', document.title);
      client.loadActivityIntoContainer(truexAd, 'big-screen-signup-container-id', {
        width: "960px",
        height: "540px"
      });
      // show_big_screen_preroll_ad();//test preroll
    } else {
      // log("Truex ad not available. Instead show preroll video");
      // TODO: Show preroll
      truex_overlay_preroll_ad_display = true;
      show_big_screen_preroll_ad();
      trackEvent('BigScreen-TrueX-Promo', 'View a Sponsored Video: Preroll Ad Loading', document.title);
    }
  }
  function containerClose() { // log("containerClose called.");
  }
  function log(msg) {
    console.log("CMG [%s] - %s", new Date().toLocaleTimeString(), msg);
  }
  cmg_truex_promo_events_added = 0;
  function display_big_screen_truex_options_overlay() { // initialize trueX ad client w/ options hash
    trackEvent('BigScreen-TrueX-Promo', 'Bigscreen button clicked', document.title);
  	if(getCookie('cmg_sx') !== null || getCookie('cmg_wl') !== null ) {
      event.preventDefault();
      cmg_start_game_full_screen('truex');
    } else {
      network_user_id = getCookie('_ga');
      if (typeof network_user_id !== 'undefined' && network_user_id !== '') {
        network_user_id = network_user_id.replace('GA', 'cmg');
      }
      // TRUEX Test Hash
      // truex_options = {'network_user_id': network_user_id, 'partner_config_hash': '83f879b26797c723882473d6435e6361c105d86b'};
      // TRUEX Live Hash

      truex_options = {
        'network_user_id': network_user_id,
        'partner_config_hash': '375f2f2b728700cd991bb24601b3841c98375886'
      };
      if (typeof truex !== 'undefined') {
        truex.client(truex_options, function (client) {
          requestTrueXAdsAndDisplay(client);
        });
      }

      var ov_css = ' style="display:none; position: fixed; z-index: 100000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.7);" min-height="1040px" ';
      var ovc_css = ' style="margin: auto; margin-top: 200px; padding: 10px; width: 424px; height: 345px; background-color: #1f4f77; border:3px solid #286aa1;" ';
      var ovc_css_id = ' style="margin: auto; margin-top: 150px; width: 960px; " ';
      var truex_css = '  ';
      var truex_options1 = '<div class="truex_options_title" ' + truex_css + '><h1>To Play This Game in Big Screen Mode</h1></div>';
      // onclick="truex_preroll_display_handler(); return false; --> below"
      var truex_options2 = '<div class="truex_options_video" ' + truex_css + '><a href="" id="cmg-big-screen-truex-activity" class="txt-bs-popup" onclick="truex_preroll_display_handler(); return false;"><h2>View a Sponsored Video</h2></a></div>';
      var truex_optionsOR = '<div class="truex_options_OR_txt" ' + truex_css + '><h1> OR </h1></div>';

      var truex_options3 = '<div class="truex_options_signup" ' + truex_css + '><a href="" id="cmg-big-screen-truex-signup"  class="txt-bs-popup" onclick="display_cmg_overlay_signupform(); return false;"><h2>Pay for Premium Access</h2></a></div>';
      var truex_options4 = '<div class="truex_options_no_thks" ><a href="" id="cmg-big-screen-truex-promo-close" onclick="cmg_bigscreen_trackevent(\'closepromo\', cmg_bsft); return false;"  href="/">No thanks, return to regular mode</a></div>';

      var truex_options_prefix = '<div id="cmg-truex-options-container">';
      var truex_options_suffix = '</div>';
      truex_options = truex_options_prefix + truex_options1 + truex_options2 + truex_optionsOR + truex_options3 + truex_options4 + truex_options_suffix;
      var truex_options_heading = '<div id="big-screen-truex-header-text" style="text-align: center; padding: 5px; padding-top: 14px; color:#fff; font-size:22px; background-color: #484848; ">' + '</div>';
      var preroll_container = '<div id="big-screen-preroll-container"><div id="videoplayer" style="width:100%;">' + '<video id="content123" style="width:640px;height:1px;">' + '<source src="//www.coolmathgames.com/sites/default/files/adtesting/DummyVideo.mov"></source>' + '</video><div id="adcontainer" style="margin:auto; width:640px;height:480px;"></div>' + '</div></div>' +
      // '<div id="continue-container"><div id="continue-link" style="color: yellow;">Continue in </div>'+
      // '<span id="preroll_timer_id" style="width: 1px; height: 1px;">15</span>';
      '</div>';
      var bs_truex_options = '<div id="big-screen-truex-overlay" class="big-screen-style-popup-container" ' + ov_css + ' width="90%" height="90%">' + '<div class="big-screen-options-container" ' + ovc_css + ' >' + '<div class="bs-pop-up-content-container"><a class="btn-close" onclick="cmg_bigscreen_trackevent(\'closepromo\', cmg_bsft); return false;" href="/">' + '<i class="icon-remove"  style="font-size:24px;"  aria-hidden="true"></i></a>' + truex_options + '</div>' + '</div>' + '<div id="truex-main-container" ' + ovc_css_id + '>' + truex_options_heading + '<div id="big-screen-signup-container-id"></div>' + preroll_container + '</div>' + '</div>';
      // TODO Add this iframe at the correct place that it needs to go.
      jQuery('.global-wrapper').before(bs_truex_options); // TODO
      jQuery('#big_screen_iframe').css('height', '800px');
      jQuery('.big-screen-options-container').show();
      jQuery('#big-screen-truex-overlay').fadeIn(1000);
      // if(!cmg_truex_promo_events_added) {
      // cmg_truex_promo_events_added = 1;
      jQuery('.big-screen-options-container .btn-close').on('click', function (e) {
        e.preventDefault();
        jQuery('#big-screen-truex-overlay').hide();
      });
      jQuery('#cmg-big-screen-truex-promo-close').on('click', function (e) {
        e.preventDefault();
        jQuery('#big-screen-truex-overlay').hide();
      });
      // }
    }
  }
  function show_big_screen_preroll_ad() {
    event.preventDefault();
    jQuery('#big-screen-truex-header-text').css('padding-top', '14px').html('<h2 style="font-size: 22px;">PLAY BIG SCREEN AFTER THIS AD</h2>');
    jQuery('.big-screen-options-container').hide();

    var cmatgame_subscriber = getCookie('cmg_sx');
    var validSubscriber = false;
    if (typeof cmatgame_subscriber !== 'undefined' && cmatgame_subscriber !== null) {
      validSubscriber = true;
    }
    // preroll ads
    var prerollUrls = /0\-testing/;
    if (! validSubscriber) { // display preroll ads
      window.scrollTo(0, 0);
      var modal = document.getElementById('big-screen-preroll-container');
      // modal.style.display = 'block';
      // clear refresh timer
      if (typeof refreshTimer !== "undefined") {
        clearTimeout(refreshTimer);
        refreshTimer = null;
      }
      var adTagUrl = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/137548614/1023174/71134/1023174-71134-video&description_url=https%3A%2F%2Fwww.coolmathgames.com%2F&env=vp&impl=s&correlator=&tfcd=0&npa=0&gdfp_req=1&output=vast&sz=640x480&unviewed_position_start=1';
      if (typeof window.PW_CMG != "undefined") {
        var auctionCallback = function (displayAds, videoUrl) {
          application = new Application(displayAds, videoUrl);
        };
        window.PW_CMG.startAuction(auctionCallback);
      } else { // adblock
        application = new Application(false, adTagUrl);
      }

      bs_preroll_timer = 15;
      bs_preroll_intervalId = setInterval(function () {
        bs_preroll_timer --;

        jQuery('#big-screen-truex-header-text').html('<h2 style="font-size: 22px;">PLAY BIG SCREEN AFTER THIS AD: ' + bs_preroll_timer + '</h2>');
        // document.getElementById("preroll_timer_id").innerHTML = seconds_left;
        if (bs_preroll_timer <= 0) {
          jQuery('#big-screen-truex-header-text').html('<h2><a href="" style="font-size: 22px; text-decoration: none; color:#F5E61F; " id="truex-bigscreen-activate-id" class="truex-bigscreen-activate">PLAY BIG SCREEN NOW </a></h2>');
          document.getElementById("truex-bigscreen-activate-id").onclick = function () {
            event.preventDefault();
            if (typeof bigScreenActive === 'undefined' || typeof bigScreenActive !== 'undefined' && !bigScreenActive) {
              jQuery('#big-screen-signup-container-id').html("");
              jQuery('#big-screen-truex-overlay').remove();
              cmg_start_game_full_screen('truex');
            }
          }
          clearInterval(bs_preroll_intervalId);
        }
      }, 1000);
    }
  }
  // TRUEX end
  function cmg_start_game_full_screen(cmgsource) {
    myStopFunction(); // no ad refresh
    bigScreenActive = true;
    // console.log("Starting fullscreen");
    if (cmg_stop_truex_promo !== '' && cmg_stop_truex_promo === 'yes') { // trackEvent('BigScreen-Trial', 'Bigscreen activated', document.title);
      cmg_bigscreen_trackevent('enter', cmg_bsft);
      bigScreenTimer = setTimeout(function () {
        bigScreenTimerAction();
      }, 60 * 1000);
    }
    else {
      // trackEvent('BigScreen-TrueX-Promo', 'Bigscreen activated', document.title);
      cmg_bigscreen_trackevent('enter', 0);
    }
    var elem = document.getElementById('block-system-main');

    if (jQuery('body').hasClass('mobile-device')) {
      requestFullscreenModal(elem, document.title);
      return false;
    }

    if (elem.requestFullscreen) {
      elem.requestFullscreen();
    } else if (elem.mozRequestFullScreen) { /* Firefox */
      elem.mozRequestFullScreen();
    } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
      elem.webkitRequestFullscreen();
    } else if (elem.msRequestFullscreen) { /* IE/Edge */
      elem.msRequestFullscreen();
    } else {
      requestFullscreenModal(elem, document.title);
      return false;
    }
    adjustWidthHeightGame();
  }
  function immersive_mode_display() {
    var popover_msg = immersive_popover_msg();
    var immerse_prefix = '<a class="btn btn-primary btn-sm requestfullscreen" href="#">'; // do not add title
    var immerse_suffix = '<i class="icon-expand-arrows-alt" aria-hidden="true"></i></a>';
    var immerse_html = '<span class="big-screen-popover-span" data-toggle="popover" data-trigger="focus" data-placement="top" data-content="' + popover_msg + '">Big Screen</span>';

    $(".immerse-button").html(immerse_prefix + immerse_html + immerse_suffix);
    if (getCookie('cmg_fx') !== null) {
      jQuery('.node-type-game.logged-in .requestfullscreen').css('display', 'inline-block');
    }
    if(getCookie('cmg_sx') !== null || getCookie('cmg_wl') !== null) {
      jQuery('.immerse-button a.btn').css('background-image', 'url("https://www.coolmathgames.com/sites/default/files/styles/WATCH-AD-TO-PLAY-BIG-SCREEN-vSub.png")').css('width', '132px')
    }

    // get game
    var elem = document.getElementById('block-system-main');
    // open game in fullscreen
    $('.immerse-button .requestfullscreen').on('click', function (e) {
      e.preventDefault();

      // If mobile view show full screen without any ads
      // if($("body").hasClass("mobile-device")) {
      // cmg_start_game_full_screen();
      // }

      if (cmg_stop_truex_promo === '' || cmg_stop_truex_promo !== 'yes') {
        // TODO: Return from here or not?
        display_big_screen_truex_options_overlay();
        return;
      }
      if (jQuery('#popover' + gameId).length) {
        jQuery('#popover' + gameId).remove();
        immerse_hover_on = 0;
      }
      cmg_bsft = getCookie('cmg_bsft') !== null ? parseInt(getCookie('cmg_bsft')) : 0;
      // Logged in user
      if (getCookie('cmg_fx') !== null && getCookie('cmg_uid') !== null) {
        cmg_uid_bsft = getCookie('cmg_bsft_' + getCookie('cmg_uid'));
        if (cmg_uid_bsft !== null) {
          cmg_bsft = parseInt(cmg_uid_bsft);
        } else {
          cmg_bsft = 0;
        }
      }
      if (cmg_stop_truex_promo !== '' && cmg_stop_truex_promo === 'yes') {
        if (cmg_bsft < 3) {
        // track event of type  'enter'
          cmg_bigscreen_trackevent('enter', cmg_bsft + 1);
        }
        if (getCookie('cmg_sx') !== null || getCookie("cmg_wl") !== null || cmg_bsft < 3) {
          cmg_start_game_full_screen();
        } else {
          //console.log("BIG SCREEN You have reached a FT limit");
          //Display signup form
          if(getCookie('cmg_sx') === null && getCookie('cmg_wl') === null && !popover_login_click) {
            display_cmg_overlay_signupform();
          }
          // track event of type  'signup'
          // cmg_bigscreen_trackevent('signup', cmg_bsft+1);
        }
      } else {
        //Big Screen - TrueX Integration
        //TODO conditions to check or when to display the overlay
        if (getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
          //console.log("Big screen button clicked. display the overlay with options");
          display_big_screen_truex_options_overlay();
        } else {
          if (cmg_bsft < 3) {
            // track event of type  'enter'
            cmg_bigscreen_trackevent('enter', cmg_bsft + 1);
          }
          if (getCookie('cmg_sx') !== null || getCookie('cmg_wl') !== null || cmg_bsft < 3) {
            cmg_start_game_full_screen();
          } else {
            //console.log("BIG SCREEN You have reached a FT limit");
            //Display signup form
            if(getCookie('cmg_sx') === null && getCookie('cmg_wl') === null && !popover_login_click) {
              //display_cmg_overlay_signupform();
            }
            // track event of type  'signup'
            // cmg_bigscreen_trackevent('signup', cmg_bsft+1);
          }
        }
      }
    });
    if (cmg_stop_truex_promo !== '' && cmg_stop_truex_promo === 'yes') {
      $('.immerse-button .requestfullscreen').hover(function () {
        // hover in
        // console.log("Bigscreen button hover in "+new Date());
        immerse_hover_in = 1;
        if (!immerse_hover_on) {
          popover_msg = immersive_popover_msg();
          var popover_html = cmg_bs_popover_prefix + cmg_bs_popover_suffix1 + popover_msg + cmg_bs_popover_suffix2;
          $(".immerse-button .big-screen-popover-span").after(popover_html);
          var width = $(".immerse-button").find('.requestfullscreen').width();
          var height = $(".immerse-button").find('.popover').height();
          var xPos = '-' + (width/2);
          var yPos = '-' + (height + 5);
          $(".immerse-button").find('.popover').css("transform","translate3d("+ xPos +"px, "+ yPos + "px, 0)");

          immerse_hover_on = 1;
          if (jQuery('#popover' + gameId).length) {
            jQuery('#popover' + gameId).hover(function () {
              //console.log("Popover message hover in "+ new Date());
              big_screen_msg_on = 1
            }, function () {
              //console.log("Popover message hover out "+ new Date());
              big_screen_msg_on = 0;
            });
          }
        }
      }, function () {
        // hover out
        // console.log("Bigscreen button hover out "+ new Date());
        immerse_hover_in = 0;
        setTimeout(function () {
          if (immerse_hover_on && !immerse_hover_in && !big_screen_msg_on) {
            jQuery('#popover' + gameId).remove();
            immerse_hover_on = 0;
          }
        }, 1 * 1000);
      });
    }

    // close game fullscreen
    $('#block-system-main .close-full-screen').on('click', function (e) {
      e.preventDefault();
      immersive_mode_exit_handler();
      jQuery.fullscreen.exit();
    });
    $('body').keypress(function (e) {
      if (e.which == 27) {
        if ($('.immerse-button .requestfullscreen').length && typeof bigScreenActive !== 'undefined' && bigScreenActive) {
          immersive_mode_exit_handler();
          // jQuery.fullscreen.exit();
        }
      }
    });

    var screen_change_events = "webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange";

    // toggle full screen window class
    jQuery(document).on(screen_change_events, function () {
      if (jQuery.fullscreen.isFullScreen()) {
       /*
       elem.classList.add('full-screen-window');
        var iframe = document.getElementById('html5game') ? document.getElementById('html5game') : document.getElementById('swfgame');
        var iframeWidth = parseInt(iframe.width);
        var iframeHeight = parseInt(iframe.height);
        var windowWidth = parseInt(screen.width);
        var windowHeight = parseInt(screen.height) - 75;
        var xpbarPos = (windowHeight + 75 - iframeHeight) / 2 + iframeHeight + 10;
        $('.game-xp-bar-immerse-button').css('top', xpbarPos + "px");

        if ($("body").hasClass("game-scalable")) {
          if (iframeHeight > windowHeight) {
            var ratio = iframeHeight / windowHeight;
          } else {
            var ratio = windowHeight / iframeHeight;
          }

          // Calculating game width based on window height
          var gameWidth = iframeWidth * ratio;

          // apply new width and height with iframe and xp bar
          iframe.style.width = gameWidth + "px";
          iframe.style.height = windowHeight + "px";
          var xpbarPos = windowHeight + 10;
          $('.game-xp-bar-immerse-button').css('top', xpbarPos + "px");
        } else if ($("body").hasClass("game-full-screen")) { // apply new width and height with iframe and xp bar
          iframe.style.width = windowWidth + "px";
          iframe.style.height = windowHeight + "px";
          var xpbarPos = windowHeight + 10;
          $('.game-xp-bar-immerse-button').css('top', xpbarPos + "px");
        }
        */

        if (jQuery('body').hasClass('mobile-device')) {
          jQuery("#block-system-main #html5game").attr('src', jQuery('#playNowButton').attr('href'));
        }

        $("body").addClass('immersiveActive');
        elem.classList.add('full-screen-window');
        // add zoomed alert
        chkZoomValues();
        // Adjusted width and height of iframe game
        adjustWidthHeightGame();

      } else {
        if (jQuery('body').hasClass('mobile-device')) {
          jQuery("#block-system-main #html5game").removeAttr('src');
        }

        immersive_mode_exit_handler();

        $("body").removeClass('immersiveActive');
        elem.classList.remove('full-screen-window');
        // remove zoomed alert
        $('.zoomedalert').remove();
        $('#html5game').removeAttr("style");
        $('#swfgame').removeAttr("style");
        $('.game-xp-bar-immerse-button').removeAttr("style");
      }
    });
  }

  function adjustWidthHeightGame() {
    var iframe = document.getElementById('html5game') ? document.getElementById('html5game') : document.getElementById('swfgame');
    var iframeWidth = parseInt(iframe.width);
    var iframeHeight = parseInt(iframe.height);
    // var windowWidth = parseInt(screen.width);
    // var windowHeight = parseInt(screen.height) - 75;
    var windowWidth = parseInt($(window).width());
    var windowHeight = parseInt($(window).height());
    var xpbarPos = (windowHeight + 75 - iframeHeight) / 2 + iframeHeight + 10;
    $('.game-xp-bar-immerse-button').css('top', xpbarPos + "px");

    if ($("body").hasClass("game-scalable")) {
      if (iframeHeight > windowHeight) {
        var ratio = iframeHeight / windowHeight;
      } else {
        var ratio = windowHeight / iframeHeight;
      }

      // Calculating game width based on window height
      var gameWidth = iframeWidth * ratio;

      // apply new width and height with iframe and xp bar
      iframe.style.width = gameWidth + "px";
      iframe.style.height = windowHeight + "px";
      var xpbarPos = windowHeight + 10;
      $('.game-xp-bar-immerse-button').css('top', xpbarPos + "px");
    } else if ($("body").hasClass("game-full-screen")) { // apply new width and height with iframe and xp bar
      iframe.style.width = windowWidth + "px";
      iframe.style.height = windowHeight + "px";
      var xpbarPos = windowHeight + 10;
      $('.game-xp-bar-immerse-button').css('top', xpbarPos + "px");
    }
  }

  function adjustWidthHeightModalGame(is_resize) {
    var iframe = $('#immersiveModal').find('#html5game');
    var iframeWidth = parseInt(iframe.attr('width'));
    var iframeHeight = parseInt(iframe.attr('height'));

    var time_out = (is_resize === true) ? 500 : 0;
   // setTimeout(function(){

    var wdWidth = parseInt($(window).width());
    var wdHeight = parseInt($(window).height());

    var oTwdWidth = parseInt($(window).outerWidth());
    var oTwdHeight = parseInt($(window).outerHeight());

    var windowWidth = (oTwdWidth > wdWidth) ? oTwdWidth : wdWidth;
    var windowHeight = (oTwdHeight > wdHeight) ? oTwdHeight : wdHeight;

      if ($("body").hasClass("game-scalable")) {
        if (iframeHeight > windowHeight) {
          var ratio = iframeHeight / windowHeight;
        } else {
          var ratio = windowHeight / iframeHeight;
        }

        // Calculating game width based on window height
        var gameWidth = iframeWidth * ratio;

        // apply new width and height with iframe
        iframe.css("width", windowWidth);
        iframe.css("height", windowHeight);
      } else if ($("body").hasClass("game-full-screen")) {
        iframe.css("width", windowWidth);
        iframe.css("height", windowHeight);
      }
   // }, time_out);
  }

  // adjust game width/height if screen rotate from portrait to landscape
  window.addEventListener("resize", function () {
    if ($("body").hasClass("immersiveActive")) {
      adjustWidthHeightGame();
    }
    if ($("body").hasClass("isFullScreen")) {
      adjustWidthHeightGame();
    }
    if ($("body").find("#immersiveModal").length) {
      adjustWidthHeightModalGame(true);
    }
  }, false);

	var cmg_mmg_html = '';
	var cmg_mmg_swf_html = '';
	function attachModalHtml(elem, title) {
    var elem = document.getElementById('block-system-main');
    html = '<div id="immersiveModal" class="" style="display:none;" tabindex="-1" role="dialog" aria-labelledby="immersiveModalLabel" aria-hidden="true">';
    html += '<div class="modal-dialog">';
    html += '<div class="modal-content">';
    html += '<div class="modal-body">';
    html += '<div id="swfgamewrapper1">';
    //html += jQuery('#'+elem.id).find('#swfgamewrapper').html();
    html += '</div>';
    html += '</div>';
    html += '</div>';
    html += '</div>';
    html += '</div>';

    $('body').append(html);
    var gamewrapper = jQuery("#swfgamewrapper");
    jQuery('#immersiveModal .modal-body').html(gamewrapper);
    if(cmg_is_mobile_device() || (jQuery(".game-page-mobile .playNow").length && jQuery(".game-page-mobile .playNow").is(':visible') ) ) {
      sandbox = jQuery("#html5game").attr("sandbox");
      if (sandbox !== undefined) {
        sandbox = ' sandbox=\"' + sandbox + '\"';
      } else {
        sandbox = '';
      }
      newiframe = '<iframe style="display: none;" id="html5game" src="' + jQuery("#html5game").attr("src") + '" class="' + jQuery("#html5game").attr("class") + '" width="' + jQuery("#html5game").attr("width") + '" height="' + jQuery("#html5game").attr("height") + '" scrolling="no" marginwidth="0' + '" vspace="0" frameborder="0" hspace="0" marginheight="0"' + sandbox + '></iframe>';
      if(jQuery("#html5game").length) {
      	cmg_mmg_html = '<iframe id="html5game" src="' + jQuery("#html5game").attr("src") + '" class="' + jQuery("#html5game").attr("class") + '" width="' + jQuery("#html5game").attr("width") + '" height="' + jQuery("#html5game").attr("height") + '" scrolling="no" marginwidth="0' + '" vspace="0" frameborder="0" hspace="0" marginheight="0"' + sandbox + '></iframe>';
      }
      newswfiframe = '<iframe style="display: none;" id="swfgame" src="' + jQuery("#swfgame").attr("src") + '" class="' + jQuery("#swfgame").attr("class") + '" width="' + jQuery("#swfgame").attr("width") + '" height="' + jQuery("#swfgame").attr("height") + '" scrolling="no" marginwidth="0" vspac' + 'e="0" frameborder="0" hspace="0" marginheight="0"></iframe>';
      if(jQuery("#swfgame").length) {
      	cmg_mmg_swf_html = '<iframe id="swfgame" src="' + jQuery("#swfgame").attr("src") + '" class="' + jQuery("#swfgame").attr("class") + '" width="' + jQuery("#swfgame").attr("width") + '" height="' + jQuery("#swfgame").attr("height") + '" scrolling="no" marginwidth="0" vspac' + 'e="0" frameborder="0" hspace="0" marginheight="0"></iframe>';
      }
      //jQuery("#swfgamewrapper").html(newiframe);
      //if (checkIfFlashIsEnabled()) {
      //  jQuery("#swfgamewrapper").html(newswfiframe);
      //}
    }

  }
  function requestFullscreenModal(elem, title) {
		$("#immersiveModal").addClass('modal fade show full-screen-modal').css({"display":"block", "z-index":10000000});
    $('body').addClass('isModalPlay');
    $('#immersiveModal').find('#swfgamewrapper').show();
    if($('#html5game').length || cmg_mmg_html) {
    	//if(!cmg_mmg_attached) {
      	jQuery("#swfgamewrapper").html(cmg_mmg_html);
        if (checkIfFlashIsEnabled()) {
          jQuery("#swfgamewrapper").html(cmg_mmg_swf_html);
        }
        //cmg_mmg_attached = true;
    	//} else {
    	//  $('#html5game').show();
    	//}
    } else if(jQuery('#swfgame').length) {
      //jQuery('#swfgame').show();
      if (checkIfFlashIsEnabled()) {
        jQuery("#swfgamewrapper").html(cmg_mmg_swf_html);
      }
    }

    $('#immersiveModal').find('.close').click(function () {
      $("#immersiveModal").remove();
    });

    window.location.hash = "immersiveModal";
    $(window).on('hashchange', function (event) {
      if (window.location.hash != "#immersiveModal") {
        $("#immersiveModal").hide();
        if($('#html5game').length) {
        	$('#html5game').remove();
        } else if(jQuery('#swfgame').length) {
          jQuery('#swfgame').remove();
        }
        $('body').removeClass('isModalPlay');
      }
    });
    adjustWidthHeightModalGame(false);
  }
</script>

  <script type="deferjs">
    hide_preroll_ads = false;
    var cmg_active_anonymous_user = getCookie('cmg_active_anonymous_user');
    if (cmg_active_anonymous_user != null && !/0-chess/.test(window.location.pathname)) { // setCookie('cmg_active_anonymous_user', 'active', 30*60*1000);
    }
  </script>
  <div id="afg_container">
    <style type="text/css">
      .load-wrap {
        width: 100%;
      }
      .circle {
        display: inline-block;
        height: 15px;
        width: 15px;
        margin-right: 20px;
        background-color: #fc6e51;
        border-radius: 50%;
        -webkit-animation: afg_container_loading 1.6s infinite;
        -moz-animation: afg_container_loading 1.6s infinite;
        -o-animation: afg_container_loading 1.6s infinite;
        animation: afg_container_loading 1.6s infinite;
      }
      .load-wrap .circle:nth-of-type(1) {
        -webkit-animation-delay: 0.1s;
        -moz-animation-delay: 0.1s;
        -o-animation-delay: 0.1s;
        animation-delay: 0.1s;
        background: #f8eb13;
        margin: -20px 5px 40px 360px;
      }
      .load-wrap .circle:nth-of-type(2) {
        -webkit-animation-delay: 0.3s;
        -moz-animation-delay: 0.3s;
        -o-animation-delay: 0.3s;
        animation-delay: 0.3s;
        background: #33a2da;
        margin: -20px 5px 40px;
      }
      .load-wrap .circle:nth-of-type(3) {
        -webkit-animation-delay: 0.5s;
        -moz-animation-delay: 0.5s;
        -o-animation-delay: 0.5s;
        animation-delay: 0.5s;
        background: #ee3928;
        margin: -20px 5px 40px;
      }
      .load-wrap .circle:nth-of-type(4) {
        -webkit-animation-delay: 0.7s;
        -moz-animation-delay: 0.7s;
        -o-animation-delay: 0.7s;
        animation-delay: 0.7s;
        background: #51b747;
        margin: -20px 5px 40px;
      }
      /* Keyframes */
      @-webkit-keyframes afg_container_loading {
        0,
        100% {
          -webkit-transform: scale(0.0);
        }
        50% {
          -webkit-transform: scale(1.0);
        }
      }
      @-moz-keyframes afg_container_loading {
        0,
        100% {
          -moz-transform: scale(0.0);
        }
        50% {
          -moz-transform: scale(1.0);
        }
      }
      @-o-keyframes afg_container_loading {
        0,
        100% {
          -o-transform: scale(0.0);
        }
        50% {
          -o-transform: scale(1.0);
        }
      }
      @keyframes afg_container_loading {
        0,
        100% {
          transform: scale(0.0);
        }
        50% {
          transform: scale(1.0);
        }
      }
    </style>
    <div class="load-wrap">
      <script type="deferjs">
        // IE Detection and Version grabbing
        ie = false;
        if (navigator.appName == "Microsoft Internet Explorer") {
          ie = true;
          var ua = navigator.userAgent;
          var re = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
          if (re.exec(ua) != null) {
            ieVersion = parseInt(RegExp.$1)
          }
        }
        if (ie && ieVersion <= 9) {
          $('<h3 style="margin:20px 20px; font-size: 20px">Just a moment while your game loads...</h3>' + signupContainerTop).prependTo('.load-wrap');
        } else {
          $('<h3 style="margin:20px 20px 0 0; font-size: 20px">Just a moment while your game loads</h3><div class="circle"></div><div class="circle"></div><div class="circle"></div><div class="circle"></div>' + signupContainerTop).prependTo('.load-wrap');
        }
      </script>
    </div>
  </div>
  <!--Start of Preloader call -->
  <div id="afg_preloader">
    <div id="container123">
      <div id="videoplayer">
        <video id="content123" style="height: 1px; width: 640px;">
          <source src="//www.coolmathgames.com/sites/default/files/adtesting/DummyVideo.mov"></source>
      </video>
      <div id="adcontainer" style="height: 480px; width: 640px;"></div>
    </div>
  </div>
  <!-- Continue to Game container with timer -->
  <div id="continue-container" style="display:none">
    <div id="img-button-container">
      <div id="img-button-self" class="img-button">
        <input type="image" src="/themes/custom/cmatgame/images/coolmathgames_skip-the-ads-button3a.png" alt="Submit" class="skip-ad-btn" onclick="redirectpremium();">
      </div>
      <div class="continue-lnk-container-rsection">
        <div id="continue-link">Continue in </div>
        <div id="timer_div" style="margin-left:5px;">15</div>
      </div>
    </div>
  </div>


  <script type="deferjs" src="//cdn.intergi.com/prebid/cmg-prebid.js"></script>
  <script type="deferjs" src="//cdn.intergi.com/cmg/cmg-headerbidding.js"></script>
  <script type="deferjs" src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
  <script type="deferjs" src="/modules/custom/cmatgame_ads_analytics/js/adblocker.js"></script>
  <script type="deferjs">
      function redirectpremium(){
       //location.href= "/premium-access/";
       event.preventDefault();
       var sLeg = get_premium_access_leg_desc('2efa4bc4');
       var path = '/premium-access/2efa4bc4';
       if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
         path = '/premium-access/bd07c4e6';
         sLeg = get_premium_access_leg_desc('bd07c4e6');
       }
       trackEvent('Premium Subscription - '+sLeg, "Preroll - Skip Ads Go VIP Now - button clicked", document.title);
       window.location.href = window.location.protocol + '//' + window.location.host + path + get_signup_abtest_variant_3();
      }

    displayAdblockOverlay = false;
    if (document.getElementById('randomAdBlockDiv') == null) { // cmgpbjs is defined in ads, so if it undefined means, adblocker is detected
      displayAdblockOverlay = true;
    }


    /**
     * Handles user interaction and creates the player and ads controllers.
     */
    var pagepreRollType = '';
    var Application = function (displayAds, adTagUrl, preRollType) {
      if(typeof preRollType == "undefined") { //desktop
        preRollType = "";
      } else {
        pagepreRollType = preRollType;
      }
      this.playing_ = false;
      this.adsActive_ = false;
      this.adsDone_ = false;
      if (typeof displayAds === 'undefined' || displayAds === null) {
        this.displayAds = true;
      } else {
        this.displayAds = displayAds;
      }
      this.adTagUrl_ = adTagUrl;

      this.videoPlayer_ = new VideoPlayer(preRollType);
      //&& (typeof targeted_state === 'undefined' || watchAdtoUnlockGameIsClicked == "true")
      if(jQuery(window).width() >= 610 && jQuery(window).height() >= 610) {
        this.videoPlayer_.width = 640;
        this.videoPlayer_.height = 480;
      } else {
        this.videoPlayer_.width = 300;
        this.videoPlayer_.height = 250;
      }
      if (this.displayAds) { // console.log("Preload ads for non subscription time games");
        this.ads_ = new Ads(this, this.videoPlayer_);
        // Adx Preroll Tag with fallback display Ad The user clicked/tapped - inform the ads controller that this code is being run in a user action thread.
        this.ads_.initialUserAction();
        // At the same time, initialize the content player as well. When content is loaded, we'll issue the ad request to prevent it from interfering with the initialization. See
        // https://developers.google.com/interactive-media-ads/docs/sdks/html5/v3/ads#iosvideo for more information.
        this.videoPlayer_.preloadContent(this.bind_(this, this.loadAds_));
        this.adsDone_ = true;
      } else {
        // console.log("Do not preload ads for Get Ad Free Games user");
        // removePrerollAndDisplayGame();
        jQuery(document).ready(function () {
          display_game_progressbar(gameId);
        });
      }
    };

    Application.prototype.bind_ = function (thisObj, fn) {
      return function () {
        fn.apply(thisObj, arguments);
      };
    };

    Application.prototype.loadAds_ = function () {
      this.ads_.requestAds(this.adTagUrl_);
    };

    /**
           * Handles video player functionality.
           */
    var VideoPlayer = function (preRollType) {
      this.contentPlayer = document.getElementById(preRollType+'content123');
      this.adContainer = document.getElementById(preRollType+'adcontainer');
      this.videoPlayerContainer_ = document.getElementById(preRollType+'videoplayer');
      this.width = 640;
      this.height = 480;
    };

    VideoPlayer.prototype.preloadContent = function (contentLoadedAction) {
      contentLoadedAction();
    };
    VideoPlayer.prototype.play = function () {
      this.contentPlayer.play();
    };

    VideoPlayer.prototype.pause = function () {
      this.contentPlayer.pause();
    };

    /**
     * Shows how to use the IMA SDK to request and display ads.
     */
    var Ads = function (application, videoPlayer) {
      this.application_ = application;
      this.videoPlayer_ = videoPlayer;
      this.customClickDiv_ = document.getElementById('customClick');
      this.contentCompleteCalled_ = false;
      google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);
      // Call setLocale() to localize language text and downloaded swfs google.ima.settings.setLocale('fr');
      this.adDisplayContainer_ = new google.ima.AdDisplayContainer(this.videoPlayer_.adContainer, this.videoPlayer_.contentPlayer, this.customClickDiv_);
      this.adsLoader_ = new google.ima.AdsLoader(this.adDisplayContainer_);
      this.adsManager_ = null;

      this.adsLoader_.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, this.onAdsManagerLoaded_, false, this);
      this.adsLoader_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this.onAdError_, false, this);
    };

    // On iOS and Android devices, video playback must begin in a user action. AdDisplayContainer provides a initialize() API to be called at appropriate time. This should be called when the user clicks or taps.
    Ads.prototype.initialUserAction = function () {
      this.adDisplayContainer_.initialize();
      this.videoPlayer_.contentPlayer.load();

    };

    Ads.prototype.requestAds = function (adTagUrl) {
      var adsRequest = new google.ima.AdsRequest();
      adsRequest.adTagUrl = adTagUrl;
      adsRequest.linearAdSlotWidth = this.videoPlayer_.width;
      adsRequest.linearAdSlotHeight = this.videoPlayer_.height;
      adsRequest.nonLinearAdSlotWidth = this.videoPlayer_.width;
      adsRequest.nonLinearAdSlotHeight = this.videoPlayer_.height;
      this.adsLoader_.requestAds(adsRequest);
    };

    Ads.prototype.onAdsManagerLoaded_ = function (adsManagerLoadedEvent) { // console.log('Ads loaded.');
      var adsRenderingSettings = new google.ima.AdsRenderingSettings();
      // adsRenderingSettings.loadVideoTimeout = 4000;
      adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete = true;
      this.adsManager_ = adsManagerLoadedEvent.getAdsManager(this.videoPlayer_.contentPlayer, adsRenderingSettings);
      this.adsManager_.setVolume(0);
      this.processAdsManager_(this.adsManager_);
    };

    Ads.prototype.processAdsManager_ = function (adsManager) {
      if (adsManager.isCustomClickTrackingUsed()) {
        this.customClickDiv_.style.display = 'table';
      }
      // Handle errors.
      adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this.onAdError_, false, this);
      var events = [
        google.ima.AdEvent.Type.ALL_ADS_COMPLETED,
        google.ima.AdEvent.Type.COMPLETE,
        google.ima.AdEvent.Type.FIRST_QUARTILE,
        google.ima.AdEvent.Type.LOADED,
        google.ima.AdEvent.Type.MIDPOINT,
        google.ima.AdEvent.Type.STARTED,
        google.ima.AdEvent.Type.THIRD_QUARTILE,
        google.ima.AdEvent.Type.USER_CLOSE
      ];
      for (var index in events) {
        adsManager.addEventListener(events[index], this.onAdEvent_, false, this);
      }

      var initWidth,
        initHeight;

      initWidth = this.videoPlayer_.width;
      initHeight = this.videoPlayer_.height;

      adsManager.init(initWidth, initHeight, google.ima.ViewMode.NORMAL);

      adsManager.start();
    };
    Ads.prototype.onAdEvent_ = function (adEvent) {
      if (adEvent.type == google.ima.AdEvent.Type.LOADED) {
        var ad = adEvent.getAd();
      	//hide the dummy video
        if(jQuery("#content123").length && jQuery("#content123").is(":visible")) {
        	jQuery("#content123").hide();
        } else if(jQuery("#m-content123").length && jQuery("#m-content123").is(":visible")) {
        	jQuery("#m-content123").hide();
        } else if(jQuery("#r-content123").length && jQuery("#r-content123").is(":visible")) {
        	jQuery("#r-content123").hide();
        }
      }
      if ((typeof truex_overlay_preroll_ad_display === 'undefined' || typeof truex_overlay_preroll_ad_display !== 'undefined' && !truex_overlay_preroll_ad_display) && adEvent.type == google.ima.AdEvent.Type.COMPLETE) {
        if(pagepreRollType == '') {
          removePrerollAndDisplayGame();
        }
        jQuery(document).ready(function () {
          display_game_progressbar(gameId);
        });
      }
      if ((typeof truex_overlay_preroll_ad_display === 'undefined' || typeof truex_overlay_preroll_ad_display !== 'undefined' && !truex_overlay_preroll_ad_display) && adEvent.type == google.ima.AdEvent.Type.ALL_ADS_COMPLETED) {
        if(pagepreRollType == '') {
          removePrerollAndDisplayGame();
        }
        jQuery(document).ready(function () {
          display_game_progressbar(gameId);
        });
      }
      if ((typeof truex_overlay_preroll_ad_display === 'undefined' || typeof truex_overlay_preroll_ad_display !== 'undefined' && !truex_overlay_preroll_ad_display) && adEvent.type == google.ima.AdEvent.Type.USER_CLOSE) {
        if(pagepreRollType == '') {
          removePrerollAndDisplayGame();
        }
        jQuery(document).ready(function () {
          display_game_progressbar(gameId);
        });
      }
      if (typeof truex_overlay_preroll_ad_display !== 'undefined' && truex_overlay_preroll_ad_display && (adEvent.type == google.ima.AdEvent.Type.SKIPPED || adEvent.type == google.ima.AdEvent.Type.USER_CLOSE)) {

        jQuery('#big-screen-signup-container-id').html("");
        jQuery('#big-screen-truex-overlay').remove();
        cmg_start_game_full_screen('truex');
      } else if (typeof truex_overlay_preroll_ad_display !== 'undefined' && truex_overlay_preroll_ad_display && (adEvent.type == google.ima.AdEvent.Type.ALL_ADS_COMPLETED || adEvent.type == google.ima.AdEvent.Type.COMPLETE)) {
        if (typeof bs_preroll_timer !== 'undefined' && bs_preroll_timer > 0) { // console.log("Bigscreen pre-roll ad event "+ adEvent.type + " set bs_preroll_timer to 0 from "+bs_preroll_timer);
          bs_preroll_timer = 0;
        }
        else {
        // console.log("Bigscreen pre-roll ad event "+ adEvent.type + " bs_preroll_timer is 0 or undefined");
        }
      }
    };
    Ads.prototype.onAdError_ = function (adErrorEvent) {
      if (this.adsManager_) {
        this.adsManager_.destroy();
      }
      if(pagepreRollType == '') {
        removePrerollAndDisplayGame();
      }
      jQuery(document).ready(function () {
        display_game_progressbar(gameId);
      });
      // TODO remove the ad slot and display the game this.application_.resumeAfterAd();
      // TODO UNCOMMENT BELOW removePrerollAndDisplayGame();
    };

    function displayAdBlock(deviceType) {
      // subscription Paywall for Adblock users
      // Top of Ad Block Div
      var adBlockPremiumHeadline = '<span class="blue-headline-txt">Allow Ads</span> or <span class="yellow-headline-txt">Join!</span>';
      var adBlockSubHeadline = '<span class="blue-headline-txt">Turn Off Your Ad Blocker to  Keep Playing</span>';
      // Bottom of Ad Block Div
      var adBlockBottomPromo = '<span class="yellow-headline-txt">Or Go VIP Ad-Free Now</span>';
      var adBlockPromoPricing = '$5.99/month membership. Cancel Anytime';
      // Button Text
      var adBlockPremiumButton = 'Get Ad-Free';
      clearInterval(intervalId);
      var adblockTarget = ".field-game";
      if(deviceType == "" || deviceType == "desktop") {
        console.log("displayAdBlock desktop");
        jQuery("#afg_container").hide();
        jQuery("#continue-container").hide();
      } else { //mobile
        console.log("displayAdBlock mobile");
        adblockTarget = ".game-image.my-4";
        jQuery(".game-page-mobile").addClass("ad-blocked");
        jQuery(".game-page-mobile .game-image.my-4").html("");
      }
      doNotDisplayPrerollTimer = true;

      jQuery(adblockTarget).append('<div class="blocker-detected-2">' +
      '<div class="row blocker-detected-top-content">' +
      '<h2>' + adBlockPremiumHeadline + '</h2>' +
      '<h3>' + adBlockSubHeadline + '</h3>' +
      '<div class="main-block-content">' +
      '<div class="left-content-bullets">' +
      '<ul>' +
      '<li><div class="numberCircle">1</div><p>Click the Ad Blocker extension icon in the upper<br>right area of your browser window.</p></li>' +
      '<li><div class="numberCircle">2</div><p>Choose Don\t run on this domain or similar <br>option to disable it for all Coolmath Pages.</p></li>' +
      '<li><div class="numberCircle">3</div><p>Refresh the Page</p><br><a class="adblock-more-info-link" href="/adblock-faq" target="_blank">Having problems or need more info? Click here</a></li>' +
      '</ul>' +
      '</div>' +
      '<div class="right-content-image"><img src="/sites/default/files/disable-adblocker.png" alt="disable ad blocker instructions" /></div>' +
      '</div>' + '</div>' + '<div class="row blocker-detected-bottom-content">' + '<div clas="left-bottom-content">' +
      '<h3>' + adBlockBottomPromo + '</h3>' +
      '<h4>' + adBlockPromoPricing + '<h4>' +
      '</div>' +
      '<div class="right-content-button-container"><div class="btn-container"><a class="btn sign-up vip-btn" id="adblock_join_now_promo_handler" href="premium-access/791c674d"><span>' + adBlockPremiumButton + '</span></a></div></div>' +
      '</div>' +
      '</div>');
    }

    var cmatgame_subscriber = getCookie('cmg_sx');
    var validSubscriber = false;
    if (typeof cmatgame_subscriber !== 'undefined' && cmatgame_subscriber !== null) {
      validSubscriber = true;
    }
    if(getCookie("cmg_wl") !== null) {
      validSubscriber = true;
    }
    var validReferer = false;
    if (document.referrer.match("google.com") !== null || document.referrer.match("yahoo.com") !== null || document.referrer.match("bing.com") !== null) {
      validReferer = true;
    }
    var application = null;

    // display Ads to anonymous users the time from 7am to 13pm, display ads to anonymous users  from 13pm to 11:59pm and 00 to 7am only if the user is not from New York city
    // TODO -->  Need to add day of the week for school hours logic, day < 6
    if (validSubscriber) { // valid subscriber do not display Preroll Ads
      var adTagUrl = "";
      // retreive user Progress
      retrieveUserProgress();
      removePrerollAndDisplayGame();
      jQuery(document).ready(function () {
        display_game_progressbar(gameId);
      });

    } else if (!validSubscriber && document.getElementById('randomAdBlockDiv') == null) {
        //TODO when schools starts add this logic ((schoolHours && parseInt(sessionStorage.getItem('sessionGamesPlayed') || 0) > 3) || !schoolHours)
        if(cmg_is_mobile_device() || document.documentElement.clientWidth <=950) { //mobile or responsive mobile view
          displayAdBlock("mobile");
        } else {
          displayAdBlock("desktop");
        }
    } else if( typeof bigScreenPromoGame != "undefined" && bigScreenPromoGame == true && (gamesPlayed == 2 || gamesPlayed == 8) && (flashemulation != 0)) {
	  /**
      *** Big Screen Promo and check for every 3rd refresh
      ***/
      jQuery("#afg_container").hide();
      jQuery('#full-screen-modal').show();
      jQuery('#big-screen-container').show();
      jQuery("#videoplayer").hide();
      if (jQuery('#right-rail-big-screen-promo').length) {
        document.getElementById('right-rail-big-screen-promo').style.display = 'block';
        jQuery('#right-rail-big-screen-promo').show();

      }

      // show bigscreen button
      $(document).ready(function () {
        jQuery("#continue-container").hide();
        if (jQuery('.immerse-button').length) { // console.log("BIG SCREEN display big screen button for promo overlay");
          jQuery('#no-flash-overlay').hide();
          jQuery('#swfgamewrapper').hide();
        }
        else {
        // console.log("BIG SCREEN cannot display big screen button for promo overlay as immerse button is not available");
        }
      });

	} else if (typeof AdfreeMktCmpGame != "undefined" && AdfreeMktCmpGame == true && (gamesPlayed == 2 || gamesPlayed == 8) && (flashemulation != 0)){
			/**
      *** Add free marketing promo Promo and check for every 3rd refresh
      ***/
      jQuery("#afg_container").hide();
      jQuery('#id-adfree-marketing-campaign').show();
      jQuery("#videoplayer").hide();
      if (jQuery('#right-rail-big-screen-promo').length) {
        document.getElementById('right-rail-big-screen-promo').style.display = 'block';
        jQuery('#right-rail-big-screen-promo').show();

      }

      // show bigscreen button
      $(document).ready(function () {
        if (jQuery('.immerse-button').length) {
          jQuery('#no-flash-overlay').hide();
          jQuery('#swfgamewrapper').hide();
        }
      });

    } else if (!validReferer && ( typeof supportCMG === 'boolean' && supportCMG === true  ) && (gamesPlayed == 2 || gamesPlayed == 8) && (flashemulation != 0) && !cmgDefaultGameUrl.test(location.pathname)) { //subscription paywall for Support Game

      clearInterval(intervalId);
      jQuery("#afg_container").hide();
      jQuery(".title-instructions").remove();
      jQuery(".body-instructions").remove();
      jQuery(".game-xp-bar-immerse-button").remove();
      jQuery("#continue-container").hide();

      if (typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
        var planToSubscription = 'd61242ac';
      } else {
        var planToSubscription = '0735a1f2';
      } // logged in free user
      doNotDisplayPrerollTimer = true;
      var htmlPopOver = '<div id="id-cmg-default" class="cmg-default-marketing-campaign" style="display:block;"> <div class="big-screen-head"> <div class="bs-head-logo"><img src="/themes/custom/coolmath/assets/images/full-screen/cool-math-logo.png"></div><div class="bs-head-txt">Get Premium: The Best Gaming Experience</div><div class="bs-close-button"><a href="#" class="bs-close-btn" onclick="supportCMG_overlay_promo_close_handler(); return false;">X</a></div></div><div class="mid-big-section-head cmg-default-mid-section-marketing-campaign"> <div class="mid-img-container"> <div> <div class="img-container-cmg-default"> <div class="no-waiting-txt"> Personalized <br> Premium <br>Profile</div><div class="image-bs-sample"> <img class="img-cmgdefault" src="/themes/custom/coolmath/assets/images/subscriptions/premium-avatars-small.png"> <br><span class="red-txt">Access All <br>premium avatars </div><div class="image-bs-sample"> <img class="img-cmgdefault" src="/themes/custom/coolmath/assets/images/subscriptions/premium-themes-small.png"> <br><span class="offwhite-txt">Full selection <br>of themes </span></div><div class="image-bs-sample"> <img class="img-cmgdefault" src="/themes/custom/coolmath/assets/images/subscriptions/custom-nicknames-small.png"> <br><span class="blue-txt">Custom <br>Nickname </span></div></div></div><div> <div class="img-container-cmg-default"> <div class="no-waiting-txt"> Distraction <br> Free Gaming & <br>Unlimited <br> Creativity</div><div class="image-bs-sample"> <img class="img-cmgdefault" src="/themes/custom/coolmath/assets/images/subscriptions/big-screen-small.png"> <br><span class="light-blue-txt">Big <br>Screen </span></div><div class="image-bs-sample"> <img class="img-cmgdefault" src="/themes/custom/coolmath/assets/images/subscriptions/ad-free-small.png"> <br><span class="green-txt">Ad-Free<br> Experience </span></div><div class="image-bs-sample"> <img class="img-cmgdefault" src="/themes/custom/coolmath/assets/images/subscriptions/unlimited-playlists-small.png"><br><span class="white-txt"> Unlimited <br>Playlist </span></div></div></div><div class="better-focus-container "> <div class="all-excl-txt">And More Exclusive features for Premium Members!</div></div></div><div class="marketing-cmpn-footer"> <div class="bs-footer-link"> <a href="/premium-access/' + planToSubscription + '" target="_blank" onclick="cmgDefault_overlay_promo_signup_handler("Get CMGDefault Marketing screen mode - overlay button clicked"); return false;"><img src="/themes/custom/coolmath/assets/images/full-screen/get-premium-btn.png"></a> </div><div class="bs-learn-more"><a href="/premium-benefits" target="_blank" onclick="cmgDefault_overlay_promo_more_handler(); return false;" class="bs-lrn-more">Learn More</a></div><div class="bs-no-thks"><a href="" class="bs-lnk-lrn-more" onclick="supportCMG_overlay_promo_close_handler(); return false;">No, Thanks. I just want to play games right now.</a> </div></div></div></div>';
      jQuery(".field-game").append(htmlPopOver);
      jQuery("#videoplayer").hide();
      // localStorage.setItem("userPlayedGames"+currentMonth+currentYear,userPlayedGames); localStorage.setItem("userPlayedGames",userPlayedGames);

  } else if( typeof playListMktCmpGame != "undefined" && playListMktCmpGame == true && (gamesPlayed == 2 || gamesPlayed == 8) && (flashemulation != 0)){
	    /**
      *** Add free marketing promo Promo and check for every 3rd refresh
      ***/
     if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
        var planStripString = '4c044106';
      } else {
        var planStripString = '39980b12';
      } // logged in free user

      jQuery("#afg_container").hide();
      var playlistPopoverHtml = '<div id="id-playlist-marketing-campaign" class="playlist-marketing-campaign" > <div class="big-screen-head"> <div class="bs-head-logo"><img src="/themes/custom/coolmath/assets/images/full-screen/cool-math-logo.png"></div> <div class="bs-head-txt">Get Premium for Unlimited Playlists</div> <div class="bs-close-button"><a href="#" class="bs-close-btn" onclick="playlist_marketing_overlay_promo_close_handler(); return false;">X</a></div> </div> <div class="mid-big-section-head adfree-mid-section-marketing-campaign"> <div class="mkt-container-co"> <div class=" para-1 mkt-container1"><img class="freind-icon" src="/themes/custom/coolmath/assets/images/subscriptions/Playlist_friendst-icon.png"></div> <div class="ad-free-txt txt-1">Collect, Organize and share!</div> <div class="para-4 mkt-container1"><img class="gift-icon" src="/themes/custom/coolmath/assets/images/subscriptions/Playlist_best-games-youve-never-heard-of.png"></div> </div> <div class="mkt-container-co"> <div class=" para-2 mkt-container1"><img class="cantstop-icon" src="/themes/custom/coolmath/assets/images/subscriptions/Playlist-cant-stop-playing-icon.png"></div> <div class="ad-free-txt txt-2">The games you want to live in <br> The Games that make you crazy </div> <div class="para-4 mkt-container1"><img class="fav-icon" src="/themes/custom/coolmath/assets/images/subscriptions/Playlist-favorites-icon.png"></div> </div> <div class="mkt-container-co"> <div class="para-3 mkt-container1"><img class="playhard-icon" src="/themes/custom/coolmath/assets/images/subscriptions/Playlist_hard-but-fun.png"></div> <div class="ad-free-txt txt-3">The games you love with your friends</div> <div class="para-3 mkt-container1 "><img class="eat-icon" src="/themes/custom/coolmath/assets/images/subscriptions/Playlist_want-to-eat-icon.png"></div> </div> <div class=""> <img src="/themes/custom/coolmath/assets/images/subscriptions/playlist_promo_banner.png"> </div> <div class="marketing-cmpn-footer"> <div class="bs-footer-link"> <a href="/premium-access/' + planStripString + '" target="_blank" onclick="playlist_marketing_overlay_promo_signup_handler(); return false;"><img src="/themes/custom/coolmath/assets/images/full-screen/get-premium-btn.png"></a> </div> <div class="bs-learn-more"><a href="/premium-benefits" target="_blank" onclick="playlist_marketing_overlay_promo_more_handler(); return false;" class="bs-lrn-more">Learn More</a></div> <div class="bs-no-thks"><a href="" class="bs-lnk-lrn-more" onclick="playlist_marketing_overlay_promo_close_handler(); return false;">No, Thanks. I just want to play games right now.</a> </div> </div> </div> </div>';
      jQuery("#playlist-marketing-container-id").html(playlistPopoverHtml);
      jQuery("#videoplayer").hide();

      // show bigscreen button
      $(document).ready(function () {
        if (jQuery('.immerse-button').length) {
          jQuery('#no-flash-overlay').hide();
          jQuery('#swfgamewrapper').hide();
        }
      });

    } else if ((drupalSettings.cmatgame.swfembed && !checkIfFlashIsEnabled()) || getCookie('cmg_schwl') !== null || typeof cmg_no_ads !== 'undefined' || (! validSubscriber && schoolHours) || (!schoolHours && !watchAdtoUnlockGame && !displayAdblockOverlay && !supportCMG && !premiumAvatarGame)) { // school hours
      cmg_gdpr_check = getCookie("GDPR");
      var cmg_gdpr_first_check = getCookie("GDPR_First");
      var cmg_gdpr_reject_check = getCookie("GDPR_Reject");
      // remove ads for first party cookies or reject all cookies is present along with GDPR cookie
      if (cmg_gdpr_check !== null && (cmg_gdpr_first_check != null || cmg_gdpr_reject_check !== null)) {
        var adTagUrl = "";
        application = new Application(false, adTagUrl);
      } else if (getCookie('cmg_schwl') !== null || typeof cmg_no_ads !== 'undefined' || (drupalSettings.cmatgame.swfembed && !checkIfFlashIsEnabled())) {
        removePrerollAndDisplayGame();
        jQuery(document).ready(function () {
          display_game_progressbar(gameId);
        });
      } else if ((drupalSettings.cmatgame.swfembed && !checkIfFlashIsEnabled()) || getCookie('cmg_schwl') !== null || typeof cmg_no_ads !== 'undefined' || (!validSubscriber && schoolHours) || (!schoolHours && !watchAdtoUnlockGame && !displayAdblockOverlay && !supportCMG && !premiumAvatarGame)) {
      //school hours
        cmg_gdpr_check = getCookie("GDPR");
        var cmg_gdpr_first_check = getCookie("GDPR_First");
        var cmg_gdpr_reject_check = getCookie("GDPR_Reject");
        // remove ads for first party cookies or reject all cookies is present along with GDPR cookie
        if (cmg_gdpr_check !== null && (cmg_gdpr_first_check != null || cmg_gdpr_reject_check !== null)) {
          var adTagUrl = "";
          application = new Application(false, adTagUrl);
        } else {
          /* Playwire video ad unit */
          //new desktop preroll invocation
          if(!cmg_is_mobile_device() && (!jQuery(".game-page-mobile").length || jQuery(".game-page-mobile").is(':hidden'))) {
          	displayPrerollAd_Desktop();
          }
        }

        if (!/0-chess/.test(window.location.pathname)) {
          //setCookie('cmg_active_anonymous_user', 'active', 30*60*1000);
        }
      } else if (!validSubscriber && (watchAdtoUnlockGame || displayAdblockOverlay || supportCMG || premiumAvatarGame) && getCookie('cmg_editor') === null) {
        //if user comes from google dont show the subscription paywall
        var ref = document.referrer;
      }
      if (!/0-chess/.test(window.location.pathname)) { // setCookie('cmg_active_anonymous_user', 'active', 30*60*1000);
      }
    } else if (!validReferer && premiumAvatarGame && (gamesPlayed == 2 || gamesPlayed == 8)) {
        //premiumAvatar promo games
        supportCMG = false;
        clearInterval(intervalId);
        jQuery("#afg_container").hide();
        jQuery(".title-instructions").remove();
        jQuery(".body-instructions").remove();
        jQuery("#continue-container").hide();
        doNotDisplayPrerollTimer = true;
        if (getCookie('cmg_fx') !== null && getCookie('cmg_sx') == null) {
          var planToSubscription = '67361110';
        } else {
          var planToSubscription = '553bdf22';
        }

        jQuery(".field-game").append('<div class="game-overlay-watch-or-join  premium-avatar" style="height:555px;">' +
        '<div class="row overlay-logo-container">' +
        '<img src="/themes/custom/cmatgame/logo.png" class="overlay-logo" />' +
        // '<div class="container">'+
        // '<h2 class="watch-join-top"><span class="watch-headline">WATCH</span> OR <span class="join-headline">JOIN</span></h2>'+
        // '</div>'+
          '</div>' +
          '<div class="row premium-avatar-content">' +

          '<div class="row top-promo-text premium-avatar-headline"><h4 class="get-premium">Love The games? Get the avatars!</h4></div>' +

          '<img style="width:100%;" src="/sites/default/files/premium-avatar-promos/premium-avatar-overlay-1.png" />' +

          '<div class="premium-avatar-btn-container"> <a href="/premium-access/' + planToSubscription + '" target="_blank" onclick="cmgDefault_overlay_promo_signup_handler("Get Premium Avatar screen mode - overlay button clicked"); return false;"><img src="/themes/custom/coolmath/assets/images/full-screen/get-premium-btn.png"></a>' +
          '<div class="learn-more-text"><a class="learn-more-text-link" href="https://www.coolmathgames.com/premium-benefits" target="_blank"> Learn More</a></div>' +
          '<div class="no-thanks-text no-thanks-text-premium-avatar"><a href="javascript:premium_avatar_continue_to_game_handler();"> No, thanks. I just want to play games right now.</a></div>' +
          '</div></div>' +
          '</div>'
          );
        jQuery("#videoplayer").hide();

      } else if (!validReferer && watchAdtoUnlockGame) { //subscription paywall for WatchAd to Unlock Game
        //block anonymous users for New York City from 0-7am and 13pm to 11:59pm
        var watchAdHeadline = 'WATCH TO PLAY';
        var watchAdParagraphText = 'Watch a video to unlock <br> this game.';
        var watchAdButtonText = 'WATCH NOW';
        var joinNowHeadline = 'JOIN TO PLAY';
        var joinNowParagraphText = '$5.99/month membership<br>Cancel Anytime';
        var joinNowButtonText = 'Buy VIP Now';

        clearInterval(intervalId);
        jQuery("#afg_container").hide();
        jQuery(".title-instructions").remove();
        jQuery(".body-instructions").remove();
        jQuery("#continue-container").hide();
        doNotDisplayPrerollTimer = true;
        jQuery(".field-game").append('<div class="game-overlay-watch-or-join">' + '<div class="row">' +
        // '<div class="container">'+
        // '<h2 class="watch-join-top"><span class="watch-headline">WATCH</span> OR <span class="join-headline">JOIN</span></h2>'+
        // '</div>'+
          '</div>' +
          '<div class="row watch-join-content">' +
          '<div class="watch-to-play-container">' +
          '<div class="watch-to-play"><h3>' + watchAdHeadline +
          '</h3><div class="overlay-paragraph-text">' + watchAdParagraphText +
          '</div></div>' + '<div class="btn-container"><a class="btn btn-watch" href="javascript:unlock_now_promo_handler();">' + watchAdButtonText + '</a></div>' +
          '</div>' + '<div class="hr-line">&nbsp;</div>' +
          '<div class="vip-membership-container">' +
          '<div class="watch-to-play"><h3>' + joinNowHeadline + '</h3><div class="overlay-paragraph-text">' + joinNowParagraphText + '</div></div>' +
          '<div class="btn-container"><a class="btn sign-up vip-btn" id="join_now_promo_handler" href="/premium-access/849ef809">' + joinNowButtonText + '</a></div>' +
          '</div>' +
          '</div>' +
          '</div>');

        jQuery("#videoplayer").hide();
        //localStorage.setItem("userPlayedGames"+currentMonth+currentYear,userPlayedGames); localStorage.setItem("userPlayedGames",userPlayedGames);
      } else {
        var adTagUrl = "";
        application = new Application(false, adTagUrl);
        if (typeof userPlayedGames !== 'undefined') {
          localStorage.setItem("userPlayedGames", userPlayedGames); // lifetime limit
        }
      }


    //New desktop preroll ad
    function displayPrerollAd_Desktop() {
      jQuery('.game-progress-status').hide();
      var adTagUrl = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/137548614/1023174/71134/1023174-71134-video&description_url=https%3A%2F%2Fwww.coolmathgames.com%2F&env=vp&impl=s&correlator=&tfcd=0&npa=0&gdfp_req=1&output=vast&sz=640x480&unviewed_position_start=1';
      jQuery("#continue-container").show();
      jQuery("#continue-container").append(signupContainerBottom);
      var swf_game_url = jQuery("#swfgame").attr("src");
      /*
      adTagUrl = 'https://pubads.g.doubleclick.net/gampad/ads?' +
      'sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&' +
      'impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&' +
      'cust_params=deployment%3Ddevsite%26sample_ct%3Dlinear&correlator=';
      application = new Application(true, adTagUrl);
      */

      if (typeof swf_game_url !== 'undefined' && !checkIfFlashIsEnabled()) {
        application = new Application(false, adTagUrl);
      } else {
        if (typeof window.PW_CMG != "undefined") {
          var auctionCallback = function (displayAds, videoUrl) {
            application = new Application(displayAds, videoUrl);
          };
          window.PW_CMG.startAuction(auctionCallback);
          console.log("Desktop preroll: window.PW_CMG.startAuction....");
        } else { // adblock
          application = new Application(false, adTagUrl);
        }
      }

    }
  </script>
</div>

<script type="deferjs">
  function displayMobilePrerollAd() {

    var cmatgame_subscriber = getCookie('cmg_sx');
    var validSubscriber = false;
    if (typeof cmatgame_subscriber !== 'undefined' && cmatgame_subscriber !== null) {
      validSubscriber = true;
    }
    var userVisitedGamePageCount = localStorage.getItem("userVisitedGamePageCount");
    if (userVisitedGamePageCount == null) {
      userVisitedGamePageCount = 1;
      localStorage.setItem("userVisitedGamePageCount", userVisitedGamePageCount);
      localStorage.setItem("userVisitedGamePageLastAccessTime", Date.now());
    } else if (userVisitedGamePageCount != null) {
      var userVisitedGamePageLastAccessTime = localStorage.getItem("userVisitedGamePageLastAccessTime");

      currentTime = Date.now();
      var lastAccessTime = localStorage.getItem("userVisitedGamePageLastAccessTime");
      if (lastAccessTime != null) {
        if (currentTime - lastAccessTime > 1800000) { // if user comes back after 30 minutes then make the user as coming first time
          userVisitedGamePageCount = 1;
          localStorage.setItem("userVisitedGamePageCount", userVisitedGamePageCount);
        } else {
          userVisitedGamePageCount++;
          localStorage.setItem("userVisitedGamePageCount", userVisitedGamePageCount);
        }
      }
      localStorage.setItem("userVisitedGamePageLastAccessTime", currentTime);
    }
    // preroll ads
    var prerollUrls = /0\-testing/;

    // display preroll ads only on 2nd,4th, 6th visits of any game page
    // userVisitedGamePageCount = 2;
    if ((userVisitedGamePageCount != null && userVisitedGamePageCount % 2 === 1) || validSubscriber) {
      checkifFbwgGameAndOpenCustomURLOrRegularPlayURL();
    } else { // display preroll ads

      window.scrollTo(0, 0);

      var modal = document.getElementById('modal');
      modal.style.display = 'block';
      // clear refresh timer
      if (typeof refreshTimer !== "undefined") {
        clearTimeout(refreshTimer);
        refreshTimer = null;
      }
      var adTagUrl = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/137548614/1023174/71134/1023174-71134-video&description_url=https%3A%2F%2Fwww.m.coolmathgames.com%2F&env=vp&impl=s&correlator=&tfcd=0&npa=0&gdfp_req=1&output=vast&sz=640x480&unviewed_position_start=1';

      if (typeof window.PW_CMG != "undefined") {
        console.log('PBJS start')
        var auctionCallback = function (displayAds, videoUrl) {
          application = new Application(displayAds, videoUrl);
        };
        window.PW_CMG.startAuction(auctionCallback);
      } else { // adblock
        application = new Application(false, adTagUrl);
      }

      var seconds_left = 6;
      intervalId = setInterval(function () {
        seconds_left--;
        document.getElementById("timer_div").innerHTML = seconds_left;
        if (seconds_left <= 0) {
          if (document.getElementById("timer_div") != null) {
            document.getElementById("continue-link").innerHTML = "";
            document.getElementById("timer_div").innerHTML = '<a href="javascript:removePrerollAndDisplayGame();"><div class="continue-link" style="position:relative;left:-130px;">Continue to Game <span style="font-family:Times New Roman;">&#x25BA;</span></div></a>';
          }
          clearInterval(intervalId);
        }
      }, 1000);
    }
  }
  function removeAdSwf() {
    removePrerollAndDisplayGame();
  }
  function noAdsReturned() { // enable_preroll_fallback_ads is false
    removePrerollAndDisplayGame();
  }
  function unlock_now_promo_handler() {
    jQuery(".subscription-overlay").remove();
    jQuery(".game-overlay-watch-or-join").remove();
    jQuery("#afg_container").show();
    jQuery("#videoplayer").show();
    jQuery("#continue-link").text("Continue in ");
    jQuery("#continue-container").show();
    jQuery("#continue-container").append(signupContainerBottom);
    doNotDisplayPrerollTimer = false;
    displayPrerollTimer();
    watchAdtoUnlockGameIsClicked = true;
    var auctionCallback = function (displayAds, videoUrl) {
      application = new Application(displayAds, videoUrl);
    };
    if (typeof window.PW_CMG != "undefined") {
      window.PW_CMG.startAuction(auctionCallback);
    }
  }

  function join_now_promo_handler() {
    if (typeof freeTrialUser !== 'undefined' && freeTrialUser) {
      trackEvent('Premium Subscription ' + subscriberLeg, 'Join Now or Go Ad Free button clicked', userPlayedGames);
      trackGoalVirtualPV('/virtual/join-now-overlay-click');
      trackEvent('Watch Ad to Unlock Game', 'Join now clicked', document.title);
    }
    return;
  }

  function unlock_promo_handler() {
    if (typeof freeTrialUser !== 'undefined' && freeTrialUser) {
      trackEvent('Watch to Unlock' + subscriberLeg, 'Watched an ad to unlock event', userPlayedGames);
      trackGoalVirtualPV('/virtual/unlock-button-click');
    }
    return;
  }

  function continue_to_game_handler() {
    jQuery(".subscription-overlay").remove();
    jQuery(".game-overlay-watch-or-join").remove();
    jQuery("#afg_container").show();
    jQuery("#videoplayer").show();
    jQuery("#continue-link").text("Continue in ");
    jQuery("#continue-container").show();
    jQuery("#continue-container").append(signupContainerBottom);
    doNotDisplayPrerollTimer = false;
    displayPrerollTimer();
    supportCMGisClicked = true;
    trackEvent('Support CMG', 'Continue to Game Button clicked', document.title);
    var auctionCallback = function (displayAds, videoUrl) {
      application = new Application(displayAds, videoUrl);
    };
    if (typeof window.PW_CMG != "undefined") {
      window.PW_CMG.startAuction(auctionCallback);
    }
  }

  function premium_avatar_continue_to_game_handler() {
    jQuery(".subscription-overlay").remove();
    jQuery(".game-overlay-watch-or-join").remove();
    jQuery("#afg_container").show();
    jQuery("#videoplayer").show();
    jQuery("#continue-link").text("Continue in ");
    jQuery("#continue-container").show();
    jQuery("#continue-container").append(signupContainerBottom);
    doNotDisplayPrerollTimer = false;
    displayPrerollTimer();
    // supportCMGisClicked = true;
    trackEvent('Premium Avatar', 'Continue to Game Button clicked', document.title);
    var auctionCallback = function (displayAds, videoUrl) {
      application = new Application(displayAds, videoUrl);
    };
    if (typeof window.PW_CMG != "undefined") {
      window.PW_CMG.startAuction(auctionCallback);
    }
  }

  function support_cmg_signup_promo_handler() {
    if (typeof freeTrialUser !== 'undefined' && freeTrialUser) {
      trackEvent('Premium Subscription ' + subscriberLeg, 'Support CMG button clicked', userPlayedGames);
      trackGoalVirtualPV('/virtual/join-now-overlay-click');
      trackEvent('Support CMG', 'Join now clicked', document.title);
    }
  }

  jQuery('#support_cmg_signup_promo_handler').click(function (event) {
    event.preventDefault();
    var path = '/premium-access/0735a1f2';
    var sLeg = get_premium_access_leg_desc('0735a1f2');
    if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
      path = '/premium-access/d61242ac';
      sLeg = get_premium_access_leg_desc('d61242ac');
    }
    if (typeof get_signup_abtest_variant_2 === 'function') {
      path = path + get_signup_abtest_variant_2();
    }
    if (typeof freeTrialUser !== 'undefined' && freeTrialUser) {
      trackEvent('Premium Subscription ' + sLeg, 'Support CMG button clicked', userPlayedGames);
      trackGoalVirtualPV('/virtual/join-now-overlay-click');
      trackEvent('Support CMG', 'Join now clicked', document.title);
    }
    window.location.href = window.location.protocol + '//' + window.location.host + path;
  });

  jQuery('#premium_avatar_signup_promo_handler').click(function (event) {
    event.preventDefault();
    var sLeg = get_premium_access_leg_desc('553bdf22');
    var path = '/premium-access/553bdf22';
    if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
      path = '/premium-access/67361110';
      sLeg = get_premium_access_leg_desc('67361110');
    }
    if (typeof get_signup_abtest_variant_2 === 'function') {
      path = path + get_signup_abtest_variant_2();
    }
    if (typeof freeTrialUser !== 'undefined' && freeTrialUser) {
      trackEvent('Premium Subscription ' + sLeg, 'Premium Avatar button clicked', userPlayedGames);
      trackGoalVirtualPV('/virtual/join-now-overlay-click');
      trackEvent('Premium Avatar', 'Join now clicked', document.title);
    }
    window.location.href = window.location.protocol + '//' + window.location.host + path;
  });

</script>

<script type="deferjs">
jQuery(document).ready(function () {
  cmatgame_subscriber = getCookie("cmg_sx");
  if(typeof getCookie === 'function' && getCookie("cmg_wl") !== null) {
    cmatgame_subscriber = getCookie("cmg_wl");
  }
  // check if school is whitelisted
  if (cmg_school_whitelisted !== null && getCookie("cmg_schwl") !== null) {
    cmg_school_whitelisted = getCookie("cmg_schwl");
    cmatgame_subscriber = getCookie("cmg_schwl");
  } else if (cmg_school_whitelisted === null && typeof cmg_no_ads_debug !== "undefined" && cmg_no_ads_debug) { // console.log("KY school hours");
    cmatgame_subscriber = cmg_no_ads_debug;
  }
  if (cmg_gdpr_check !== null) {
    var cmg_gdpr_all_check = getCookie("GDPR_All"); // GDPR_All cookie is set when user selects accept all cookies in the GDPR overlay
    var cmg_gdpr_first_check = getCookie("GDPR_First");
    var cmg_gdpr_reject_check = getCookie("GDPR_Reject");
    if (cmg_gdpr_all_check == null && (cmg_gdpr_first_check != null || cmg_gdpr_reject_check != null)) { // user either accepted only first party cookies or rejected all cookies so do not display ads
      cmatgame_subscriber = getCookie("GDPR");
    } else if (cmg_gdpr_all_check == null && cmg_gdpr_first_check == null && cmg_gdpr_reject_check == null) { // user is coming for the first time from one of the GDPR countries so do not display ads
      cmatgame_subscriber = getCookie("GDPR");
    }
  }
  immersive_mode_display_controller();
  if (getCookie('cmg_sx') !== null || getCookie("cmg_wl") !== null) { // display xp bar for premium users
    $('.game-xp-bar-immerse-button').addClass('enabled');
    jQuery('.btn.btn-primary.btn-sm.requestfullscreen').css('display', 'inline-block');
  }

  // display_game_progressbar(gameId);

  // VooxeVideo
  if (jQuery('#videoContainer').length && typeof VooxeVideo === 'undefined') {
    trackEvent('Video Walkthrough', 'Walkthrough video not found', document.title);
    jQuery('#videoContainer').hide();
  }
})


if (browser == "Microsoft Internet Explorer") {
  if (doesnotie == 1) {
    var IEDoesnotwork = "yes";
    doesnotIEMessage();
  } else {
    var IEDoesnotwork = "no";
  }
}
function closeBigScreenPromo() {
  jQuery("#full-screen-modal").remove();
  jQuery(".subscription-overlay").remove();
  jQuery(".game-overlay-watch-or-join").remove();
  jQuery('#big-screen-container').remove();
  jQuery('#no-flash-overlay').show();
  jQuery("#swfgamewrapper").show();
  jQuery("#afg_container").show();
  jQuery("#videoplayer").show();
  jQuery("#continue-link").text("Continue in ");
  jQuery("#continue-container").show();
  jQuery("#continue-container").append(signupContainerBottom);
  doNotDisplayPrerollTimer = false;
  displayPrerollTimer();
  // supportCMGisClicked = true;
  trackEvent('Premium Avatar', 'Continue to Game Button clicked', document.title);
  var auctionCallback = function (displayAds, videoUrl) {
    application = new Application(displayAds, videoUrl);
  };
  if (typeof window.PW_CMG != "undefined") {
    window.PW_CMG.startAuction(auctionCallback);
  }
}


function premium_avatar_overlay_promo_signup_handler(promo_action) {
  event.preventDefault();
  var sLeg = '';
  var path = '/premium-access/553bdf22';

  if (typeof promo_action !== 'undefined' && promo_action !== '') {
    sAction = promo_action;
  }
  sLeg = get_premium_access_leg_desc('553bdf22');//Anon user
  if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
    path = '/premium-access/67361110';
    sLeg = get_premium_access_leg_desc('67361110'); // freemium user
  }
  trackEvent('Premium Subscription - ' + sLeg, sAction, document.title);
  if (typeof get_signup_abtest_variant_2 === 'function') {
    path = path + get_signup_abtest_variant_2();
  }
  window.location.href = window.location.protocol + '//' + window.location.host + path; // cmg
}

function cmgDefault_overlay_promo_signup_handler(promo_action) {
  event.preventDefault();
  var sLeg = '';
  var path = '/premium-access/0735a1f2';
  var sAction = 'Get CMGDefault Marketing screen mode - overlay button clicked';
  if (typeof promo_action !== 'undefined' && promo_action !== '') {
    sAction = promo_action;
  }
  sLeg = get_premium_access_leg_desc('0735a1f2');//Anon user
  if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
    path = '/premium-access/d61242ac';
    sLeg = get_premium_access_leg_desc('d61242ac'); // freemium user
  }
  trackEvent('Premium Subscription - ' + sLeg, sAction, document.title);
  if (typeof get_signup_abtest_variant_2 === 'function') {
    path = path + get_signup_abtest_variant_2();
  }
  window.location.href = window.location.protocol + '//' + window.location.host + path; // cmg
}


function supportCMG_overlay_promo_close_handler() {
  event.preventDefault();
  var sLeg = '';
  var path = '/premium-access/0735a1f2';
  var sAction = 'Close Adfree Marketing overlay clicked';
  sLeg = get_premium_access_leg_desc('0735a1f2'); // Anon user
  if (typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
    path = '/premium-access/d61242ac';
    sLeg = get_premium_access_leg_desc('d61242ac'); // freemium user
  }
  trackEvent('cmgDefault Marketing overlay', sAction, document.title);
  if (jQuery("#id-cmg-default").length) {
    jQuery("#id-cmg-default").hide();
  }
  jQuery("#full-screen-modal").remove();
  jQuery(".subscription-overlay").remove();
  jQuery(".game-overlay-watch-or-join").remove();
  jQuery('#big-screen-container').remove();
  // jQuery('#no-flash-overlay').show();
  jQuery("#swfgamewrapper").show();
  jQuery("#afg_container").show();
  jQuery("#videoplayer").show();
  jQuery("#continue-link").text("Continue in ");
  jQuery("#continue-container").show();
  jQuery("#continue-container").append(signupContainerBottom);
  doNotDisplayPrerollTimer = false;
  displayPrerollTimer();
  // supportCMGisClicked = true;
  // trackEvent('Premium Avatar', 'Continue to Game Button clicked', document.title);
  var auctionCallback = function (displayAds, videoUrl) {
    application = new Application(displayAds, videoUrl);
  };
  if (typeof window.PW_CMG != "undefined") {
    window.PW_CMG.startAuction(auctionCallback);
  }
}

function adfree_marketing_overlay_promo_signup_handler(promo_action) {
  event.preventDefault();
  var sLeg = '';
  var path = '/premium-access/b2df5a33';
  var sAction = 'Get Adfree Marketing screen mode - overlay button clicked';
  if (typeof promo_action !== 'undefined' && promo_action !== '') {
    sAction = promo_action;
  }
  sLeg = get_premium_access_leg_desc('b2df5a33');//Anon user
  if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && (getCookie('cmg_sx') === null && getCookie('cmg_wl') === null)) {
    path = '/premium-access/0c5a2b5b';
    sLeg = get_premium_access_leg_desc('0c5a2b5b'); // freemium user
  }
  trackEvent('Premium Subscription - ' + sLeg, sAction, document.title);
  if (typeof get_signup_abtest_variant_2 === 'function') {
    path = path + get_signup_abtest_variant_2();
  }
  window.location.href = window.location.protocol + '//' + window.location.host + path; // cmg
}

function adfree_marketing_overlay_promo_close_handler() {
  event.preventDefault();
  var sLeg = '';
  var path = '/premium-access/b2df5a33';
  var sAction = 'Close Adfree Marketing overlay clicked';
  sLeg = get_premium_access_leg_desc('b2df5a33');//Anon user
  if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
    path = '/premium-access/0c5a2b5b';
    sLeg = get_premium_access_leg_desc('0c5a2b5b'); // freemium user
  }
  trackEvent('Adfree Marketing overlay', sAction, document.title);
  if (jQuery("#id-adfree-marketing-campaign").length) {
    jQuery("#id-adfree-marketing-campaign").hide();
  }

  jQuery("#full-screen-modal").remove();
  jQuery(".subscription-overlay").remove();
  jQuery(".game-overlay-watch-or-join").remove();
  jQuery('#big-screen-container').remove();
  // jQuery('#no-flash-overlay').show();
  jQuery("#swfgamewrapper").show();
  jQuery("#afg_container").show();
  jQuery("#videoplayer").show();
  jQuery("#continue-link").text("Continue in ");
  jQuery("#continue-container").show();
  jQuery("#continue-container").append(signupContainerBottom);
  doNotDisplayPrerollTimer = false;
  displayPrerollTimer();
  // supportCMGisClicked = true;
  // trackEvent('Premium Avatar', 'Continue to Game Button clicked', document.title);
  var auctionCallback = function (displayAds, videoUrl) {
    application = new Application(displayAds, videoUrl);
  };
  if (typeof window.PW_CMG != "undefined") {
    window.PW_CMG.startAuction(auctionCallback);
  }
}

function adfree_marketing_overlay_promo_more_handler() {
  event.preventDefault();
  var sAction = 'Adfree Marketing overlay learn more clicked';
  trackEvent('Adfree Marketing overlay', sAction, document.title);
  var redirect_url = window.location.protocol + '//' + window.location.host + "/premium-benefits";
  window.open(redirect_url, '_blank');
}


function closeBigScreenPromo() {
  jQuery("#full-screen-modal").remove();
  jQuery(".subscription-overlay").remove();
  jQuery(".game-overlay-watch-or-join").remove();
  jQuery('#big-screen-container').remove();
  jQuery('#no-flash-overlay').show();
  jQuery("#swfgamewrapper").show();
  jQuery("#afg_container").show();
  jQuery("#videoplayer").show();
  jQuery("#continue-link").text("Continue in ");
  jQuery("#continue-container").show();
  jQuery("#continue-container").append(signupContainerBottom);
  doNotDisplayPrerollTimer = false;
  displayPrerollTimer();
  // supportCMGisClicked = true;
  trackEvent('Premium Avatar', 'Continue to Game Button clicked', document.title);
  var auctionCallback = function (displayAds, videoUrl) {
    application = new Application(displayAds, videoUrl);
  };
  if (typeof window.PW_CMG != "undefined") {
    window.PW_CMG.startAuction(auctionCallback);
  }
}

function bigscreen_overlay_promo_signup_handler(promo_action) {
  event.preventDefault();
  var sLeg = '';
  var path = '/premium-access/6ea95de6';
  var sAction = 'Get big screen mode - overlay button clicked';
  if (typeof promo_action !== 'undefined' && promo_action !== '') {
    sAction = promo_action;
  }
  sLeg = get_premium_access_leg_desc('6ea95de6');//Anon user
  if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && (getCookie('cmg_sx') === null && getCookie('cmg_wl') === null)) {
    path = '/premium-access/89bee87a';
    sLeg = get_premium_access_leg_desc('89bee87a'); // freemium user
  }
  trackEvent('Premium Subscription - ' + sLeg, sAction, document.title);
  if (typeof get_signup_abtest_variant_2 === 'function') {
    path = path + get_signup_abtest_variant_2();
  }
  window.location.href = window.location.protocol + '//' + window.location.host + path; // cmg
}

function bigscreen_overlay_promo_close_handler() {
  event.preventDefault();
  var sLeg = '';
  var path = '/premium-access/6ea95de6';
  var sAction = 'Close premium overlay clicked';
  sLeg = get_premium_access_leg_desc('6ea95de6');//Anon user
  if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
    path = '/premium-access/89bee87a';
    sLeg = get_premium_access_leg_desc('89bee87a'); // freemium user
  }
  trackEvent('Big screen overlay', sAction, document.title);
  if (jQuery("#big-screen-container").length) {
    jQuery("#big-screen-container").hide();
  }
  jQuery("#full-screen-modal").remove();
  jQuery(".subscription-overlay").remove();
  jQuery(".game-overlay-watch-or-join").remove();
  jQuery('#big-screen-container').remove();
  // jQuery('#no-flash-overlay').show();
  jQuery("#swfgamewrapper").show();
  jQuery("#afg_container").show();
  jQuery("#videoplayer").show();
  jQuery("#continue-link").text("Continue in ");
  jQuery("#continue-container").show();
  jQuery("#continue-container").append(signupContainerBottom);
  // displayPrerollTimer();
  // supportCMGisClicked = true;
  // trackEvent('Premium Avatar', 'Continue to Game Button clicked', document.title);
  var auctionCallback = function (displayAds, videoUrl) {
    application = new Application(displayAds, videoUrl);
  };

  if (typeof window.PW_CMG != "undefined") {
    window.PW_CMG.startAuction(auctionCallback);
  }
}

function bigscreen_overlay_promo_more_handler() {
  event.preventDefault();
  var sAction = 'Premium overlay learn more clicked';
  trackEvent('Big screen overlay', sAction, document.title);
  var redirect_url = window.location.protocol + '//' + window.location.host + "/premium-benefits";
  window.open(redirect_url, '_blank');
}


function playlist_marketing_overlay_promo_signup_handler() {
  event.preventDefault();
  var sLeg = '';
  var path = '/premium-access/39980b12';
  var sAction = 'Get playlist Marketing screen mode - overlay button clicked';
  if (typeof promo_action !== 'undefined' && promo_action !== '') {
    sAction = promo_action;
  }
  sLeg = get_premium_access_leg_desc('39980b12');//Anon user
  if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
    path = '/premium-access/4c044106';
    sLeg = get_premium_access_leg_desc('4c044106'); // freemium user
  }
  trackEvent('Premium Subscription - ' + sLeg, sAction, document.title);
  if (typeof get_signup_abtest_variant_2 === 'function') {
    path = path + get_signup_abtest_variant_2();
  }
  window.location.href = window.location.protocol + '//' + window.location.host + path; // cmg
}

function playlist_marketing_overlay_promo_close_handler() {
  event.preventDefault();
  var sLeg = '';
  var path = '/premium-access/39980b12';
  var sAction = 'Close Playlist Marketing overlay clicked';
  sLeg = get_premium_access_leg_desc('39980b12'); // Anon user
  if (typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null && getCookie('cmg_wl') === null) {
    path = '/premium-access/4c044106';
    sLeg = get_premium_access_leg_desc('4c044106'); // freemium user
  }
  trackEvent('Playlist Marketing overlay', sAction, document.title);
  if (jQuery("#id-playlist-marketing-campaign").length) {
    jQuery("#id-playlist-marketing-campaign").hide();
  }

  jQuery("#full-screen-modal").remove();
  jQuery(".subscription-overlay").remove();
  jQuery(".game-overlay-watch-or-join").remove();
  jQuery('#big-screen-container').remove();
  // jQuery('#no-flash-overlay').show();
  jQuery("#swfgamewrapper").show();
  jQuery("#afg_container").show();
  jQuery("#videoplayer").show();
  jQuery("#continue-link").text("Continue in ");
  jQuery("#continue-container").show();
  jQuery("#continue-container").append(signupContainerBottom);
  doNotDisplayPrerollTimer = false;
  displayPrerollTimer();
  // supportCMGisClicked = true;
  // trackEvent('Premium Avatar', 'Continue to Game Button clicked', document.title);
  var auctionCallback = function (displayAds, videoUrl) {
    application = new Application(displayAds, videoUrl);
  };
  if (typeof window.PW_CMG != "undefined") {
    window.PW_CMG.startAuction(auctionCallback);
  }
}

function playlist_banner_right_sidebar_handler() {
  event.preventDefault();
  var sLeg = '';
  var path = '/premium-access/a1ca2f3b';
  var sAction = 'Get playlist banner screen mode - masthead clicked';
  if(typeof promo_action !== 'undefined' && promo_action !== '') {
    sAction = promo_action;
  }
  sLeg = get_premium_access_leg_desc('a1ca2f3b');//Anon user
  if(typeof getCookie === 'function' && getCookie('cmg_fx') !== null && getCookie('cmg_sx') === null) {
    path = '/premium-access/780ef8a3';
    sLeg = get_premium_access_leg_desc('780ef8a3');//freemium user
  }
  trackEvent('Premium Subscription - '+sLeg, sAction, document.title);
  if(typeof get_signup_abtest_variant_2 === 'function') {
    path = path + get_signup_abtest_variant_2();
  }
  window.location.href = window.location.protocol + '//' + window.location.host + path;//cmg
}


function playlist_marketing_overlay_promo_more_handler() {
  event.preventDefault();
  var sAction = 'Playlist Marketing overlay learn more clicked';
  trackEvent('Playlist Marketing overlay', sAction, document.title);
  var redirect_url = window.location.protocol + '//' + window.location.host + "/premium-benefits";
  window.open( redirect_url , '_blank');
}

</script>
<script type='deferjs' src='https://static.truex.com/js/client.js'></script>


      <div class="row mt-3 mb-1 game-xp-bar-immerse-button">
        <div class="col-sm-6 game-xp-bar"><div class="game-progress-status"><div class="progress game-xp-progress" style="display:none;"><div class="progress-text"><a href="/login">Login to Earn XP</a></div><div class="progress-bar" role="progressbar" style="width:70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div></div></div></div>
        <div class="col-sm-6 immerse-close-button">
          <div class="immerse-button">
            <a class="btn btn-primary btn-sm requestfullscreen" href="#" title="Big Screen">
              <span class="big-screen-popover-span">Big Screen</span>
              <i class="icon-expand-arrows-alt" aria-hidden="true"></i>
            </a>
          </div>

          <div class="close-full-screen">
            <a class="btn btn-primary btn-fullscreen btn-sm" href="#" title="Exit Big Screen">
              <span>Exit Big Screen</span>
              <i class="icon-remove_sign" aria-hidden="true"></i>
            </a>
          </div>
        </div>
      </div>

      <div class="field field--name-field-instructions field--type-text-with-summary field--label-above field__items"><h3 class="title-instructions field__label">Instructions</h3><div class="body-instructions field__item"> <p>Move your tank with the arrow keys or WASD. Aim your tank and fire with your mouse. Defeat enemy tanks, collect coins, and destroy the enemy base in order to clear each level. Spend your money wisely to upgrade your tank with better armor, weapons, visibility and more.</p>
</div></div>
      <div class="mobile game-instructions mb-4 mt-4"><div class="show-read-more" id="mobile-instructions"><h3 class="mobile-instructions">Instructions</h3><div class="body-instructions"> <p>Press the left side of the screen to move your tank around. Hold the right side of the screen to shoot. Buy new weapons between levels, and then tap the icon to switch to them.</p>
</div></div></div>

    </div>
  </article>
</div>
</div>
<div class="d-lg-none game-on_device game-on-mobile">
  <script type="deferjs">
  $(document).ready(function () {
    if (cmg_is_mobile_device() === true) {
      removePrerollAndDisplayGame();
      attachModalHtml();
      jQuery('#id-adfree-marketing-campaign').remove();
      jQuery("#full-screen-modal").remove();
      jQuery(".subscription-overlay").remove();
      jQuery(".game-overlay-watch-or-join").remove();
      jQuery("#videoplayer").show();
    } else if(jQuery(".game-page-mobile .playNow").length && jQuery(".game-page-mobile .playNow").is(':visible') ) {
      removePrerollAndDisplayGame();
    }

    $(".game-page-mobile .playNow").on("click", function (e) {
      e.preventDefault();
      if(cmg_is_mobile_device()) {
        //Display overlay preroll ad
        displayPrerollAd_Mobile();
      } else {
        if (!cmg_is_mobile_device() && typeof trackEvent === 'function') {
          trackEvent('Mobile play button clicked', 'resized desktop browser', document.title);
        } else if (cmg_is_mobile_device() && typeof trackEvent === 'function') {
          trackEvent('Mobile play button clicked', 'mobile browser', document.title);
        }
        displayPrerollAd_Resized();
      }
    });
  });
  jQuery(document).ready(function ($) {
    if (cmg_is_mobile_device() === true) {
      check_game_mode(orientation);
      $(window).on('orientationchange', function (event) {
        check_game_mode(orientation);
      });
    }
    function check_game_mode(ort) {
      if ($('.check-game-mode').length > 0) {
        if ($('.check-game-mode').hasClass('portrait-only')) {
          if (ort == 0 || ort == '-180' || ort == 180) {
            $('.check-game-mode').removeClass('show-msg');
          } else {
            $('.check-game-mode').addClass('show-msg');
          }
        }
        if ($('.check-game-mode').hasClass('landscape-only')) {
          if (ort == 90 || ort == '-90') {
            $('.check-game-mode').removeClass('show-msg');
          } else {
            $('.check-game-mode').addClass('show-msg');
          }
        }
      }
    }

    jQuery(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange", function () {
      if (jQuery.fullscreen.isFullScreen()) {
        jQuery('body').addClass('isFullScreen isPlay');
      } else {
        jQuery('body').removeClass('isFullScreen isPlay');
      }
    });

  });

  // New responsive site preroll
  function removePrerollAndDisplayGame_Mobile() {
    //removePrerollAndDisplayGame();
    jQuery("#m-continue-container").hide();
    var modal = document.getElementById('m-modal');
    modal.style.display = 'none';
    cmg_start_game_full_screen();
  }
  function removePrerollAndDisplayGame_Resized() {
    jQuery('body').addClass('isPlay');
    //removePrerollAndDisplayGame();
    jQuery("#r-continue-container").hide();
    var modal = document.getElementById('r-modal');
    modal.style.display = 'none';
    cmg_start_game_full_screen();
  }
  var mtimerHtml = '<div id="m-continue-link" >Continue in <span id="m-timer-div">6</span></div>';
  var rtimerHtml = '<div id="r-continue-link" >Continue in <span id="r-timer-div">15</span></div>';
  var displayMobilePreRoll = true;

  function displayPrerollAd_Mobile() {
    var cmatgame_subscriber = getCookie('cmg_sx');
    var validSubscriber = false;
    if (typeof cmatgame_subscriber !== 'undefined' && (cmatgame_subscriber !== null || getCookie('cmg_wl') !== null)) {
      validSubscriber = true;
    }
    // preroll ads
    var prerollUrls = /0\-testing/;

    // display preroll ads only on 2nd,4th, 6th visits of any game page
    // TODO Remove false after testing
    if (! displayMobilePreRoll || validSubscriber || hide_preroll_ads) {
      jQuery('body').addClass('isPlay');
      cmg_start_game_full_screen();
    } else { // display preroll ads
      displayMobilePreRoll = false;
      // jQuery("#m-continue-container").html(mtimerHtml);
      window.scrollTo(0, 0);
      var modal = document.getElementById('m-modal');
      jQuery('.page.global-wrapper').before(modal);
      modal.style.display = 'block';
      // clear refresh timer
      if (typeof refreshTimer !== "undefined") {
        clearTimeout(refreshTimer);
        refreshTimer = null;
      }

      /* Test ad
      adTagUrl = 'https://pubads.g.doubleclick.net/gampad/ads?' + 'sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&' + 'impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&' + 'cust_params=deployment%3Ddevsite%26sample_ct%3Dlinear&correlator=';
      application = new Application(true, adTagUrl, "m-");
      */
      // Live Ad

      var adTagUrl = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/137548614/1023174/71134/1023174-71134-video&description_url=https%3A%2F%2Fwww.m.coolmathgames.com%2F&env=vp&impl=s&correlator=&tfcd=0&npa=0&gdfp_req=1&output=vast&sz=640x480&unviewed_position_start=1';
      if(typeof window.PW_CMG != "undefined") {
        console.log('PBJS start')
        var auctionCallback = function(displayAds, videoUrl){
          application = new Application(displayAds, videoUrl, "m-");
        };
        window.PW_CMG.startAuction(auctionCallback);
      } else { //adblock
        application = new Application(false, adTagUrl, "m-");
      }


      var m_seconds_left = 6;
      if (jQuery("#m-timer-div").length) {
        jQuery(".m-preroll-headline").hide(); // remove game loading message
        jQuery("#m-continue-container").remove();
        jQuery("#m-container123").before(mtimerHtml); // and display continue in...
      }
      mobile_intervalId = setInterval(function () {
        m_seconds_left--;
        document.getElementById("m-timer-div").innerHTML = m_seconds_left;
        if (m_seconds_left <= 0) {
          if (document.getElementById("m-timer-div") != null) {
            document.getElementById("m-continue-link").innerHTML = "";
            //jQuery("#m-continue-link").hide();
            document.getElementById("m-continue-link").innerHTML = '<div class="continue-link-new"><a href="javascript:removePrerollAndDisplayGame_Mobile();">Continue to Game &#x25BA;</a></div>';
          }
          clearInterval(mobile_intervalId);
        }
      }, 1000);
    }
  }
  function displayPrerollAd_Resized() {
    var cmatgame_subscriber = getCookie('cmg_sx');
    var validSubscriber = false;
    if (typeof cmatgame_subscriber !== 'undefined' && (cmatgame_subscriber !== null || getCookie('cmg_wl') !== null)) {
      validSubscriber = true;
    }
    // preroll ads
    var prerollUrls = /0\-testing/;

    // display preroll ads only on 2nd,4th, 6th visits of any game page
    // TODO Remove false after testing
    if (! displayMobilePreRoll || validSubscriber || hide_preroll_ads) {
      jQuery('body').addClass('isPlay');
      cmg_start_game_full_screen();
    } else { // display preroll ads
      displayMobilePreRoll = false;
      // jQuery("#r-continue-container").html(rtimerHtml);
      window.scrollTo(0, 0);
      var modal = document.getElementById('r-modal');
      jQuery('.page.global-wrapper').before(modal);
      modal.style.display = 'block';
      jQuery('.r-preroll-headline').hide();
      // TODO -- css
      jQuery("#r-modal").css({
        "text-align": "center",
        "color": "white",
        "position": "fixed",
        "background": "rgba(0,0,0,0.9)",
        "width": "100%",
        "z-index": "999999"
      });
      jQuery("#r-modal #r-timer-div").css("color", "yellow");
      jQuery("#r-modal .r-continue-link").css("color", "yellow").text("180");
      jQuery("#r-modal #r-continue-link").css({"color": "yellow", "margin-top": "10px", "margin-bottom": "10px"});
      // clear refresh timer
      if (typeof refreshTimer !== "undefined") {
        clearTimeout(refreshTimer);
        refreshTimer = null;
      }

      /* Test ad
      adTagUrl = 'https://pubads.g.doubleclick.net/gampad/ads?' + 'sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&' + 'impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&' + 'cust_params=deployment%3Ddevsite%26sample_ct%3Dlinear&correlator=';
      application = new Application(true, adTagUrl, "r-");
      */
      // Live Ad

      var adTagUrl = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/137548614/1023174/71134/1023174-71134-video&description_url=https%3A%2F%2Fwww.m.coolmathgames.com%2F&env=vp&impl=s&correlator=&tfcd=0&npa=0&gdfp_req=1&output=vast&sz=640x480&unviewed_position_start=1';
      if(typeof window.PW_CMG != "undefined") {
        console.log('PBJS start')
        var auctionCallback = function(displayAds, videoUrl){
          application = new Application(displayAds, videoUrl, "r-");
        };
        window.PW_CMG.startAuction(auctionCallback);
      } else { //adblock
        application = new Application(false, adTagUrl, "r-");
      }


      var r_seconds_left = 15;
      if (jQuery("#r-timer-div").length) {
        jQuery(".r-preroll-headline").hide(); // remove game loading message
        jQuery("#r-continue-container").remove();
        jQuery("#r-container123").before(rtimerHtml); // and display continue in...
      }
      rIntervalId = setInterval(function () {
        r_seconds_left--;
        document.getElementById("r-timer-div").innerHTML = r_seconds_left;
        if (r_seconds_left <= 0) {
          if (document.getElementById("r-timer-div") != null) {
            document.getElementById("r-continue-link").innerHTML = "";
            //jQuery("#r-continue-link").hide();
            document.getElementById("r-continue-link").innerHTML = '<div class="continue-link-new"><a href="javascript:removePrerollAndDisplayGame_Resized();">Continue to Game &#x25BA;</a></div>';
          }
          clearInterval(rIntervalId);
        }
      }, 1000);
    }
  }
</script>

<div class="game-page-mobile ">
  <div class="game-image my-4">
    <div class="no-flash-overlay-mobile" style="display:none;">
      <p>
        <strong>Sorry... this game is not playable in your browser.</strong>
      </p>
    </div>

        <a href="https://www.coolmathgames.com/0-awesome-tanks-2/play" class="playNow" id='playNowButton'>
      <span class="playNowButton fa-stack fa-lg">
        <i class="circle"></i>
        <i class="icon-circle fa-stack-2x"></i>
        <i class="icon-play fa-stack-1x fa-inverse"></i>
      </span>
    </a>

    <script type="deferjs">
      if (!validSubscriber && document.getElementById('randomAdBlockDiv') == null) {
        //TODO when schools open add this logic (schoolHours && parseInt(sessionStorage.getItem('sessionGamesPlayed') || 0)
        displayAdBlock("mobile");
      }
    </script>

    
    
            <div class="game__field-og-image">  
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="600" height="350" alt="" data-src="/sites/default/files/awesome-tanks-2.png" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
      
  </div>
    <div
    id="m-modal" style="display: none;">
    <!-- Load message -->
    <div class="m-preroll-headline">
      <h3>Just a moment while your game loads</h3>
    </div>

    <div id="m-container123">
      <hr style="margin-top: 10px; margin-bottom: 10px;"/>
      <div id="videoplayer" style="width:100%;">
        <video id="m-content123" playsinline muted style="width:300px;height:1px;">
          <source src="//www.coolmathgames.com/sites/default/files/adtesting/DummyVideo.mov"></source>
      </video>
      <div id="m-adcontainer"></div>
      <p class="advertisment">Advertisement</p>
    </div>
    <!-- Timer -->
    <div id="m-continue-container">
      <div id="m-continue-link">Continue in <span id="m-timer-div">6</span>
      </div>

    </div>
  </div>
</div>
<div id="r-modal" style="display: none;">
    <div class="r-preroll-headline">
      <h3>Just a moment while your game loads</h3>
    </div>
  <div id="r-container123">
    <hr style="margin-top: 10px; margin-bottom: 10px;"/>
    <div id="r-videoplayer" style="width:100%;">
      <video id="r-content123" playsinline muted style="width:640px;height:1px;">
        <source src="//www.coolmathgames.com/sites/default/files/adtesting/DummyVideo.mov"></source>
    </video>
    <div id="r-adcontainer" style="display: flex; align-items: center; justify-content: center;"></div>
    <p class="advertisment">Advertisement</p>
  </div>
  <!-- Timer -->
  <div id="r-continue-container">
    <div id="r-continue-link">Continue in <span id="r-timer-div">20</span>
    </div>
  </div>
</div>
</div>
<div class="game-xp-bar mb-4"><div class="game-progress-status"><div class="progress game-xp-progress" style="display:none;"><div class="progress-text"><a href="/login">Login to Earn XP</a></div><div class="progress-bar" role="progressbar" style="width:70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div></div></div></div>
<div class="game-instructions mobile mb-4">
<div class="show-read-more" id="instructions">
  <div class="mobile game-instructions mb-4 mt-4"><div class="show-read-more" id="mobile-instructions"><h3 class="mobile-instructions">Instructions</h3><div class="body-instructions"> <p>Press the left side of the screen to move your tank around. Hold the right side of the screen to shoot. Buy new weapons between levels, and then tap the icon to switch to them.</p>
</div></div></div>
</div>
</div>
</div>
<div class="ad-block mb-4"></div>
<div class="like-block mb-4">

<div id="block-coolmath-carouselingamedetailpage" class="block block-cmatgame-core block-gamedetailcarousel">
  
    
      <div class="view-content">
      <div class="pane-game-details-carousel-game-detail"><div class='view-display-id-carousel_game_detail'><div class='view-header'><p>You'll Also Like...</p></div><div class='view-content'><div><div class='bx-wrapper jcarousel-wrapper'><div class='jcarousel'><ul><li class="bxslider-views-slideshow-main-frame-row "><div class="game-item "><div class="game-link-wrapper"><a href="/0-awesome-tanks"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Awesome Tanks Game" title="Awesome Tanks" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/awesome-tanks-game-logo.png?itok=-idGSLyb" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Awesome Tanks</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row mobile-hidden"><div class="game-item mobile-not-playable"><div class="game-link-wrapper"><a href="/0-table-tanks"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Table Tanks Game" title="Table Tanks" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/table-tanks-game-logo.png?itok=qgVbOe2f" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Table Tanks</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row mobile-hidden"><div class="game-item mobile-not-playable"><div class="game-link-wrapper"><a href="/0-just-one-boss"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Just One Boss Game" title="Just One Boss" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/just-one-boss-game-logo-2.png?itok=nyjp5bYq" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Just One Boss</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row "><div class="game-item "><div class="game-link-wrapper"><a href="/0-retro-space-blaster"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Retro Space Blaster Game" title="Retro Space Blaster" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/Retro-Space-Blaster-Game-Logo-2.png?itok=K7q0Q6zN" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Retro Space Blaster</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row mobile-hidden"><div class="game-item mobile-not-playable"><div class="game-link-wrapper"><a href="/0-defly-io"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Defly.io Game" title="Defly.io" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/defly-io-game-logo-NEW.png?itok=SDytchei" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Defly.io</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row mobile-hidden"><div class="game-item mobile-not-playable"><div class="game-link-wrapper"><a href="/0-copter-royale"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Copter Royale Game" title="Copter Royale" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/copter-royale-game-logo_0.png?itok=mBoa4U1x" class="lazyload img-fluid" typeof="foaf:Image" />

</div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Copter Royale</span></h5></a></div></div></li><li class="bxslider-views-slideshow-main-frame-row mobile-hidden"><div class="game-item mobile-not-playable"><div class="game-link-wrapper"><a href="/0-awesome-planes"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Awesome Planes Game" title="Awesome Planes" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/awesome-planes-logo-2.jpg?itok=tsWoumU3" class="lazyload img-fluid" typeof="foaf:Image" />

<span class="icon-gamethumbnail-carousel"> </span></div><h5 class="game-title"><span class="overlay"></span><span class="title-on-overlay">Awesome Planes</span></h5></a></div></div></li></ul></div><div class="bx-controls-direction1"><a href="#" class="jcarousel-control-prev">&lsaquo;</a><a href="#" class="jcarousel-control-next">&rsaquo;</a></div></div></div></div></div></div>
    </div>
  </div></div>
</div>
    </div>
  </div>

<div class="views-element-container block block-views block-views-blockgame-queues-block-2" id="block-coolmath-views-block-game-queues-block-2">
  
      <h2 class="common-title">
      <span class="title-with-button">Coolmath Top Picks</span>
    </h2>
    
      <div class="view-content">
      <div><div class="pane-content js-view-dom-id-34440bf5d618c1d1af632a1b5dbdc77ffa210281ad23629c100afaa0a33f2102">
  
  
  

  
  
  

  
    <div class="game-item mobile-not-playable">
    <div class="game-link-wrapper">
      <a href="/0-chess">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Chess Game" title="Chess" data-src="/sites/default/files/styles/thumbnail_small/public/chess-icon.png?itok=v9F2dhmN" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Chess</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Checkmate! Play the classic game of strategy. You can challenge the computer, a friend, or join a match against another online player.</p>
</div>
    <div class="cmgr-short-desc">
      <p>Play Chess against the computer or your friends!</p>
    </div>
  </div>
  </div>
  <div class="game-item ">
    <div class="game-link-wrapper">
      <a href="/0-swing-monkey">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Swing Monkey Game" title="Swing Monkey" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/swing-monkey-game-logo.png?itok=Z7uSpeaQ" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Swing Monkey</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Swing through the jungle from tree to tree! Beat levels to unlock new monkey skins.</p>
</div>
    <div class="cmgr-short-desc">
      <p>Monkey swing, monkey do!</p>
    </div>
  </div>
  </div>
  <div class="game-item mobile-not-playable">
    <div class="game-link-wrapper">
      <a href="/0-copter-royale">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Copter Royale Game" title="Copter Royale" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/copter-royale-game-logo_0.png?itok=mBoa4U1x" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Copter Royale</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Outlast your opponents in the ultimate copter arena. Grab upgrades and superpowers, avoid the toxic fog, and be the last one flying!</p>
</div>
    <div class="cmgr-short-desc">
      <p>Upgrade your copter and be the last one flying!</p>
    </div>
  </div>
  </div>
  <div class="game-item mobile-not-playable">
    <div class="game-link-wrapper">
      <a href="/0-poptropica">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Poptropica Game" title="Poptropica" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/poptropica-game-logo.png?itok=F32EkkMW" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Poptropica</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Hop in your hot air balloon and prepare for adventure! Solve a whole new quest on every island.</p>
</div>
    <div class="cmgr-short-desc">
      <p>Hop in your hot air balloon and prepare for adventure!</p>
    </div>
  </div>
  </div>
  <div class="game-item ">
    <div class="game-link-wrapper">
      <a href="/0-darts">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Darts Game" title="Darts" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/darts-game-logo.png?itok=lm-u2aAw" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Darts</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Test your aim in online multiplayer! Race your opponent to get to zero first. You'll have to calculate your own score.</p>
</div>
    <div class="cmgr-short-desc">
      <p>Test your aim in online multiplayer!</p>
    </div>
  </div>
  </div>
  <div class="game-item ">
    <div class="game-link-wrapper">
      <a href="/0-retro-ping-pong">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Retro Ping Pong Game" title="Retro Ping Pong" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/retro-ping-pong-game-logo_1.png?itok=4XqD0w1_" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Retro Ping Pong</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Play the classic game, or mix it up with an all-new action mode:&nbsp;fireballs, blasters, gravity wells, and more!</p>
</div>
    <div class="cmgr-short-desc">
      <p>Play the classic game or the all-new action mode!</p>
    </div>
  </div>
  </div>
  <div class="game-item mobile-not-playable">
    <div class="game-link-wrapper">
      <a href="/0-big-tower-tiny-square">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Big Tower Tiny Square Game" title="Big Tower Tiny Square" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/big-tower-tiny-square-game-logo.png?itok=gzYesemP" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Big Tower Tiny Square</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Your pineapple is trapped at the top of a huge tower!&nbsp;Jump over pits of lava and dodge dangerous traps to rescue it.</p>
</div>
    <div class="cmgr-short-desc">
      <p>Save your pineapple from evil Big Square!</p>
    </div>
  </div>
  </div>
  <div class="game-item mobile-not-playable">
    <div class="game-link-wrapper">
      <a href="/0-pre-civilization-bronze-age">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Pre-Civilization Bronze Age Game" title="Pre-Civilization Bronze Age" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/game-logo-preciv-bronze-age_0.gif?itok=M2xJ4brL" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Pre-Civilization Bronze Age</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Grow your civilization during the Bronze Age. Collect food, research technology, defend yourself from other civilizations,&nbsp;and build a world wonder!</p>
</div>
    <div class="cmgr-short-desc">
      <p>Grow your civilization.</p>
    </div>
  </div>
  </div>
  <div class="game-item mobile-not-playable">
    <div class="game-link-wrapper">
      <a href="/0-jumpless-world">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Jumpless World Game" title="Jumpless World" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/jumpless-world-game-logo.png?itok=1icG0uou" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Jumpless World</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>In this strange and unusual world, you cannot jump. Fortunately, you CAN summon mountains beneath your feet. And get filthy stinkin' rich.</p>
</div>
    <div class="cmgr-short-desc">
      <p>You can't jump. But you can move mountains.</p>
    </div>
  </div>
  </div>
  <div class="game-item ">
    <div class="game-link-wrapper">
      <a href="/0-idle-dice">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Idle Dice Game" title="Idle Dice" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/idle-dice-game-logo.png?itok=iqbMD_SA" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Idle Dice</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Let's get rolling! It may not look like much at first, but we have a feeling you'll be earning trillions of points in no time.</p>
</div>
    <div class="cmgr-short-desc">
      <p>Let's get rolling!</p>
    </div>
  </div>
  </div>
  <div class="game-item ">
    <div class="game-link-wrapper">
      <a href="/0-penalty-kick-online">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Penalty Kick Online Game" title="Penalty Kick Online" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/penalty-kick-online-game-logo.png?itok=f177ipxJ" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Penalty Kick Online</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Hit a screamer into the top corner or make an epic save in this&nbsp;penalty shootout. Take your skills online and become world champion!</p>
</div>
    <div class="cmgr-short-desc">
      <p>Test your soccer skills in online multiplayer!</p>
    </div>
  </div>
  </div>
  <div class="game-item ">
    <div class="game-link-wrapper">
      <a href="/0-tetroid-3">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Tetroid 3 Game" title="Tetroid 3" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/tetroid-3-logo.png?itok=tzLNWeDc" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Tetroid 3</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Fill the board with bricks! How many points can you score before you get stuck?</p>
</div>
    <div class="cmgr-short-desc">
      <p>Fill the rows and columns with colorful bricks!</p>
    </div>
  </div>
  </div>
  <div class="game-item ">
    <div class="game-link-wrapper">
      <a href="/0-push-your-luck">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Push Your Luck Game" title="Push Your Luck" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/Push-Your-Luck-Game-logo.png?itok=a9Vs_AVe" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Push Your Luck</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Step up and spin the wheel in this cool way to learn about probability! Guess higher or lower to win big points. Will you play it safe or risk it all?</p>
</div>
    <div class="cmgr-short-desc">
      <p>Step up and spin the wheel!</p>
    </div>
  </div>
  </div>
  <div class="game-item ">
    <div class="game-link-wrapper">
      <a href="/0-tiny-fishing">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Tiny Fishing Game" title="Tiny Fishing" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/tiny-fishing-game-logo.png?itok=6D9HXJbm" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Tiny Fishing</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Looks like a nice day to go&nbsp;fishing! Cast your line and reel in a legendary fish. Earn cash to buy new hooks and skills.</p>
</div>
    <div class="cmgr-short-desc">
      <p>Cast your line and reel in a legendary fish!</p>
    </div>
  </div>
  </div>
  <div class="game-item ">
    <div class="game-link-wrapper">
      <a href="/0-block-the-pig">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Block the Pig Game" title="Block the Pig" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/game-logo-block-the-pig.gif?itok=At8WDvm3" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Block the Pig</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>The pig is on the loose! Help prevent him from escaping by placing stone walls to block his path.</p></div>
    <div class="cmgr-short-desc">
      <p>The Pig is on the loose! Can you catch him?</p>
    </div>
  </div>
  </div>
  <div class="game-item ">
    <div class="game-link-wrapper">
      <a href="/0-tube-master">
        <div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Tube Master Game" title="Tube Master" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/game-logo-tube-master.gif?itok=BOdqpL9S" class="lazyload img-fluid" typeof="foaf:Image" />

</div>
        <h3 class="game-title">Tube Master</h3>
      </a>
    </div>
    <div class="game-item-description">
    <div class="field-body cmgr-long-desc"><p>Connect all pipes of the same color. The pipes can't cross, and you have to fill all of the space with pipes!</p></div>
    <div class="cmgr-short-desc">
      <p>Connect pipes of the same color.</p>
    </div>
  </div>
  </div>

    

  
  

  
  
</div>
</div>

    </div>
  </div>

            </div>
          </div>

          <div class="main-aside col-lg-3 col-xl-3 pr-lg-0">
                          <aside class="section" role="complementary">
                <div class="inside">
                    
<div id="block-videotutorialcodingclasses-2" class="block block-block-content block-block-contentba3143bd-97a2-484a-a24a-a37a18cd61d5">
    
        
          
            <div class="basic__body"><div class="right-rail-promo">
<style>
.right-rail-promo a:hover { filter: brightness(120%); }
</style>
<a  href="#" onclick="courseVideoHhandler();return false;" target="_blank"><img class="video-course-store-promo"  src="/sites/default/files/cmatgame_block/video-course-right-rail.png"></a></div>
<script type="text/javascript">
jQuery('a.video-course-store-promo').click(function(e){
  e.preventDefault();
  courseVideoHhandler(e);
});
function courseVideoHhandler(e) {
  url = 'https://learntocode.coolmathgames.com?xid=CMGpromo';
  if(typeof __gaTracker !== "undefined") { 
    __gaTracker('send', { hitType: 'event', eventCategory: 'Learntocode Promo', eventAction: 'Learntocode Rightrail Promo Link Clicked', eventLabel: document.title, eventValue: '0' }); 
  }
  window.open(url);
}
</script></div>
      <div class="right-rail-promo"></div>
      </div>


<div id="block-adsrighttop-otherpage-300x250-2" class="block block-cmatgame-core block-adsrighttop-otherpage-300x250">
  
    
      <div class="view-content">
      <div class="panel-pane pane-block pane-cmatgame-advertisement-cm-g-otherpages-300x250-top other-pages-300x250"><div class="ad-wrapper"><!-- 300 x 250 ATF Desktop --><div id="med-rect-atf"></div></div></div>
    </div>
  </div>

<div id="block-adsrightcenter-otherpage-300x250-2" class="block block-cmatgame-core block-adsrightcenter-otherpage-300x250">
  
    
      <div class="view-content">
      <div class="panel-pane pane-block pane-cmatgame-advertisement-cm-g-otherpages-300x250-center other-pages-300x250"><div class="ad-wrapper"><!-- 300 x 250 ATF Desktop --><div id="med-rect-btf"></div></div></div>
    </div>
  </div>
<div id="block-playlistrightsidebanner-3" class="block block-block-content block-block-content4c6a7813-867a-4112-a837-b6fd47fe8607">
    
        
          
            <div class="basic__body"><div id="right-rail-playlist-marketing-promo" class="playlist-right-side-promo"  style="display:none;"><a href="javascript:void(0);" onclick="playlist_marketing_overlay_promo_signup_handler('Get Playlist marketing - Right Sidebar Promo clicked')"><img src="sites/default/files/cmatgame_block/CoolMathGames_banner9b_300x102.png"></a></div></div>
      <div class="right-rail-promo"></div>
      </div>

<div id="block-yearlysubscriptionrightblock" class="block block-block-content block-block-contentec497755-6c84-4088-8406-5ad3435951da">
    
        
          
            <div class="basic__body"><div id="yealy-subscription-plan"><a href="javascript:void(0);" onclick="yearlysubscription_promo_handler('yearly subscription - Right Sidebar Promo clicked')"><img src="/sites/default/files/cmatgame_block/coolmathgames_banner34_300x102.png"></a></div></div>
      <div class="right-rail-promo"></div>
      </div>

<div id="block-nodepagespromouserprofiles-2" class="block block-block-content block-block-content94913ff6-dd14-4345-8c90-e12e39b0e2f8">
    
        
          
            <div class="basic__body"><style>
.profiles-promo{
  background: url('/sites/default/files/profiles-right-rail_3.png')no-repeat;
  height: 102px;
  width: 300px;
  display: block;
  text-indent: -9999px;
  background-position: top center;
  margin-bottom: 44px;
}
a:hover{
    background-position: bottom center;
}

</style>

<a class="profiles-promo" href="/signup">User Profiles</a></div>
      <div class="right-rail-promo"></div>
      </div>

<div id="block-coolmath-rightrailblockallgamesaz" class="block block-block-content block-block-contentdb7b8c07-768c-46b3-8588-bb5c7075ed3f">
    
        
          
            <div class="basic__body"><div id="trendi-container" style="margin-bottom: 50px;"> </div>

<div class="aside-link-title"><a href="/1-complete-game-list?rightrail">All Games A-Z</a></div>
</div>
      <div class="right-rail-promo"></div>
      </div>


                </div>
                                  <div class="promo clearfix">
                    <div class="inside">
                        

<div id="block-coolmath-rightrailpromogames" class="block block-cmatgame-core block-rightrailpromogames">
  
    
      <div class="view-content">
      <div class="panel-pane pane-views-panes pane-queues-view-rightrail-games-promo"><h2 class="pane-title"><a href="/1-aiming-games">Aiming Games</a></h2><div class="node-game"><a href="/0-archery-world-tour"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Archery World Tour Game" title="Archery World Tour" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/archery-world-tour.png?itok=q1Uwb7xx" class="lazyload img-fluid" typeof="Image" />

</div><h3 class="game-title">Archery World Tour</h3></a></div><div class="node-game"><a href="/0-arcade-golf-neon"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Arcade Golf Neon Game" title="Arcade Golf Neon" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/arcade-golf-neon-game-logo.png?itok=JkOWTpb7" class="lazyload img-fluid" typeof="Image" />

</div><h3 class="game-title">Arcade Golf Neon</h3></a></div><div class="node-game"><a href="/0-basketball-master-2"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Basketball Master 2 Game" title="Basketball Master 2" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/basketball-master-2-game-logo.png?itok=jgUijnnq" class="lazyload img-fluid" typeof="Image" />

</div><h3 class="game-title">Basketball Master 2</h3></a></div><div class="node-game"><a href="/0-iq-ball"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="IQ Ball Game" title="IQ Ball" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/game-logo-iq-ball.gif?itok=uxRL9p9g" class="lazyload img-fluid" typeof="Image" />

</div><h3 class="game-title">IQ Ball</h3></a></div><div class="node-game"><a href="/0-cannon-basketball-3"><div class="field-image">
<img src="/modules/custom/cmatgame_core/images/1x1.png" width="83" height="50" alt="Cannon Basketball 3 Game" title="Cannon Basketball 3" data-src="/sites/default/files/styles/thumbnail_small/public/game_thumbnail/cannon-basketball-3-game-logo.png?itok=-dw0j6QE" class="lazyload img-fluid" typeof="Image" />

</div><h3 class="game-title">Cannon Basketball 3</h3></a></div></div>
    </div>
  </div>

<div id="block-coolmath-adsrightbottom-otherpage-160x600" class="block block-cmatgame-core block-adsrightbottom-otherpage-160x600">
  
    
      <div class="view-content">
      <div class="panel-pane pane-block pane-cmatgame-advertisement-cm-g-otherpages-160x600-bottom other-pages-160x600"><div class="ad-wrapper"><!-- 160 x 600 Skyscraper Desktop --><div id="sky-btf"></div></div></div>
    </div>
  </div>
<div id="block-leaderboardpromorightrail-4" class="block block-block-content block-block-contentdbed06d8-7595-4402-a8df-39e62a69ca98">
    
        
          
            <div class="basic__body"><div class="leaderboard-promo"><a href="/profile/leaderboard"><img src="/sites/default/files/cmatgame_block/leaderboards-right-rail-hover.png"></a></div></div>
      <div class="right-rail-promo"></div>
      </div>


                    </div>
                  </div>
                              </aside>
                      </div>

        </div>
                  <div class="row adbottom">
            <div class="col-12">
                

<div id="block-coolmath-adsbottom-otherpage-728x90" class="block block-cmatgame-core block-adsbottom-otherpage-728x90">
  
    
      <div class="view-content">
      <div class="panel-pane pane-block pane-cmatgame-advertisement-cm-g-otherpages-728x90-footer"><div class="ad-wrapper"><!-- 728 x 90 BTF Desktop --><div id="leaderboard-btf"></div></div></div>
    </div>
  </div>

            </div>
          </div>
              </div>
    </div>
  </main>
  <footer class="page__footer">
  <div class="container">
    <div class="row pb-3">
      <div class="col-lg-2 d-none d-xl-block"></div>
      <div class="col-lg-10 pl-lg-0">
        <div class="item-list">
          <ol>
                          <li>&nbsp;</li>
              <li>&nbsp;</li>
                        <li>
              <div class="pane-bean-footer-pivacy-policy">
                <div class="link-with-body-title">
                  <a href="/privacyp">Coolmath games privacy policy</a>
                </div>
                <div class="field-text-block">
                  <p>If you believe that your own copyrighted content is on our Site without your permission, please follow this
                    <a href="http://coolmath.com/copyright-infringement-notice-procedure">Copyright Infringement Notice procedure</a>.</p>
                </div>
              </div>
            </li>
                          <li>
                  
  <div class="block block--coolmath-desktopfootermenu">

  
    

      
      <div class="panel-pane pane-menu-tree pane-menu-desktop-footer-menu">
      <div class="menu-name-menu-desktop-footer-menu">
                          <ul class="footer-menu">
                                                  <li class="mb-3 mr-3 menu__item is-expanded expanded footer-menu-column-0">
                                            <span class="menu__link nolink">COOLMATHGAMES.COM</span>
                                                                  <ul class="footer-menu">
                                                      <li >
                                                            <a href="/about-us" data-drupal-link-system-path="node/9901">About Us</a>
                                        </li>
                                                      <li >
                                                            <a href="/terms-use" data-drupal-link-system-path="node/9906">Terms of Use</a>
                                        </li>
                                                      <li >
                                                            <a href="/aboutourads" data-drupal-link-system-path="node/12889">About Our Ads</a>
                                        </li>
                                                      <li >
                                                            <a href="/subscription-faq" data-drupal-link-system-path="node/10921">Subscription FAQ</a>
                                        </li>
                                                      <li >
                                                            <a href="/adblock-faq" data-drupal-link-system-path="node/12937">Adblock FAQ</a>
                                        </li>
                                                      <li >
                                                            <a href="/contact-us-about-subscriptions" data-drupal-link-system-path="node/11046">Subscription Support</a>
                                        </li>
                                                      <li >
                                                            <a href="/blog" data-drupal-link-system-path="blog">Blog</a>
                                        </li>
                                                      <li >
                                                            <a href="/contact-us" data-drupal-link-system-path="node/12581">CONTACT US</a>
                                        </li>
                  </ul>
            
                          </li>
                                                  <li class="mb-3 mr-3 menu__item is-expanded expanded footer-menu-column-1">
                                            <span class="menu__link nolink">BROWSE GAMES</span>
                                                                  <ul class="footer-menu">
                                                      <li >
                                                            <a href="/1-strategy-games" title="Strategy Games" data-drupal-link-system-path="taxonomy/term/6">Strategy Games</a>
                                        </li>
                                                      <li >
                                                            <a href="/1-skill-games" title="Skill Games" data-drupal-link-system-path="taxonomy/term/46">Skill Games</a>
                                        </li>
                                                      <li >
                                                            <a href="/1-number-games" title="Number Games" data-drupal-link-system-path="taxonomy/term/151">Number Games</a>
                                        </li>
                                                      <li >
                                                            <a href="/1-logic-games" title="Logic Games" data-drupal-link-system-path="taxonomy/term/91">Logic Games</a>
                                        </li>
                                                      <li >
                                                            <a href="/1-memory-games" title="Memory Games" data-drupal-link-system-path="taxonomy/term/181">Memory Games</a>
                                        </li>
                                                      <li >
                                                            <a href="/1-classic-games" title="Classic Games" data-drupal-link-system-path="taxonomy/term/211">Classic Games</a>
                                        </li>
                                                      <li >
                                                            <a href="/0-jigsaw-puzzles" title="Jigsaw Puzzles" data-drupal-link-system-path="0-jigsaw-puzzles">Jigsaw Puzzles</a>
                                        </li>
                                                      <li >
                                                            <a href="/1-science-games" title="Science Games" data-drupal-link-system-path="taxonomy/term/626">Science Games</a>
                                        </li>
                                                      <li >
                                                            <a href="/1-geography-games" title="Geography Games" data-drupal-link-system-path="taxonomy/term/206">Geography Games</a>
                                        </li>
                  </ul>
            
                          </li>
                                                  <li class="mb-3 mr-3 menu__item is-expanded expanded footer-menu-column-2">
                                            <span class="menu__link nolink">COOLMATH.COM</span>
                                                                  <ul class="footer-menu">
                                                      <li >
                                                            <a href="https://www.coolmath.com/prealgebra" title="Pre-Algebra Lessons">Pre-Algebra Lessons</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath.com/algebra" title="Algebra Lessons">Algebra Lessons</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath.com/precalculus-review-calculus-intro" title="Pre-Calculus Lessons">Pre-Calculus Lessons</a>
                                        </li>
                                                      <li >
                                                            <a href="https://coolmath.com/reference/online-math-dictionary" title="Math Dictionary">Math Dictionary</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath.com/algebra/08-lines" title="Lines">Lines</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath.com/prealgebra/00-factors-primes" title="Factors and Primes">Factors and Primes</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath.com/prealgebra/02-decimals" title="Decimals">Decimals</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath.com/prealgebra/06-properties" title="Properties">Properties</a>
                                        </li>
                  </ul>
            
                          </li>
                                                  <li class="mb-3 mr-3 menu__item is-expanded expanded footer-menu-column-3">
                                            <span class="menu__link nolink">MORE FROM COOLMATH</span>
                                                                  <ul class="footer-menu">
                                                      <li >
                                                            <a href="https://www.coolmath4kids.com" title="Coolmath4Kids">Coolmath4Kids</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath4kids.com/manipulatives/ten-frame" title="Ten Frame Manipulative">Ten Frame Manipulative</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath4kids.com/manipulatives/base-ten-blocks" title="Base Ten Blocks Manipulative">Base Ten Blocks Manipulative</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath4kids.com/manipulatives/number-line" title="Number Line Manipulative">Number Line Manipulative</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath4kids.com/manipulatives/pattern-blocks" title="Pattern Blocks Manipulative">Pattern Blocks Manipulative</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.coolmath4kids.com/quizzes" title="Math Quizzes">Math Quizzes</a>
                                        </li>
                                                      <li >
                                                            <a href="http://www.coolmath4teachers.com" title="Coolmath4Teachers">Coolmath4Teachers</a>
                                        </li>
                                                      <li >
                                                            <a href="http://www.coolmath4parents.com" title="Coolmath4Parents">Coolmath4Parents</a>
                                        </li>
                  </ul>
            
                          </li>
                                                  <li class="mb-3 mr-3 menu__item is-expanded expanded footer-menu-column-4">
                                            <span class="menu__link nolink">Follow us</span>
                                                                  <ul class="footer-menu">
                                                      <li >
                                                            <a href="https://www.facebook.com/CoolMathGamesLLC">Facebook</a>
                                        </li>
                                                      <li >
                                                            <a href="https://www.instagram.com/coolmathgames/">Instagram</a>
                                        </li>
                                                      <li >
                                                            <a href="https://twitter.com/TheRealCoolmath">Twitter</a>
                                        </li>
                  </ul>
            
                          </li>
                  </ul>
                  </div>
    </div>
  

  
  </div>


              </li>
                        <li>
              <div class="copyright-wrapper text-left">
                <p>&copy; 2021 Coolmath.com LLC. All Rights Reserved. </p>
              </div>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</footer>
</div>

  </div>

  
  <link rel="stylesheet" media="all" href="/sites/default/files/css/css_P7B0pK4bT4vBfjUIKo0O84uj500SuySjjgBWcoGpUVU.css" />
<link rel="stylesheet" media="all" href="/sites/default/files/css/css_1wORFaApfVZXUXD-s5AWL-cjX1PhNK7wt-ZtfStEJ3Q.css" />
<link rel="stylesheet" media="print" href="/sites/default/files/css/css_32uozVItXm4g-AiwMq6iaUuaCmC6e6chrSBbOXN-0is.css" />
<link rel="stylesheet" media="all" href="/themes/custom/coolmath/assets/themes/css/_coolmath_default.css?qo8guu" id="styleswitcher-css" />

  <script src="/sites/default/files/js/js_0aXBrAp2-paSJzzmMgBIttqiJZ3qtOdWCUblAgxEnH8.js" type="deferjs"></script>

         <script type="deferjs">
    // This will delay in js load
    deferscript('https://js.stripe.com/v3/', 'stripejs', 5000);
  </script>
	    <script type="deferjs">
      if (jQuery('body').hasClass('node-type-game')) {
        var offset = 420;
        var offsetMillis = offset * 60 * 1000;
        var today = new Date();
        var millis = today.getTime();
        var timeZoneOffset = (today.getTimezoneOffset() * 60 * 1000);
        var pst = millis - offsetMillis;
        var currentDate = new Date(pst);
        var dayarray = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        var montharray = ['Jan.', 'Feb.', 'Mar.', 'Apr.', 'May.', 'Jun.', 'Jul.', 'Aug.', 'Sep.', 'Oct.', 'Nov.', 'Dec.'];
        var displaydate = dayarray[currentDate.getDay()] + ", " + montharray[currentDate.getMonth()] + " " + ordinal_suffix_of(currentDate.getDate());
        // jQuery('.node-type-game .inside .dailygames .common-title').html("<div class='daily-games-text'><img src='/themes/custom/coolmath/assets/images/bird.png' alt='daily games' class='daily-games-header' /></div><span class='dailygamesdate'>" + displaydate + "</span>");
        var getGamePageTitle = jQuery('.node-type-game .inside .dailygames .common-title').text();
        jQuery('.node-type-game .inside .dailygames .common-title').html("<div class='daily-games-text'><h1 class='mGamePageTitle'>"+getGamePageTitle+"</h1><img src='/themes/custom/coolmath/assets/images/bird.png' alt='daily games' class='daily-games-header' /></div><span class='dailygamesdate'>" + displaydate + "</span>");
      }
    </script>
    <script type="deferjs">
      // This will lazy-load pushwoosh js
      deferscript('//cdn.pushwoosh.com/webpush/v3/pushwoosh-web-notifications.js', 'pushwoosh', 5000);
    </script>
    <script type="deferjs">
      defer(function() {
        // var displayPushWooshNotification = true;
        if (typeof displayPushWooshNotification !== 'undefined') {
          console.log('present');
          if (location.hostname == "d8-stage.coolmathgames.com" || location.hostname == "d8.coolmathgames.local") {
            applicationCode = "0A16D-69CC2";
            console.log('stage');
          } else { // live
            applicationCode = "BDAD7-8E616";
          }
          var Pushwoosh = Pushwoosh || [];
          Pushwoosh.push([
            'init', {
              logLevel: 'info',
              applicationCode: applicationCode,
              defaultNotificationTitle: 'Pushwoosh',
              defaultNotificationImage: 'https://www.coolmathgames.com/themes/custom/coolmath/logo.png',
              autoSubscribe: true, // or true. If true, prompts a user to subscribe for pushes upon SDK initialization
              subscribeWidget: {
                enabled: true
              }
            }
          ]);
        }
      },5000);
    </script>
  </body>
  <!--fixes for defer issues on drupal core js-->
  <script type="deferjs">Drupal.attachBehaviors();</script>
</html>
